var W0=Object.create;var Ws=Object.defineProperty;var U0=Object.getOwnPropertyDescriptor;var j0=Object.getOwnPropertyNames;var $0=Object.getPrototypeOf,V0=Object.prototype.hasOwnProperty;var $=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Se=(t,e)=>()=>(t&&(e=t(t=0)),e);var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fh=(t,e)=>{for(var r in e)Ws(t,r,{get:e[r],enumerable:!0})},hh=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of j0(e))!V0.call(t,i)&&i!==r&&Ws(t,i,{get:()=>e[i],enumerable:!(n=U0(e,i))||n.enumerable});return t};var B0=(t,e,r)=>(r=t!=null?W0($0(t)):{},hh(e||!t||!t.__esModule?Ws(r,"default",{value:t,enumerable:!0}):r,t)),F=t=>hh(Ws({},"__esModule",{value:!0}),t);var L={};fh(L,{__addDisposableResource:()=>qy,__assign:()=>Ra,__asyncDelegator:()=>Cy,__asyncGenerator:()=>xy,__asyncValues:()=>Oy,__await:()=>Un,__awaiter:()=>vy,__classPrivateFieldGet:()=>Ry,__classPrivateFieldIn:()=>ky,__classPrivateFieldSet:()=>Iy,__createBinding:()=>ka,__decorate:()=>py,__disposeResources:()=>Dy,__esDecorate:()=>fy,__exportStar:()=>Ey,__extends:()=>ly,__generator:()=>wy,__importDefault:()=>Ay,__importStar:()=>Ty,__makeTemplateObject:()=>Py,__metadata:()=>_y,__param:()=>my,__propKey:()=>yy,__read:()=>Tu,__rest:()=>uy,__rewriteRelativeImportExtension:()=>My,__runInitializers:()=>hy,__setFunctionName:()=>gy,__spread:()=>Ny,__spreadArray:()=>by,__spreadArrays:()=>Sy,__values:()=>Ia,default:()=>kP});function ly(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ou(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function uy(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function py(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function my(t,e){return function(r,n){e(r,n,t)}}function fy(t,e,r,n,i,o){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=n.kind,d=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),m,h=!1,f=r.length-1;f>=0;f--){var y={};for(var w in n)y[w]=w==="access"?{}:n[w];for(var w in n.access)y.access[w]=n.access[w];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(x||null))};var _=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[d],y);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(m=s(_.get))&&(u.get=m),(m=s(_.set))&&(u.set=m),(m=s(_.init))&&i.unshift(m)}else(m=s(_))&&(a==="field"?i.unshift(m):u[d]=m)}l&&Object.defineProperty(l,n.name,u),h=!0}function hy(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function yy(t){return typeof t=="symbol"?t:"".concat(t)}function gy(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function _y(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vy(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{l(n.next(u))}catch(m){s(m)}}function d(u){try{l(n.throw(u))}catch(m){s(m)}}function l(u){u.done?o(u.value):i(u.value).then(a,d)}l((n=n.apply(t,e||[])).next())})}function wy(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return d([l,u])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ey(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ka(e,t,r)}function Ia(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function Ny(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Tu(arguments[e]));return t}function Sy(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function by(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Un(t){return this instanceof Un?(this.v=t,this):new Un(t)}function xy(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(y){return Promise.resolve(y).then(f,m)}}function a(f,y){n[f]&&(i[f]=function(w){return new Promise(function(_,x){o.push([f,w,_,x])>1||d(f,w)})},y&&(i[f]=y(i[f])))}function d(f,y){try{l(n[f](y))}catch(w){h(o[0][3],w)}}function l(f){f.value instanceof Un?Promise.resolve(f.value.v).then(u,m):h(o[0][2],f)}function u(f){d("next",f)}function m(f){d("throw",f)}function h(f,y){f(y),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Cy(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(s){return(r=!r)?{value:Un(t[i](s)),done:!1}:o?o(s):s}:o}}function Oy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ia=="function"?Ia(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(l){o({value:l,done:a})},s)}}function Py(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ty(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Pu(t),n=0;n<r.length;n++)r[n]!=="default"&&ka(e,t,r[n]);return RP(e,t),e}function Ay(t){return t&&t.__esModule?t:{default:t}}function Ry(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Iy(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function ky(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function qy(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Dy(t){function e(o){t.error=t.hasError?new IP(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(s){return e(s),i()})}else n|=1}catch(s){e(s)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function My(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,o,s){return n?e?".jsx":".js":i&&(!o||!s)?r:i+o+"."+s.toLowerCase()+"js"}):t}var Ou,Ra,ka,RP,Pu,IP,kP,W=Se(()=>{Ou=function(t,e){return Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ou(t,e)};Ra=function(){return Ra=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ra.apply(this,arguments)};ka=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};RP=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Pu=function(t){return Pu=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Pu(t)};IP=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};kP={__extends:ly,__assign:Ra,__rest:uy,__decorate:py,__param:my,__esDecorate:fy,__runInitializers:hy,__propKey:yy,__setFunctionName:gy,__metadata:_y,__awaiter:vy,__generator:wy,__createBinding:ka,__exportStar:Ey,__values:Ia,__read:Tu,__spread:Ny,__spreadArrays:Sy,__spreadArray:by,__await:Un,__asyncGenerator:xy,__asyncDelegator:Cy,__asyncValues:Oy,__makeTemplateObject:Py,__importStar:Ty,__importDefault:Ay,__classPrivateFieldGet:Ry,__classPrivateFieldSet:Iy,__classPrivateFieldIn:ky,__addDisposableResource:qy,__disposeResources:Dy,__rewriteRelativeImportExtension:My}});var z=p((Kee,zy)=>{var qa=Object.defineProperty,qP=Object.getOwnPropertyDescriptor,DP=Object.getOwnPropertyNames,MP=Object.prototype.hasOwnProperty,Da=(t,e)=>qa(t,"name",{value:e,configurable:!0}),FP=(t,e)=>{for(var r in e)qa(t,r,{get:e[r],enumerable:!0})},LP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of DP(e))!MP.call(t,i)&&i!==r&&qa(t,i,{get:()=>e[i],enumerable:!(n=qP(e,i))||n.enumerable});return t},WP=t=>LP(qa({},"__esModule",{value:!0}),t),Fy={};FP(Fy,{AlgorithmId:()=>jy,EndpointURLScheme:()=>Uy,FieldPosition:()=>$y,HttpApiKeyAuthLocation:()=>Wy,HttpAuthLocation:()=>Ly,IniSectionType:()=>Vy,RequestHandlerProtocol:()=>By,SMITHY_CONTEXT_KEY:()=>BP,getDefaultClientConfiguration:()=>$P,resolveDefaultRuntimeConfig:()=>VP});zy.exports=WP(Fy);var Ly=(t=>(t.HEADER="header",t.QUERY="query",t))(Ly||{}),Wy=(t=>(t.HEADER="header",t.QUERY="query",t))(Wy||{}),Uy=(t=>(t.HTTP="http",t.HTTPS="https",t))(Uy||{}),jy=(t=>(t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256",t))(jy||{}),UP=Da(t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>"sha256",checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>"md5",checksumConstructor:()=>t.md5}),{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),jP=Da(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),$P=Da(t=>({...UP(t)}),"getDefaultClientConfiguration"),VP=Da(t=>({...jP(t)}),"resolveDefaultRuntimeConfig"),$y=(t=>(t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER",t))($y||{}),BP="__smithy_context",Vy=(t=>(t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",t))(Vy||{}),By=(t=>(t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0",t))(By||{})});var Ae=p((Xee,eg)=>{var Ma=Object.defineProperty,zP=Object.getOwnPropertyDescriptor,HP=Object.getOwnPropertyNames,GP=Object.prototype.hasOwnProperty,Nr=(t,e)=>Ma(t,"name",{value:e,configurable:!0}),KP=(t,e)=>{for(var r in e)Ma(t,r,{get:e[r],enumerable:!0})},QP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of HP(e))!GP.call(t,i)&&i!==r&&Ma(t,i,{get:()=>e[i],enumerable:!(n=zP(e,i))||n.enumerable});return t},JP=t=>QP(Ma({},"__esModule",{value:!0}),t),Hy={};KP(Hy,{Field:()=>eT,Fields:()=>tT,HttpRequest:()=>rT,HttpResponse:()=>nT,getHttpHandlerExtensionConfiguration:()=>YP,isValidHostname:()=>Zy,resolveHttpHandlerRuntimeConfig:()=>XP});eg.exports=JP(Hy);var YP=Nr(t=>{let e=t.httpHandler;return{setHttpHandler(r){e=r},httpHandler(){return e},updateHttpClientConfig(r,n){e.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),XP=Nr(t=>({httpHandler:t.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),ZP=z(),Gy=class{constructor({name:e,kind:r=ZP.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};Nr(Gy,"Field");var eT=Gy,Ky=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};Nr(Ky,"Fields");var tT=Ky,Qy=class Jy{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new Jy({...this,headers:{...this.headers}});return e.query&&(e.query=Yy(e.query)),e}};Nr(Qy,"HttpRequest");var rT=Qy;function Yy(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}Nr(Yy,"cloneQuery");var Xy=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};Nr(Xy,"HttpResponse");var nT=Xy;function Zy(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Nr(Zy,"isValidHostname")});var Lo=p(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.getHostHeaderPlugin=nt.hostHeaderMiddlewareOptions=nt.hostHeaderMiddleware=nt.resolveHostHeaderConfig=void 0;var iT=Ae();function oT(t){return t}nt.resolveHostHeaderConfig=oT;var sT=t=>e=>async r=>{if(!iT.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:i=""}=t.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)};nt.hostHeaderMiddleware=sT;nt.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var aT=t=>({applyToStack:e=>{e.add((0,nt.hostHeaderMiddleware)(t),nt.hostHeaderMiddlewareOptions)}});nt.getHostHeaderPlugin=aT});var tg=p(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.getLoggerPlugin=Tt.loggerMiddlewareOptions=Tt.loggerMiddleware=void 0;var cT=()=>(t,e)=>async r=>{var n,i;try{let o=await t(r),{clientName:s,commandName:a,logger:d,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:m}=l,h=u??e.inputFilterSensitiveLog,f=m??e.outputFilterSensitiveLog,{$metadata:y,...w}=o.output;return(n=d?.info)===null||n===void 0||n.call(d,{clientName:s,commandName:a,input:h(r.input),output:f(w),metadata:y}),o}catch(o){let{clientName:s,commandName:a,logger:d,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:u}=l,m=u??e.inputFilterSensitiveLog;throw(i=d?.error)===null||i===void 0||i.call(d,{clientName:s,commandName:a,input:m(r.input),error:o,metadata:o.$metadata}),o}};Tt.loggerMiddleware=cT;Tt.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var dT=t=>({applyToStack:e=>{e.add((0,Tt.loggerMiddleware)(),Tt.loggerMiddlewareOptions)}});Tt.getLoggerPlugin=dT});var Wo=p(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var lT=(W(),F(L));lT.__exportStar(tg(),Au)});var Uo=p(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.getRecursionDetectionPlugin=At.addRecursionDetectionMiddlewareOptions=At.recursionDetectionMiddleware=void 0;var uT=Ae(),rg="X-Amzn-Trace-Id",pT="AWS_LAMBDA_FUNCTION_NAME",mT="_X_AMZN_TRACE_ID",fT=t=>e=>async r=>{let{request:n}=r;if(!uT.HttpRequest.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(rg))return e(r);let i=process.env[pT],o=process.env[mT],s=a=>typeof a=="string"&&a.length>0;return s(i)&&s(o)&&(n.headers[rg]=o),e({...r,request:n})};At.recursionDetectionMiddleware=fT;At.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var hT=t=>({applyToStack:e=>{e.add((0,At.recursionDetectionMiddleware)(t),At.addRecursionDetectionMiddlewareOptions)}});At.getRecursionDetectionPlugin=hT});var ae=p((nte,lg)=>{var Fa=Object.defineProperty,yT=Object.getOwnPropertyDescriptor,gT=Object.getOwnPropertyNames,_T=Object.prototype.hasOwnProperty,nn=(t,e)=>Fa(t,"name",{value:e,configurable:!0}),vT=(t,e)=>{for(var r in e)Fa(t,r,{get:e[r],enumerable:!0})},wT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gT(e))!_T.call(t,i)&&i!==r&&Fa(t,i,{get:()=>e[i],enumerable:!(n=yT(e,i))||n.enumerable});return t},ET=t=>wT(Fa({},"__esModule",{value:!0}),t),ng={};vT(ng,{CredentialsProviderError:()=>NT,ProviderError:()=>La,TokenProviderError:()=>ST,chain:()=>bT,fromStatic:()=>xT,memoize:()=>CT});lg.exports=ET(ng);var ig=class og extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,og.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};nn(ig,"ProviderError");var La=ig,sg=class ag extends La{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,ag.prototype)}};nn(sg,"CredentialsProviderError");var NT=sg,cg=class dg extends La{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,dg.prototype)}};nn(cg,"TokenProviderError");var ST=cg,bT=nn((...t)=>async()=>{if(t.length===0)throw new La("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},"chain"),xT=nn(t=>()=>Promise.resolve(t),"fromStatic"),CT=nn((t,e,r)=>{let n,i,o,s=!1,a=nn(async()=>{i||(i=t());try{n=await i,o=!0,s=!1}finally{i=void 0}return n},"coalesceProvider");return e===void 0?async d=>((!o||d?.forceRefresh)&&(n=await a()),n):async d=>((!o||d?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(e(n)&&await a(),n))},"memoize")});var jn=p((ite,fg)=>{var Wa=Object.defineProperty,OT=Object.getOwnPropertyDescriptor,PT=Object.getOwnPropertyNames,TT=Object.prototype.hasOwnProperty,pg=(t,e)=>Wa(t,"name",{value:e,configurable:!0}),AT=(t,e)=>{for(var r in e)Wa(t,r,{get:e[r],enumerable:!0})},RT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PT(e))!TT.call(t,i)&&i!==r&&Wa(t,i,{get:()=>e[i],enumerable:!(n=OT(e,i))||n.enumerable});return t},IT=t=>RT(Wa({},"__esModule",{value:!0}),t),mg={};AT(mg,{getSmithyContext:()=>kT,normalizeProvider:()=>qT});fg.exports=IT(mg);var ug=z(),kT=pg(t=>t[ug.SMITHY_CONTEXT_KEY]||(t[ug.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),qT=pg(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider")});var Ru=p((ote,yg)=>{var Ua=Object.defineProperty,DT=Object.getOwnPropertyDescriptor,MT=Object.getOwnPropertyNames,FT=Object.prototype.hasOwnProperty,LT=(t,e)=>Ua(t,"name",{value:e,configurable:!0}),WT=(t,e)=>{for(var r in e)Ua(t,r,{get:e[r],enumerable:!0})},UT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MT(e))!FT.call(t,i)&&i!==r&&Ua(t,i,{get:()=>e[i],enumerable:!(n=DT(e,i))||n.enumerable});return t},jT=t=>UT(Ua({},"__esModule",{value:!0}),t),hg={};WT(hg,{isArrayBuffer:()=>$T});yg.exports=jT(hg);var $T=LT(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var $n=p((ste,vg)=>{var ja=Object.defineProperty,VT=Object.getOwnPropertyDescriptor,BT=Object.getOwnPropertyNames,zT=Object.prototype.hasOwnProperty,gg=(t,e)=>ja(t,"name",{value:e,configurable:!0}),HT=(t,e)=>{for(var r in e)ja(t,r,{get:e[r],enumerable:!0})},GT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of BT(e))!zT.call(t,i)&&i!==r&&ja(t,i,{get:()=>e[i],enumerable:!(n=VT(e,i))||n.enumerable});return t},KT=t=>GT(ja({},"__esModule",{value:!0}),t),_g={};HT(_g,{fromArrayBuffer:()=>JT,fromString:()=>YT});vg.exports=KT(_g);var QT=Ru(),Iu=$("buffer"),JT=gg((t,e=0,r=t.byteLength-e)=>{if(!(0,QT.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Iu.Buffer.from(t,e,r)},"fromArrayBuffer"),YT=gg((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Iu.Buffer.from(t,e):Iu.Buffer.from(t)},"fromString")});var it=p((ate,Sg)=>{var $a=Object.defineProperty,XT=Object.getOwnPropertyDescriptor,ZT=Object.getOwnPropertyNames,eA=Object.prototype.hasOwnProperty,ku=(t,e)=>$a(t,"name",{value:e,configurable:!0}),tA=(t,e)=>{for(var r in e)$a(t,r,{get:e[r],enumerable:!0})},rA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ZT(e))!eA.call(t,i)&&i!==r&&$a(t,i,{get:()=>e[i],enumerable:!(n=XT(e,i))||n.enumerable});return t},nA=t=>rA($a({},"__esModule",{value:!0}),t),wg={};tA(wg,{fromUtf8:()=>Ng,toUint8Array:()=>iA,toUtf8:()=>oA});Sg.exports=nA(wg);var Eg=$n(),Ng=ku(t=>{let e=(0,Eg.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),iA=ku(t=>typeof t=="string"?Ng(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),oA=ku(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,Eg.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var Ag=p((cte,Tg)=>{var Va=Object.defineProperty,sA=Object.getOwnPropertyDescriptor,aA=Object.getOwnPropertyNames,cA=Object.prototype.hasOwnProperty,bg=(t,e)=>Va(t,"name",{value:e,configurable:!0}),dA=(t,e)=>{for(var r in e)Va(t,r,{get:e[r],enumerable:!0})},lA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aA(e))!cA.call(t,i)&&i!==r&&Va(t,i,{get:()=>e[i],enumerable:!(n=sA(e,i))||n.enumerable});return t},uA=t=>lA(Va({},"__esModule",{value:!0}),t),xg={};dA(xg,{fromHex:()=>Og,toHex:()=>Pg});Tg.exports=uA(xg);var Cg={},qu={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Cg[t]=e,qu[e]=t}function Og(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in qu)e[r/2]=qu[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}bg(Og,"fromHex");function Pg(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Cg[t[r]];return e}bg(Pg,"toHex")});var Mu=p((dte,kg)=>{var Ba=Object.defineProperty,pA=Object.getOwnPropertyDescriptor,mA=Object.getOwnPropertyNames,fA=Object.prototype.hasOwnProperty,Du=(t,e)=>Ba(t,"name",{value:e,configurable:!0}),hA=(t,e)=>{for(var r in e)Ba(t,r,{get:e[r],enumerable:!0})},yA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mA(e))!fA.call(t,i)&&i!==r&&Ba(t,i,{get:()=>e[i],enumerable:!(n=pA(e,i))||n.enumerable});return t},gA=t=>yA(Ba({},"__esModule",{value:!0}),t),Rg={};hA(Rg,{escapeUri:()=>Ig,escapeUriPath:()=>vA});kg.exports=gA(Rg);var Ig=Du(t=>encodeURIComponent(t).replace(/[!'()*]/g,_A),"escapeUri"),_A=Du(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),vA=Du(t=>t.split("/").map(Ig).join("/"),"escapeUriPath")});var e_=p((pte,Zg)=>{var Qa=Object.defineProperty,wA=Object.getOwnPropertyDescriptor,EA=Object.getOwnPropertyNames,NA=Object.prototype.hasOwnProperty,pe=(t,e)=>Qa(t,"name",{value:e,configurable:!0}),SA=(t,e)=>{for(var r in e)Qa(t,r,{get:e[r],enumerable:!0})},bA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EA(e))!NA.call(t,i)&&i!==r&&Qa(t,i,{get:()=>e[i],enumerable:!(n=wA(e,i))||n.enumerable});return t},xA=t=>bA(Qa({},"__esModule",{value:!0}),t),Lg={};SA(Lg,{SignatureV4:()=>XA,clearCredentialCache:()=>$A,createScope:()=>Ga,getCanonicalHeaders:()=>Uu,getCanonicalQuery:()=>Hg,getPayloadHash:()=>Ka,getSigningKey:()=>zg,moveHeadersToQuery:()=>Yg,prepareRequest:()=>$u});Zg.exports=xA(Lg);var qg=jn(),Fu=it(),CA="X-Amz-Algorithm",OA="X-Amz-Credential",Wg="X-Amz-Date",PA="X-Amz-SignedHeaders",TA="X-Amz-Expires",Ug="X-Amz-Signature",jg="X-Amz-Security-Token",$g="authorization",Vg=Wg.toLowerCase(),AA="date",RA=[$g,Vg,AA],IA=Ug.toLowerCase(),Wu="x-amz-content-sha256",kA=jg.toLowerCase(),qA={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},DA=/^proxy-/,MA=/^sec-/,Lu="AWS4-HMAC-SHA256",FA="AWS4-HMAC-SHA256-PAYLOAD",LA="UNSIGNED-PAYLOAD",WA=50,Bg="aws4_request",UA=60*60*24*7,Sr=Ag(),jA=it(),Vn={},Ha=[],Ga=pe((t,e,r)=>`${t}/${e}/${r}/${Bg}`,"createScope"),zg=pe(async(t,e,r,n,i)=>{let o=await Dg(t,e.secretAccessKey,e.accessKeyId),s=`${r}:${n}:${i}:${(0,Sr.toHex)(o)}:${e.sessionToken}`;if(s in Vn)return Vn[s];for(Ha.push(s);Ha.length>WA;)delete Vn[Ha.shift()];let a=`AWS4${e.secretAccessKey}`;for(let d of[r,n,i,Bg])a=await Dg(t,a,d);return Vn[s]=a},"getSigningKey"),$A=pe(()=>{Ha.length=0,Object.keys(Vn).forEach(t=>{delete Vn[t]})},"clearCredentialCache"),Dg=pe((t,e,r)=>{let n=new t(e);return n.update((0,jA.toUint8Array)(r)),n.digest()},"hmac"),Uu=pe(({headers:t},e,r)=>{let n={};for(let i of Object.keys(t).sort()){if(t[i]==null)continue;let o=i.toLowerCase();(o in qA||e?.has(o)||DA.test(o)||MA.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[i].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),jo=Mu(),Hg=pe(({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===IA)continue;e.push(n);let i=t[n];typeof i=="string"?r[n]=`${(0,jo.escapeUri)(n)}=${(0,jo.escapeUri)(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((o,s)=>o.concat([`${(0,jo.escapeUri)(n)}=${(0,jo.escapeUri)(s)}`]),[]).sort().join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),VA=Ru(),BA=it(),Ka=pe(async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===Wu)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,VA.isArrayBuffer)(e)){let n=new r;return n.update((0,BA.toUint8Array)(e)),(0,Sr.toHex)(await n.digest())}return LA},"getPayloadHash"),Mg=it(),Gg=class{format(e){let r=[];for(let o of Object.keys(e)){let s=(0,Mg.fromUtf8)(o);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,s)=>o+s.byteLength,0)),i=0;for(let o of r)n.set(o,i),i+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case"string":let a=(0,Mg.fromUtf8)(e.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(GA.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!HA.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let m=new Uint8Array(17);return m[0]=9,m.set((0,Sr.fromHex)(e.value.replace(/\-/g,"")),1),m}}};pe(Gg,"HeaderFormatter");var zA=Gg,HA=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Kg=class Qg{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(e));n>-1&&i>0;n--,i/=256)r[n]=i;return e<0&&ju(r),new Qg(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&ju(e),parseInt((0,Sr.toHex)(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};pe(Kg,"Int64");var GA=Kg;function ju(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}pe(ju,"negate");var KA=pe((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader"),Jg=pe(({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?QA(e):void 0}),"cloneRequest"),QA=pe(t=>Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{}),"cloneQuery"),Yg=pe((t,e={})=>{var r;let{headers:n,query:i={}}=typeof t.clone=="function"?t.clone():Jg(t);for(let o of Object.keys(n)){let s=o.toLowerCase();s.slice(0,6)==="x-amz-"&&!((r=e.unhoistableHeaders)!=null&&r.has(s))&&(i[o]=n[o],delete n[o])}return{...t,headers:n,query:i}},"moveHeadersToQuery"),$u=pe(t=>{t=typeof t.clone=="function"?t.clone():Jg(t);for(let e of Object.keys(t.headers))RA.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest"),JA=pe(t=>YA(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),YA=pe(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate"),Xg=class{constructor({applyChecksum:e,credentials:r,region:n,service:i,sha256:o,uriEscapePath:s=!0}){this.headerFormatter=new zA,this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,qg.normalizeProvider)(n),this.credentialProvider=(0,qg.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:s,signableHeaders:a,signingRegion:d,signingService:l}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let m=d??await this.regionProvider(),{longDate:h,shortDate:f}=za(n);if(i>UA)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let y=Ga(f,m,l??this.service),w=Yg($u(e),{unhoistableHeaders:s});u.sessionToken&&(w.query[jg]=u.sessionToken),w.query[CA]=Lu,w.query[OA]=`${u.accessKeyId}/${y}`,w.query[Wg]=h,w.query[TA]=i.toString(10);let _=Uu(w,o,a);return w.query[PA]=Fg(_),w.query[Ug]=await this.getSignature(h,y,this.getSigningKey(u,m,f,l),this.createCanonicalRequest(w,_,await Ka(e,this.sha256))),w}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:s}){let a=o??await this.regionProvider(),{shortDate:d,longDate:l}=za(n),u=Ga(d,a,s??this.service),m=await Ka({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let f=(0,Sr.toHex)(await h.digest()),y=[FA,l,u,i,f,m].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:e.priorSignature}).then(s=>({message:e.message,signature:s}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=n??await this.regionProvider(),{shortDate:a}=za(r),d=new this.sha256(await this.getSigningKey(o,s,a,i));return d.update((0,Fu.toUint8Array)(e)),(0,Sr.toHex)(await d.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:o,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=o??await this.regionProvider(),l=$u(e),{longDate:u,shortDate:m}=za(r),h=Ga(m,d,s??this.service);l.headers[Vg]=u,a.sessionToken&&(l.headers[kA]=a.sessionToken);let f=await Ka(l,this.sha256);!KA(Wu,l.headers)&&this.applyChecksum&&(l.headers[Wu]=f);let y=Uu(l,i,n),w=await this.getSignature(u,h,this.getSigningKey(a,d,m,s),this.createCanonicalRequest(l,y,f));return l.headers[$g]=`${Lu} Credential=${a.accessKeyId}/${h}, SignedHeaders=${Fg(y)}, Signature=${w}`,l}createCanonicalRequest(e,r,n){let i=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Hg(e)}
${i.map(o=>`${o}:${r[o]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(e,r,n){let i=new this.sha256;i.update((0,Fu.toUint8Array)(n));let o=await i.digest();return`${Lu}
${e}
${r}
${(0,Sr.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return(0,jo.escapeUri)(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,i){let o=await this.createStringToSign(e,r,i),s=new this.sha256(await n);return s.update((0,Fu.toUint8Array)(o)),(0,Sr.toHex)(await s.digest())}getSigningKey(e,r,n,i){return zg(this.sha256,e,n,r,i||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};pe(Xg,"SignatureV4");var XA=Xg,za=pe(t=>{let e=JA(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),Fg=pe(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var r_=p(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.resolveSigV4AuthConfig=zn.resolveAwsAuthConfig=void 0;var ZA=ae(),Vu=e_(),Bn=jn(),eR=3e5,tR=t=>{let e=t.credentials?t_(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:i}=t,o;return t.signer?o=(0,Bn.normalizeProvider)(t.signer):t.regionInfoProvider?o=()=>(0,Bn.normalizeProvider)(t.region)().then(async s=>[await t.regionInfoProvider(s,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},s]).then(([s,a])=>{let{signingRegion:d,signingService:l}=s;t.signingRegion=t.signingRegion||d||a,t.signingName=t.signingName||l||t.serviceId;let u={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:r},m=t.signerConstructor||Vu.SignatureV4;return new m(u)}):o=async s=>{s=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await(0,Bn.normalizeProvider)(t.region)(),properties:{}},s);let a=s.signingRegion,d=s.signingName;t.signingRegion=t.signingRegion||a,t.signingName=t.signingName||d||t.serviceId;let l={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:r},u=t.signerConstructor||Vu.SignatureV4;return new u(l)},{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:o}};zn.resolveAwsAuthConfig=tR;var rR=t=>{let e=t.credentials?t_(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:i}=t,o;return t.signer?o=(0,Bn.normalizeProvider)(t.signer):o=(0,Bn.normalizeProvider)(new Vu.SignatureV4({credentials:e,region:t.region,service:t.signingName,sha256:i,uriEscapePath:r})),{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:o}};zn.resolveSigV4AuthConfig=rR;var t_=t=>typeof t=="function"?(0,ZA.memoize)(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<eR,e=>e.expiration!==void 0):(0,Bn.normalizeProvider)(t)});var Bu=p(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.getSkewCorrectedDate=void 0;var nR=t=>new Date(Date.now()+t);Ja.getSkewCorrectedDate=nR});var n_=p(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.isClockSkewed=void 0;var iR=Bu(),oR=(t,e)=>Math.abs((0,iR.getSkewCorrectedDate)(e).getTime()-t)>=3e5;Ya.isClockSkewed=oR});var i_=p(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.getUpdatedSystemClockOffset=void 0;var sR=n_(),aR=(t,e)=>{let r=Date.parse(t);return(0,sR.isClockSkewed)(r,e)?r-Date.now():e};Xa.getUpdatedSystemClockOffset=aR});var c_=p(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.getSigV4AuthPlugin=Je.getAwsAuthPlugin=Je.awsAuthMiddlewareOptions=Je.awsAuthMiddleware=void 0;var a_=Ae(),cR=Bu(),o_=i_(),dR=t=>(e,r)=>async function(n){var i,o,s,a;if(!a_.HttpRequest.isInstance(n.request))return e(n);let d=(s=(o=(i=r.endpointV2)===null||i===void 0?void 0:i.properties)===null||o===void 0?void 0:o.authSchemes)===null||s===void 0?void 0:s[0],l=d?.name==="sigv4a"?(a=d?.signingRegionSet)===null||a===void 0?void 0:a.join(","):void 0,u=await t.signer(d),m=await e({...n,request:await u.sign(n.request,{signingDate:(0,cR.getSkewCorrectedDate)(t.systemClockOffset),signingRegion:l||r.signing_region,signingService:r.signing_service})}).catch(f=>{var y;let w=(y=f.ServerTime)!==null&&y!==void 0?y:s_(f.$response);throw w&&(t.systemClockOffset=(0,o_.getUpdatedSystemClockOffset)(w,t.systemClockOffset)),f}),h=s_(m.response);return h&&(t.systemClockOffset=(0,o_.getUpdatedSystemClockOffset)(h,t.systemClockOffset)),m};Je.awsAuthMiddleware=dR;var s_=t=>{var e,r,n;return a_.HttpResponse.isInstance(t)?(r=(e=t.headers)===null||e===void 0?void 0:e.date)!==null&&r!==void 0?r:(n=t.headers)===null||n===void 0?void 0:n.Date:void 0};Je.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var lR=t=>({applyToStack:e=>{e.addRelativeTo((0,Je.awsAuthMiddleware)(t),Je.awsAuthMiddlewareOptions)}});Je.getAwsAuthPlugin=lR;Je.getSigV4AuthPlugin=Je.getAwsAuthPlugin});var Xt=p(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var d_=(W(),F(L));d_.__exportStar(r_(),Za);d_.__exportStar(c_(),Za)});var l_=p(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.resolveUserAgentConfig=void 0;function uR(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}ec.resolveUserAgentConfig=uR});var Rt=p((Ete,w_)=>{var tc=Object.defineProperty,pR=Object.getOwnPropertyDescriptor,mR=Object.getOwnPropertyNames,fR=Object.prototype.hasOwnProperty,V=(t,e)=>tc(t,"name",{value:e,configurable:!0}),hR=(t,e)=>{for(var r in e)tc(t,r,{get:e[r],enumerable:!0})},yR=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mR(e))!fR.call(t,i)&&i!==r&&tc(t,i,{get:()=>e[i],enumerable:!(n=pR(e,i))||n.enumerable});return t},gR=t=>yR(tc({},"__esModule",{value:!0}),t),u_={};hR(u_,{EndpointError:()=>Ve,customEndpointFunctions:()=>Hu,isIpAddress:()=>p_,isValidHostLabel:()=>Ku,resolveEndpoint:()=>MR});w_.exports=gR(u_);var _R=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),p_=V(t=>_R.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress"),vR=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ku=V((t,e=!1)=>{if(!e)return vR.test(t);let r=t.split(".");for(let n of r)if(!Ku(n))return!1;return!0},"isValidHostLabel"),Hu={},$o="endpoints";function Zt(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Zt(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Zt).join(", ")})`:JSON.stringify(t,null,2)}V(Zt,"toDebugString");var m_=class extends Error{constructor(e){super(e),this.name="EndpointError"}};V(m_,"EndpointError");var Ve=m_,wR=V((t,e)=>t===e,"booleanEquals"),ER=V(t=>{let e=t.split("."),r=[];for(let n of e){let i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new Ve(`Path: '${t}' does not end with ']'`);let o=n.slice(i+1,-1);if(Number.isNaN(parseInt(o)))throw new Ve(`Invalid array index: '${o}' in path: '${t}'`);i!==0&&r.push(n.slice(0,i)),r.push(o)}else r.push(n)}return r},"getAttrPathList"),f_=V((t,e)=>ER(e).reduce((r,n)=>{if(typeof r!="object")throw new Ve(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),"getAttr"),NR=V(t=>t!=null,"isSet"),SR=V(t=>!t,"not"),Gu=z(),zu={[Gu.EndpointURLScheme.HTTP]:80,[Gu.EndpointURLScheme.HTTPS]:443},bR=V(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:f,protocol:y="",path:w="",query:_={}}=t,x=new URL(`${y}//${h}${f?`:${f}`:""}${w}`);return x.search=Object.entries(_).map(([T,Ne])=>`${T}=${Ne}`).join("&"),x}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:i,pathname:o,protocol:s,search:a}=e;if(a)return null;let d=s.slice(0,-1);if(!Object.values(Gu.EndpointURLScheme).includes(d))return null;let l=p_(i),u=r.includes(`${n}:${zu[d]}`)||typeof t=="string"&&t.includes(`${n}:${zu[d]}`),m=`${n}${u?`:${zu[d]}`:""}`;return{scheme:d,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},"parseURL"),xR=V((t,e)=>t===e,"stringEquals"),CR=V((t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring"),OR=V(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),PR={booleanEquals:wR,getAttr:f_,isSet:NR,isValidHostLabel:Ku,not:SR,parseURL:bR,stringEquals:xR,substring:CR,uriEncode:OR},h_=V((t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},i=0;for(;i<t.length;){let o=t.indexOf("{",i);if(o===-1){r.push(t.slice(i));break}r.push(t.slice(i,o));let s=t.indexOf("}",o);if(s===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[s+1]==="}"&&(r.push(t.slice(o+1,s)),i=s+2);let a=t.substring(o+1,s);if(a.includes("#")){let[d,l]=a.split("#");r.push(f_(n[d],l))}else r.push(n[a]);i=s+1}return r.join("")},"evaluateTemplate"),TR=V(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue"),rc=V((t,e,r)=>{if(typeof t=="string")return h_(t,r);if(t.fn)return y_(t,r);if(t.ref)return TR(t,r);throw new Ve(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression"),y_=V(({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:rc(o,"arg",r)),i=t.split(".");return i[0]in Hu&&i[1]!=null?Hu[i[0]][i[1]](...n):PR[t](...n)},"callFunction"),AR=V(({assign:t,...e},r)=>{var n,i;if(t&&t in r.referenceRecord)throw new Ve(`'${t}' is already defined in Reference Record.`);let o=y_(e,r);return(i=(n=r.logger)==null?void 0:n.debug)==null||i.call(n,$o,`evaluateCondition: ${Zt(e)} = ${Zt(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},"evaluateCondition"),Qu=V((t=[],e)=>{var r,n;let i={};for(let o of t){let{result:s,toAssign:a}=AR(o,{...e,referenceRecord:{...e.referenceRecord,...i}});if(!s)return{result:s};a&&(i[a.name]=a.value,(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,$o,`assign: ${a.name} := ${Zt(a.value)}`))}return{result:!0,referenceRecord:i}},"evaluateConditions"),RR=V((t,e)=>Object.entries(t).reduce((r,[n,i])=>({...r,[n]:i.map(o=>{let s=rc(o,"Header value entry",e);if(typeof s!="string")throw new Ve(`Header '${n}' value '${s}' is not a string`);return s})}),{}),"getEndpointHeaders"),g_=V((t,e)=>{if(Array.isArray(t))return t.map(r=>g_(r,e));switch(typeof t){case"string":return h_(t,e);case"object":if(t===null)throw new Ve(`Unexpected endpoint property: ${t}`);return __(t,e);case"boolean":return t;default:throw new Ve(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty"),__=V((t,e)=>Object.entries(t).reduce((r,[n,i])=>({...r,[n]:g_(i,e)}),{}),"getEndpointProperties"),IR=V((t,e)=>{let r=rc(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Ve(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),kR=V((t,e)=>{var r,n;let{conditions:i,endpoint:o}=t,{result:s,referenceRecord:a}=Qu(i,e);if(!s)return;let d={...e,referenceRecord:{...e.referenceRecord,...a}},{url:l,properties:u,headers:m}=o;return(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,$o,`Resolving endpoint from template: ${Zt(o)}`),{...m!=null&&{headers:RR(m,d)},...u!=null&&{properties:__(u,d)},url:IR(l,d)}},"evaluateEndpointRule"),qR=V((t,e)=>{let{conditions:r,error:n}=t,{result:i,referenceRecord:o}=Qu(r,e);if(i)throw new Ve(rc(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},"evaluateErrorRule"),DR=V((t,e)=>{let{conditions:r,rules:n}=t,{result:i,referenceRecord:o}=Qu(r,e);if(i)return v_(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},"evaluateTreeRule"),v_=V((t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=kR(r,e);if(n)return n}else if(r.type==="error")qR(r,e);else if(r.type==="tree"){let n=DR(r,e);if(n)return n}else throw new Ve(`Unknown endpoint rule: ${r}`);throw new Ve("Rules evaluation failed")},"evaluateRules"),MR=V((t,e)=>{var r,n,i,o,s;let{endpointParams:a,logger:d}=e,{parameters:l,rules:u}=t;(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${$o} Initial EndpointParams: ${Zt(a)}`);let m=Object.entries(l).filter(([,y])=>y.default!=null).map(([y,w])=>[y,w.default]);if(m.length>0)for(let[y,w]of m)a[y]=a[y]??w;let h=Object.entries(l).filter(([,y])=>y.required).map(([y])=>y);for(let y of h)if(a[y]==null)throw new Ve(`Missing required parameter: '${y}'`);let f=v_(u,{endpointParams:a,logger:d,referenceRecord:{}});if((i=e.endpointParams)!=null&&i.Endpoint)try{let y=new URL(e.endpointParams.Endpoint),{protocol:w,port:_}=y;f.url.protocol=w,f.url.port=_}catch{}return(s=(o=e.logger)==null?void 0:o.debug)==null||s.call(o,`${$o} Resolved endpoint: ${Zt(f)}`),f},"resolveEndpoint")});var Ju=p(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.isIpAddress=void 0;var FR=Rt();Object.defineProperty(nc,"isIpAddress",{enumerable:!0,get:function(){return FR.isIpAddress}})});var E_=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.isVirtualHostableS3Bucket=void 0;var LR=Rt(),WR=Ju(),UR=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!(0,Vo.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,LR.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,WR.isIpAddress)(t))};Vo.isVirtualHostableS3Bucket=UR});var N_=p(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.parseArn=void 0;var jR=t=>{let e=t.split(":");if(e.length<6)return null;let[r,n,i,o,s,...a]=e;return r!=="arn"||n===""||i===""||a[0]===""?null:{partition:n,service:i,region:o,accountId:s,resourceId:a[0].includes("/")?a[0].split("/"):a}};ic.parseArn=jR});var S_=p((xte,$R)=>{$R.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"}});var Yu=p(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.getUserAgentPrefix=yt.useDefaultPartitionInfo=yt.setPartitionInfo=yt.partition=void 0;var VR=(W(),F(L)),b_=VR.__importDefault(S_()),x_=b_.default,C_="",BR=t=>{let{partitions:e}=x_;for(let n of e){let{regions:i,outputs:o}=n;for(let[s,a]of Object.entries(i))if(s===t)return{...o,...a}}for(let n of e){let{regionRegex:i,outputs:o}=n;if(new RegExp(i).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};yt.partition=BR;var zR=(t,e="")=>{x_=t,C_=e};yt.setPartitionInfo=zR;var HR=()=>{(0,yt.setPartitionInfo)(b_.default,"")};yt.useDefaultPartitionInfo=HR;var GR=()=>C_;yt.getUserAgentPrefix=GR});var P_=p(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});var KR=Rt(),QR=E_(),JR=N_(),YR=Yu(),XR={isVirtualHostableS3Bucket:QR.isVirtualHostableS3Bucket,parseArn:JR.parseArn,partition:YR.partition};KR.customEndpointFunctions.aws=XR});var T_=p(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.resolveEndpoint=void 0;var ZR=Rt();Object.defineProperty(oc,"resolveEndpoint",{enumerable:!0,get:function(){return ZR.resolveEndpoint}})});var A_=p(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.EndpointError=void 0;var eI=Rt();Object.defineProperty(sc,"EndpointError",{enumerable:!0,get:function(){return eI.EndpointError}})});var I_=p(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0})});var q_=p(k_=>{"use strict";Object.defineProperty(k_,"__esModule",{value:!0})});var M_=p(D_=>{"use strict";Object.defineProperty(D_,"__esModule",{value:!0})});var L_=p(F_=>{"use strict";Object.defineProperty(F_,"__esModule",{value:!0})});var U_=p(W_=>{"use strict";Object.defineProperty(W_,"__esModule",{value:!0})});var j_=p(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var Hn=(W(),F(L));Hn.__exportStar(A_(),br);Hn.__exportStar(I_(),br);Hn.__exportStar(q_(),br);Hn.__exportStar(M_(),br);Hn.__exportStar(L_(),br);Hn.__exportStar(U_(),br)});var zo=p(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var Bo=(W(),F(L));Bo.__exportStar(P_(),on);Bo.__exportStar(Yu(),on);Bo.__exportStar(Ju(),on);Bo.__exportStar(T_(),on);Bo.__exportStar(j_(),on)});var $_=p(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.UA_ESCAPE_CHAR=Re.UA_VALUE_ESCAPE_REGEX=Re.UA_NAME_ESCAPE_REGEX=Re.UA_NAME_SEPARATOR=Re.SPACE=Re.X_AMZ_USER_AGENT=Re.USER_AGENT=void 0;Re.USER_AGENT="user-agent";Re.X_AMZ_USER_AGENT="x-amz-user-agent";Re.SPACE=" ";Re.UA_NAME_SEPARATOR="/";Re.UA_NAME_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;Re.UA_VALUE_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;Re.UA_ESCAPE_CHAR="-"});var V_=p(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.getUserAgentPlugin=It.getUserAgentMiddlewareOptions=It.userAgentMiddleware=void 0;var tI=zo(),rI=Ae(),Be=$_(),nI=t=>(e,r)=>async n=>{var i,o;let{request:s}=n;if(!rI.HttpRequest.isInstance(s))return e(n);let{headers:a}=s,d=((i=r?.userAgent)===null||i===void 0?void 0:i.map(Xu))||[],l=(await t.defaultUserAgentProvider()).map(Xu),u=((o=t?.customUserAgent)===null||o===void 0?void 0:o.map(Xu))||[],m=(0,tI.getUserAgentPrefix)(),h=(m?[m]:[]).concat([...l,...d,...u]).join(Be.SPACE),f=[...l.filter(y=>y.startsWith("aws-sdk-")),...u].join(Be.SPACE);return t.runtime!=="browser"?(f&&(a[Be.X_AMZ_USER_AGENT]=a[Be.X_AMZ_USER_AGENT]?`${a[Be.USER_AGENT]} ${f}`:f),a[Be.USER_AGENT]=h):a[Be.X_AMZ_USER_AGENT]=h,e({...n,request:s})};It.userAgentMiddleware=nI;var Xu=t=>{var e;let r=t[0].split(Be.UA_NAME_SEPARATOR).map(a=>a.replace(Be.UA_NAME_ESCAPE_REGEX,Be.UA_ESCAPE_CHAR)).join(Be.UA_NAME_SEPARATOR),n=(e=t[1])===null||e===void 0?void 0:e.replace(Be.UA_VALUE_ESCAPE_REGEX,Be.UA_ESCAPE_CHAR),i=r.indexOf(Be.UA_NAME_SEPARATOR),o=r.substring(0,i),s=r.substring(i+1);return o==="api"&&(s=s.toLowerCase()),[o,s,n].filter(a=>a&&a.length>0).reduce((a,d,l)=>{switch(l){case 0:return d;case 1:return`${a}/${d}`;default:return`${a}#${d}`}},"")};It.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var iI=t=>({applyToStack:e=>{e.add((0,It.userAgentMiddleware)(t),It.getUserAgentMiddlewareOptions)}});It.getUserAgentPlugin=iI});var Ho=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var B_=(W(),F(L));B_.__exportStar(l_(),ac);B_.__exportStar(V_(),ac)});var Q_=p((Ute,K_)=>{var cc=Object.defineProperty,oI=Object.getOwnPropertyDescriptor,sI=Object.getOwnPropertyNames,aI=Object.prototype.hasOwnProperty,z_=(t,e)=>cc(t,"name",{value:e,configurable:!0}),cI=(t,e)=>{for(var r in e)cc(t,r,{get:e[r],enumerable:!0})},dI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sI(e))!aI.call(t,i)&&i!==r&&cc(t,i,{get:()=>e[i],enumerable:!(n=oI(e,i))||n.enumerable});return t},lI=t=>dI(cc({},"__esModule",{value:!0}),t),H_={};cI(H_,{SelectorType:()=>G_,booleanSelector:()=>uI,numberSelector:()=>pI});K_.exports=lI(H_);var uI=z_((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector"),pI=z_((t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n},"numberSelector"),G_=(t=>(t.ENV="env",t.CONFIG="shared config entry",t))(G_||{})});var kt=p((jte,sv)=>{var lc=Object.defineProperty,mI=Object.getOwnPropertyDescriptor,fI=Object.getOwnPropertyNames,hI=Object.prototype.hasOwnProperty,gt=(t,e)=>lc(t,"name",{value:e,configurable:!0}),yI=(t,e)=>{for(var r in e)lc(t,r,{get:e[r],enumerable:!0})},gI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fI(e))!hI.call(t,i)&&i!==r&&lc(t,i,{get:()=>e[i],enumerable:!(n=mI(e,i))||n.enumerable});return t},_I=t=>gI(lc({},"__esModule",{value:!0}),t),X_={};yI(X_,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>ev,CONFIG_USE_FIPS_ENDPOINT:()=>rv,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>vI,DEFAULT_USE_FIPS_ENDPOINT:()=>EI,ENV_USE_DUALSTACK_ENDPOINT:()=>Z_,ENV_USE_FIPS_ENDPOINT:()=>tv,NODE_REGION_CONFIG_FILE_OPTIONS:()=>OI,NODE_REGION_CONFIG_OPTIONS:()=>CI,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>wI,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>NI,REGION_ENV_NAME:()=>nv,REGION_INI_NAME:()=>iv,getRegionInfo:()=>II,resolveCustomEndpointsConfig:()=>SI,resolveEndpointsConfig:()=>xI,resolveRegionConfig:()=>PI});sv.exports=_I(X_);var xr=Q_(),Z_="AWS_USE_DUALSTACK_ENDPOINT",ev="use_dualstack_endpoint",vI=!1,wI={environmentVariableSelector:t=>(0,xr.booleanSelector)(t,Z_,xr.SelectorType.ENV),configFileSelector:t=>(0,xr.booleanSelector)(t,ev,xr.SelectorType.CONFIG),default:!1},tv="AWS_USE_FIPS_ENDPOINT",rv="use_fips_endpoint",EI=!1,NI={environmentVariableSelector:t=>(0,xr.booleanSelector)(t,tv,xr.SelectorType.ENV),configFileSelector:t=>(0,xr.booleanSelector)(t,rv,xr.SelectorType.CONFIG),default:!1},dc=jn(),SI=gt(t=>{let{endpoint:e,urlParser:r}=t;return{...t,tls:t.tls??!0,endpoint:(0,dc.normalizeProvider)(typeof e=="string"?r(e):e),isCustomEndpoint:!0,useDualstackEndpoint:(0,dc.normalizeProvider)(t.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),bI=gt(async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let i=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:s}=await t.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})??{};if(!s)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${s}`)},"getEndpointFromRegion"),xI=gt(t=>{let e=(0,dc.normalizeProvider)(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:i}=t;return{...t,tls:t.tls??!0,endpoint:r?(0,dc.normalizeProvider)(typeof r=="string"?i(r):r):()=>bI({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e}},"resolveEndpointsConfig"),nv="AWS_REGION",iv="region",CI={environmentVariableSelector:t=>t[nv],configFileSelector:t=>t[iv],default:()=>{throw new Error("Region is missing")}},OI={preferredFile:"credentials"},ov=gt(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion"),J_=gt(t=>ov(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion"),PI=gt(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return J_(e);let n=await e();return J_(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return ov(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig"),Y_=gt((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var n;return(n=t.find(({tags:i})=>e===i.includes("fips")&&r===i.includes("dualstack")))==null?void 0:n.hostname},"getHostnameFromVariants"),TI=gt((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname"),AI=gt((t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws","getResolvedPartition"),RI=gt((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let i=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(i);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion"),II=gt((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:i,partitionHash:o})=>{var s,a,d,l,u;let m=AI(t,{partitionHash:o}),h=t in i?t:((s=o[m])==null?void 0:s.endpoint)??t,f={useFipsEndpoint:e,useDualstackEndpoint:r},y=Y_((a=i[h])==null?void 0:a.variants,f),w=Y_((d=o[m])==null?void 0:d.variants,f),_=TI(h,{regionHostname:y,partitionHostname:w});if(_===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:h,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let x=RI(_,{signingRegion:(l=i[h])==null?void 0:l.signingRegion,regionRegex:o[m].regionRegex,useFipsEndpoint:e});return{partition:m,signingService:n,hostname:_,...x&&{signingRegion:x},...((u=i[h])==null?void 0:u.signingService)&&{signingService:i[h].signingService}}},"getRegionInfo")});var Go=p(($te,uv)=>{var uc=Object.defineProperty,kI=Object.getOwnPropertyDescriptor,qI=Object.getOwnPropertyNames,DI=Object.prototype.hasOwnProperty,cv=(t,e)=>uc(t,"name",{value:e,configurable:!0}),MI=(t,e)=>{for(var r in e)uc(t,r,{get:e[r],enumerable:!0})},FI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qI(e))!DI.call(t,i)&&i!==r&&uc(t,i,{get:()=>e[i],enumerable:!(n=kI(e,i))||n.enumerable});return t},LI=t=>FI(uc({},"__esModule",{value:!0}),t),dv={};MI(dv,{contentLengthMiddleware:()=>Zu,contentLengthMiddlewareOptions:()=>lv,getContentLengthPlugin:()=>UI});uv.exports=LI(dv);var WI=Ae(),av="content-length";function Zu(t){return e=>async r=>{let n=r.request;if(WI.HttpRequest.isInstance(n)){let{body:i,headers:o}=n;if(i&&Object.keys(o).map(s=>s.toLowerCase()).indexOf(av)===-1)try{let s=t(i);n.headers={...n.headers,[av]:String(s)}}catch{}}return e({...r,request:n})}}cv(Zu,"contentLengthMiddleware");var lv={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},UI=cv(t=>({applyToStack:e=>{e.add(Zu(t.bodyLengthChecker),lv)}}),"getContentLengthPlugin")});var Ko=p(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.getHomeDir=void 0;var jI=$("os"),$I=$("path"),ep={},VI=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",BI=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${$I.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let i=VI();return ep[i]||(ep[i]=(0,jI.homedir)()),ep[i]};pc.getHomeDir=BI});var tp=p(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.getSSOTokenFilepath=void 0;var zI=$("crypto"),HI=$("path"),GI=Ko(),KI=t=>{let r=(0,zI.createHash)("sha1").update(t).digest("hex");return(0,HI.join)((0,GI.getHomeDir)(),".aws","sso","cache",`${r}.json`)};mc.getSSOTokenFilepath=KI});var pv=p(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.getSSOTokenFromFile=void 0;var QI=$("fs"),JI=tp(),{readFile:YI}=QI.promises,XI=async t=>{let e=(0,JI.getSSOTokenFilepath)(t),r=await YI(e,"utf8");return JSON.parse(r)};fc.getSSOTokenFromFile=XI});var np=p(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.slurpFile=void 0;var ZI=$("fs"),{readFile:ek}=ZI.promises,rp={},tk=(t,e)=>((!rp[t]||e?.ignoreCache)&&(rp[t]=ek(t,"utf8")),rp[t]);hc.slurpFile=tk});var _t=p((Gte,Jo)=>{var gc=Object.defineProperty,rk=Object.getOwnPropertyDescriptor,nk=Object.getOwnPropertyNames,ik=Object.prototype.hasOwnProperty,ot=(t,e)=>gc(t,"name",{value:e,configurable:!0}),ok=(t,e)=>{for(var r in e)gc(t,r,{get:e[r],enumerable:!0})},ip=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nk(e))!ik.call(t,i)&&i!==r&&gc(t,i,{get:()=>e[i],enumerable:!(n=rk(e,i))||n.enumerable});return t},sp=(t,e,r)=>(ip(t,e,"default"),r&&ip(r,e,"default")),sk=t=>ip(gc({},"__esModule",{value:!0}),t),Qo={};ok(Qo,{CONFIG_PREFIX_SEPARATOR:()=>sn,DEFAULT_PROFILE:()=>yv,ENV_PROFILE:()=>hv,getProfileName:()=>ak,loadSharedConfigFiles:()=>vv,loadSsoSessionData:()=>vk,parseKnownFiles:()=>Ek});Jo.exports=sk(Qo);sp(Qo,Ko(),Jo.exports);var hv="AWS_PROFILE",yv="default",ak=ot(t=>t.profile||process.env[hv]||yv,"getProfileName");sp(Qo,tp(),Jo.exports);sp(Qo,pv(),Jo.exports);var yc=z(),ck=ot(t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(sn);return r===-1?!1:Object.values(yc.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let i=r.indexOf(sn),o=r.substring(0,i)===yc.IniSectionType.PROFILE?r.substring(i+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),"getConfigData"),gv=$("path"),dk=Ko(),lk="AWS_CONFIG_FILE",_v=ot(()=>process.env[lk]||(0,gv.join)((0,dk.getHomeDir)(),".aws","config"),"getConfigFilepath"),uk=Ko(),pk="AWS_SHARED_CREDENTIALS_FILE",mk=ot(()=>process.env[pk]||(0,gv.join)((0,uk.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),fk=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,hk=["__proto__","profile __proto__"],op=ot(t=>{let e={},r,n;for(let i of t.split(/\r?\n/)){let o=i.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),d=fk.exec(a);if(d){let[,l,,u]=d;Object.values(yc.IniSectionType).includes(l)&&(r=[l,u].join(sn))}else r=a;if(hk.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[d,l]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(l==="")n=d;else{n&&i.trimStart()===i&&(n=void 0),e[r]=e[r]||{};let u=n?[n,d].join(sn):d;e[r][u]=l}}}}return e},"parseIni"),mv=np(),fv=ot(()=>({}),"swallowError"),sn=".",vv=ot(async(t={})=>{let{filepath:e=mk(),configFilepath:r=_v()}=t,n=await Promise.all([(0,mv.slurpFile)(r,{ignoreCache:t.ignoreCache}).then(op).then(ck).catch(fv),(0,mv.slurpFile)(e,{ignoreCache:t.ignoreCache}).then(op).catch(fv)]);return{configFile:n[0],credentialsFile:n[1]}},"loadSharedConfigFiles"),yk=ot(t=>Object.entries(t).filter(([e])=>e.startsWith(yc.IniSectionType.SSO_SESSION+sn)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(sn)+1)]:n}),{}),"getSsoSessionData"),gk=np(),_k=ot(()=>({}),"swallowError"),vk=ot(async(t={})=>(0,gk.slurpFile)(t.configFilepath??_v()).then(op).then(yk).catch(_k),"loadSsoSessionData"),wk=ot((...t)=>{let e={};for(let r of t)for(let[n,i]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],i):e[n]=i;return e},"mergeConfigFiles"),Ek=ot(async t=>{let e=await vv(t);return wk(e.configFile,e.credentialsFile)},"parseKnownFiles")});var er=p((Kte,Nv)=>{var _c=Object.defineProperty,Nk=Object.getOwnPropertyDescriptor,Sk=Object.getOwnPropertyNames,bk=Object.prototype.hasOwnProperty,Xo=(t,e)=>_c(t,"name",{value:e,configurable:!0}),xk=(t,e)=>{for(var r in e)_c(t,r,{get:e[r],enumerable:!0})},Ck=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Sk(e))!bk.call(t,i)&&i!==r&&_c(t,i,{get:()=>e[i],enumerable:!(n=Nk(e,i))||n.enumerable});return t},Ok=t=>Ck(_c({},"__esModule",{value:!0}),t),Ev={};xk(Ev,{loadConfig:()=>Ik});Nv.exports=Ok(Ev);var Yo=ae(),Pk=Xo(t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new Yo.CredentialsProviderError(e.message||`Cannot load config from environment variables with getter: ${t}`)}},"fromEnv"),wv=_t(),Tk=Xo((t,{preferredFile:e="config",...r}={})=>async()=>{let n=(0,wv.getProfileName)(r),{configFile:i,credentialsFile:o}=await(0,wv.loadSharedConfigFiles)(r),s=o[n]||{},a=i[n]||{},d=e==="config"?{...s,...a}:{...a,...s};try{let u=t(d,e==="config"?i:o);if(u===void 0)throw new Error;return u}catch(l){throw new Yo.CredentialsProviderError(l.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${t}`)}},"fromSharedConfigFiles"),Ak=Xo(t=>typeof t=="function","isFunction"),Rk=Xo(t=>Ak(t)?async()=>await t():(0,Yo.fromStatic)(t),"fromStatic"),Ik=Xo(({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>(0,Yo.memoize)((0,Yo.chain)(Pk(t),Tk(e,n),Rk(r))),"loadConfig")});var Cv=p(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.getEndpointUrlConfig=void 0;var Sv=_t(),bv="AWS_ENDPOINT_URL",xv="endpoint_url",kk=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[bv,...r].join("_")];if(n)return n;let i=e[bv];if(i)return i},configFileSelector:(e,r)=>{if(r&&e.services){let i=r[["services",e.services].join(Sv.CONFIG_PREFIX_SEPARATOR)];if(i){let o=t.split(" ").map(a=>a.toLowerCase()),s=i[[o.join("_"),xv].join(Sv.CONFIG_PREFIX_SEPARATOR)];if(s)return s}}let n=e[xv];if(n)return n},default:void 0});vc.getEndpointUrlConfig=kk});var Ov=p(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.getEndpointFromConfig=void 0;var qk=er(),Dk=Cv(),Mk=async t=>(0,qk.loadConfig)((0,Dk.getEndpointUrlConfig)(t))();wc.getEndpointFromConfig=Mk});var Rv=p((Yte,Av)=>{var Ec=Object.defineProperty,Fk=Object.getOwnPropertyDescriptor,Lk=Object.getOwnPropertyNames,Wk=Object.prototype.hasOwnProperty,Uk=(t,e)=>Ec(t,"name",{value:e,configurable:!0}),jk=(t,e)=>{for(var r in e)Ec(t,r,{get:e[r],enumerable:!0})},$k=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Lk(e))!Wk.call(t,i)&&i!==r&&Ec(t,i,{get:()=>e[i],enumerable:!(n=Fk(e,i))||n.enumerable});return t},Vk=t=>$k(Ec({},"__esModule",{value:!0}),t),Pv={};jk(Pv,{parseQueryString:()=>Tv});Av.exports=Vk(Pv);function Tv(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in e?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i}return e}Uk(Tv,"parseQueryString")});var an=p((Xte,qv)=>{var Nc=Object.defineProperty,Bk=Object.getOwnPropertyDescriptor,zk=Object.getOwnPropertyNames,Hk=Object.prototype.hasOwnProperty,Gk=(t,e)=>Nc(t,"name",{value:e,configurable:!0}),Kk=(t,e)=>{for(var r in e)Nc(t,r,{get:e[r],enumerable:!0})},Qk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zk(e))!Hk.call(t,i)&&i!==r&&Nc(t,i,{get:()=>e[i],enumerable:!(n=Bk(e,i))||n.enumerable});return t},Jk=t=>Qk(Nc({},"__esModule",{value:!0}),t),Iv={};Kk(Iv,{parseUrl:()=>kv});qv.exports=Jk(Iv);var Yk=Rv(),kv=Gk(t=>{if(typeof t=="string")return kv(new URL(t));let{hostname:e,pathname:r,port:n,protocol:i,search:o}=t,s;return o&&(s=(0,Yk.parseQueryString)(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:i,path:r,query:s}},"parseUrl")});var re=p((Zte,jv)=>{var Sc=Object.defineProperty,Xk=Object.getOwnPropertyDescriptor,Zk=Object.getOwnPropertyNames,eq=Object.prototype.hasOwnProperty,ap=(t,e)=>Sc(t,"name",{value:e,configurable:!0}),tq=(t,e)=>{for(var r in e)Sc(t,r,{get:e[r],enumerable:!0})},rq=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zk(e))!eq.call(t,i)&&i!==r&&Sc(t,i,{get:()=>e[i],enumerable:!(n=Xk(e,i))||n.enumerable});return t},nq=t=>rq(Sc({},"__esModule",{value:!0}),t),Dv={};tq(Dv,{deserializerMiddleware:()=>Mv,deserializerMiddlewareOption:()=>Lv,getSerdePlugin:()=>Uv,serializerMiddleware:()=>Fv,serializerMiddlewareOption:()=>Wv});jv.exports=nq(Dv);var Mv=ap((t,e)=>(r,n)=>async i=>{let{response:o}=await r(i);try{let s=await e(o,t);return{response:o,output:s}}catch(s){if(Object.defineProperty(s,"$response",{value:o}),!("$metadata"in s)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";s.message+=`
  `+a,typeof s.$responseBodyText<"u"&&s.$response&&(s.$response.body=s.$responseBodyText)}throw s}},"deserializerMiddleware"),Fv=ap((t,e)=>(r,n)=>async i=>{var o;let s=(o=n.endpointV2)!=null&&o.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await e(i.input,{...t,endpoint:s});return r({...i,request:a})},"serializerMiddleware"),Lv={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Wv={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Uv(t,e,r){return{applyToStack:n=>{n.add(Mv(t,r),Lv),n.add(Fv(t,e),Wv)}}}ap(Uv,"getSerdePlugin")});var H=p((ere,Kv)=>{var xc=Object.defineProperty,iq=Object.getOwnPropertyDescriptor,oq=Object.getOwnPropertyNames,sq=Object.prototype.hasOwnProperty,vt=(t,e)=>xc(t,"name",{value:e,configurable:!0}),aq=(t,e)=>{for(var r in e)xc(t,r,{get:e[r],enumerable:!0})},cq=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of oq(e))!sq.call(t,i)&&i!==r&&xc(t,i,{get:()=>e[i],enumerable:!(n=iq(e,i))||n.enumerable});return t},dq=t=>cq(xc({},"__esModule",{value:!0}),t),Vv={};aq(Vv,{endpointMiddleware:()=>Hv,endpointMiddlewareOptions:()=>Gv,getEndpointFromInstructions:()=>Bv,getEndpointPlugin:()=>vq,resolveEndpointConfig:()=>wq,resolveParams:()=>zv,toEndpointV1:()=>cp});Kv.exports=dq(Vv);var lq=vt(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),hq(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!fq(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3"),uq=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,pq=/(\d+\.){3}\d+/,mq=/\.\./,fq=vt(t=>uq.test(t)&&!pq.test(t)&&!mq.test(t),"isDnsCompatibleBucketName"),hq=vt(t=>{let[e,r,n,,,i]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,s=!!(o&&r&&n&&i);if(o&&!s)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return s},"isArnBucketName"),yq=vt((t,e,r)=>{let n=vt(async()=>{let i=r[t]??r[e];return typeof i=="function"?i():i},"configProvider");return t==="credentialScope"||e==="CredentialScope"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="endpoint"||e==="endpoint"?async()=>{let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:o,hostname:s,port:a,path:d}=i;return`${o}//${s}${a?":"+a:""}${d}`}}return i}:n},"createConfigValueProvider"),gq=Ov(),$v=an(),cp=vt(t=>typeof t=="object"?"url"in t?(0,$v.parseUrl)(t.url):t:(0,$v.parseUrl)(t),"toEndpointV1"),Bv=vt(async(t,e,r,n)=>{if(!r.endpoint){let s=await(0,gq.getEndpointFromConfig)(r.serviceId||"");s&&(r.endpoint=()=>Promise.resolve(cp(s)))}let i=await zv(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},"getEndpointFromInstructions"),zv=vt(async(t,e,r)=>{var n;let i={},o=((n=e?.getEndpointParameterInstructions)==null?void 0:n.call(e))||{};for(let[s,a]of Object.entries(o))switch(a.type){case"staticContextParams":i[s]=a.value;break;case"contextParams":i[s]=t[a.name];break;case"clientContextParams":case"builtInParams":i[s]=await yq(a.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(i,r),String(r.serviceId).toLowerCase()==="s3"&&await lq(i),i},"resolveParams"),bc=jn(),Hv=vt(({config:t,instructions:e})=>(r,n)=>async i=>{var o,s,a;let d=await Bv(i.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=d,n.authSchemes=(o=d.properties)==null?void 0:o.authSchemes;let l=(s=n.authSchemes)==null?void 0:s[0];if(l){n.signing_region=l.signingRegion,n.signing_service=l.signingName;let u=(0,bc.getSmithyContext)(n),m=(a=u?.selectedHttpAuthScheme)==null?void 0:a.httpAuthOption;m&&(m.signingProperties=Object.assign(m.signingProperties||{},{signing_region:l.signingRegion,signingRegion:l.signingRegion,signing_service:l.signingName,signingName:l.signingName,signingRegionSet:l.signingRegionSet},l.properties))}return r({...i})},"endpointMiddleware"),_q=re(),Gv={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:_q.serializerMiddlewareOption.name},vq=vt((t,e)=>({applyToStack:r=>{r.addRelativeTo(Hv({config:t,instructions:e}),Gv)}}),"getEndpointPlugin"),wq=vt(t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>cp(await(0,bc.normalizeProvider)(r)()):void 0;return{...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:(0,bc.normalizeProvider)(t.useDualstackEndpoint??!1),useFipsEndpoint:(0,bc.normalizeProvider)(t.useFipsEndpoint??!1)}},"resolveEndpointConfig")});import Eq from"crypto";function Zo(){return Cc>Oc.length-16&&(Eq.randomFillSync(Oc),Cc=0),Oc.slice(Cc,Cc+=16)}var Oc,Cc,dp=Se(()=>{Oc=new Uint8Array(256),Cc=Oc.length});var Qv,Jv=Se(()=>{Qv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Nq(t){return typeof t=="string"&&Qv.test(t)}var Cr,es=Se(()=>{Jv();Cr=Nq});function cn(t,e=0){return xe[t[e+0]]+xe[t[e+1]]+xe[t[e+2]]+xe[t[e+3]]+"-"+xe[t[e+4]]+xe[t[e+5]]+"-"+xe[t[e+6]]+xe[t[e+7]]+"-"+xe[t[e+8]]+xe[t[e+9]]+"-"+xe[t[e+10]]+xe[t[e+11]]+xe[t[e+12]]+xe[t[e+13]]+xe[t[e+14]]+xe[t[e+15]]}function Sq(t,e=0){let r=cn(t,e);if(!Cr(r))throw TypeError("Stringified UUID is invalid");return r}var xe,Yv,ts=Se(()=>{es();xe=[];for(let t=0;t<256;++t)xe.push((t+256).toString(16).slice(1));Yv=Sq});function bq(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||Xv,s=t.clockseq!==void 0?t.clockseq:lp;if(o==null||s==null){let h=t.random||(t.rng||Zo)();o==null&&(o=Xv=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),s==null&&(s=lp=(h[6]<<8|h[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),d=t.nsecs!==void 0?t.nsecs:pp+1,l=a-up+(d-pp)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>up)&&t.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");up=a,pp=d,lp=s,a+=122192928e5;let u=((a&268435455)*1e4+d)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let m=a/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let h=0;h<6;++h)i[n+h]=o[h];return e||cn(i)}var Xv,lp,up,pp,Zv,ew=Se(()=>{dp();ts();up=0,pp=0;Zv=bq});function xq(t){if(!Cr(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Pc,mp=Se(()=>{es();Pc=xq});function Cq(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function rs(t,e,r){function n(i,o,s,a){var d;if(typeof i=="string"&&(i=Cq(i)),typeof o=="string"&&(o=Pc(o)),((d=o)===null||d===void 0?void 0:d.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=l[u];return s}return cn(l)}try{n.name=t}catch{}return n.DNS=Oq,n.URL=Pq,n}var Oq,Pq,fp=Se(()=>{ts();mp();Oq="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Pq="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import Tq from"crypto";function Aq(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Tq.createHash("md5").update(t).digest()}var tw,rw=Se(()=>{tw=Aq});var Rq,nw,iw=Se(()=>{fp();rw();Rq=rs("v3",48,tw),nw=Rq});import Iq from"crypto";var hp,ow=Se(()=>{hp={randomUUID:Iq.randomUUID}});function kq(t,e,r){if(hp.randomUUID&&!e&&!t)return hp.randomUUID();t=t||{};let n=t.random||(t.rng||Zo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return cn(n)}var sw,aw=Se(()=>{ow();dp();ts();sw=kq});import qq from"crypto";function Dq(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),qq.createHash("sha1").update(t).digest()}var cw,dw=Se(()=>{cw=Dq});var Mq,lw,uw=Se(()=>{fp();dw();Mq=rs("v5",80,cw),lw=Mq});var pw,mw=Se(()=>{pw="00000000-0000-0000-0000-000000000000"});function Fq(t){if(!Cr(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var fw,hw=Se(()=>{es();fw=Fq});var yw={};fh(yw,{NIL:()=>pw,parse:()=>Pc,stringify:()=>Yv,v1:()=>Zv,v3:()=>nw,v4:()=>sw,v5:()=>lw,validate:()=>Cr,version:()=>fw});var gw=Se(()=>{ew();iw();aw();uw();mw();hw();es();ts();mp()});var yp=p((Bre,Ew)=>{var Tc=Object.defineProperty,Lq=Object.getOwnPropertyDescriptor,Wq=Object.getOwnPropertyNames,Uq=Object.prototype.hasOwnProperty,Gn=(t,e)=>Tc(t,"name",{value:e,configurable:!0}),jq=(t,e)=>{for(var r in e)Tc(t,r,{get:e[r],enumerable:!0})},$q=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Wq(e))!Uq.call(t,i)&&i!==r&&Tc(t,i,{get:()=>e[i],enumerable:!(n=Lq(e,i))||n.enumerable});return t},Vq=t=>$q(Tc({},"__esModule",{value:!0}),t),_w={};jq(_w,{isClockSkewCorrectedError:()=>vw,isClockSkewError:()=>Jq,isRetryableByTrait:()=>Qq,isServerError:()=>Xq,isThrottlingError:()=>Yq,isTransientError:()=>ww});Ew.exports=Vq(_w);var Bq=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],zq=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Hq=["TimeoutError","RequestTimeout","RequestTimeoutException"],Gq=[500,502,503,504],Kq=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Qq=Gn(t=>t.$retryable!==void 0,"isRetryableByTrait"),Jq=Gn(t=>Bq.includes(t.name),"isClockSkewError"),vw=Gn(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),Yq=Gn(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||zq.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),ww=Gn(t=>{var e;return vw(t)||Hq.includes(t.name)||Kq.includes(t?.code||"")||Gq.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},"isTransientError"),Xq=Gn(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!ww(t)}return!1},"isServerError")});var Kn=p((Qre,qw)=>{var Ac=Object.defineProperty,Zq=Object.getOwnPropertyDescriptor,eD=Object.getOwnPropertyNames,tD=Object.prototype.hasOwnProperty,wt=(t,e)=>Ac(t,"name",{value:e,configurable:!0}),rD=(t,e)=>{for(var r in e)Ac(t,r,{get:e[r],enumerable:!0})},nD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of eD(e))!tD.call(t,i)&&i!==r&&Ac(t,i,{get:()=>e[i],enumerable:!(n=Zq(e,i))||n.enumerable});return t},iD=t=>nD(Ac({},"__esModule",{value:!0}),t),Sw={};rD(Sw,{AdaptiveRetryStrategy:()=>lD,ConfiguredRetryStrategy:()=>uD,DEFAULT_MAX_ATTEMPTS:()=>gp,DEFAULT_RETRY_DELAY_BASE:()=>ns,DEFAULT_RETRY_MODE:()=>oD,DefaultRateLimiter:()=>Cw,INITIAL_RETRY_TOKENS:()=>_p,INVOCATION_ID_HEADER:()=>aD,MAXIMUM_RETRY_DELAY:()=>vp,NO_RETRY_INCREMENT:()=>Aw,REQUEST_HEADER:()=>cD,RETRY_COST:()=>Pw,RETRY_MODES:()=>bw,StandardRetryStrategy:()=>wp,THROTTLING_RETRY_DELAY_BASE:()=>Ow,TIMEOUT_RETRY_COST:()=>Tw});qw.exports=iD(Sw);var bw=(t=>(t.STANDARD="standard",t.ADAPTIVE="adaptive",t))(bw||{}),gp=3,oD="standard",sD=yp(),xw=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,sD.isThrottlingError)(e)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};wt(xw,"DefaultRateLimiter");var Cw=xw,ns=100,vp=20*1e3,Ow=500,_p=500,Pw=5,Tw=10,Aw=1,aD="amz-sdk-invocation-id",cD="amz-sdk-request",dD=wt(()=>{let t=ns;return{computeNextBackoffDelay:wt(n=>Math.floor(Math.min(vp,Math.random()*2**n*t)),"computeNextBackoffDelay"),setDelayBase:wt(n=>{t=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Nw=wt(({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:wt(()=>e,"getRetryCount"),getRetryDelay:wt(()=>Math.min(vp,t),"getRetryDelay"),getRetryCost:wt(()=>r,"getRetryCost")}),"createDefaultRetryToken"),Rw=class{constructor(e){this.maxAttempts=e,this.mode="standard",this.capacity=_p,this.retryBackoffStrategy=dD(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Nw({retryDelay:ns,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let i=r.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?Ow:ns);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(i);return this.capacity-=a,Nw({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(_p,this.capacity+(e.getRetryCost()??Aw))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${gp}`),gp}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Tw:Pw}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};wt(Rw,"StandardRetryStrategy");var wp=Rw,Iw=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode="adaptive";let{rateLimiter:n}=r??{};this.rateLimiter=n??new Cw,this.standardRetryStrategy=new wp(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};wt(Iw,"AdaptiveRetryStrategy");var lD=Iw,kw=class extends wp{constructor(e,r=ns){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};wt(kw,"ConfiguredRetryStrategy");var uD=kw});var Ww=p((Jre,Lw)=>{var Rc=Object.defineProperty,pD=Object.getOwnPropertyDescriptor,mD=Object.getOwnPropertyNames,fD=Object.prototype.hasOwnProperty,st=(t,e)=>Rc(t,"name",{value:e,configurable:!0}),hD=(t,e)=>{for(var r in e)Rc(t,r,{get:e[r],enumerable:!0})},yD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mD(e))!fD.call(t,i)&&i!==r&&Rc(t,i,{get:()=>e[i],enumerable:!(n=pD(e,i))||n.enumerable});return t},gD=t=>yD(Rc({},"__esModule",{value:!0}),t),Fw={};hD(Fw,{constructStack:()=>Ep});Lw.exports=gD(Fw);var dn=st((t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},"getAllAliases"),Or=st((t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Ep=st(()=>{let t=[],e=[],r=!1,n=new Set,i=st(m=>m.sort((h,f)=>Dw[f.step]-Dw[h.step]||Mw[f.priority||"normal"]-Mw[h.priority||"normal"]),"sort"),o=st(m=>{let h=!1,f=st(y=>{let w=dn(y.name,y.aliases);if(w.includes(m)){h=!0;for(let _ of w)n.delete(_);return!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),h},"removeByName"),s=st(m=>{let h=!1,f=st(y=>{if(y.middleware===m){h=!0;for(let w of dn(y.name,y.aliases))n.delete(w);return!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),h},"removeByReference"),a=st(m=>{var h;return t.forEach(f=>{m.add(f.middleware,{...f})}),e.forEach(f=>{m.addRelativeTo(f.middleware,{...f})}),(h=m.identifyOnResolve)==null||h.call(m,u.identifyOnResolve()),m},"cloneTo"),d=st(m=>{let h=[];return m.before.forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...d(f))}),h.push(m),m.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...d(f))}),h},"expandRelativeMiddlewareList"),l=st((m=!1)=>{let h=[],f=[],y={};return t.forEach(_=>{let x={..._,before:[],after:[]};for(let T of dn(x.name,x.aliases))y[T]=x;h.push(x)}),e.forEach(_=>{let x={..._,before:[],after:[]};for(let T of dn(x.name,x.aliases))y[T]=x;f.push(x)}),f.forEach(_=>{if(_.toMiddleware){let x=y[_.toMiddleware];if(x===void 0){if(m)return;throw new Error(`${_.toMiddleware} is not found when adding ${Or(_.name,_.aliases)} middleware ${_.relation} ${_.toMiddleware}`)}_.relation==="after"&&x.after.push(_),_.relation==="before"&&x.before.push(_)}}),i(h).map(d).reduce((_,x)=>(_.push(...x),_),[])},"getMiddlewareList"),u={add:(m,h={})=>{let{name:f,override:y,aliases:w}=h,_={step:"initialize",priority:"normal",middleware:m,...h},x=dn(f,w);if(x.length>0){if(x.some(T=>n.has(T))){if(!y)throw new Error(`Duplicate middleware name '${Or(f,w)}'`);for(let T of x){let Ne=t.findIndex(et=>{var ur;return et.name===T||((ur=et.aliases)==null?void 0:ur.some(Hr=>Hr===T))});if(Ne===-1)continue;let ce=t[Ne];if(ce.step!==_.step||_.priority!==ce.priority)throw new Error(`"${Or(ce.name,ce.aliases)}" middleware with ${ce.priority} priority in ${ce.step} step cannot be overridden by "${Or(f,w)}" middleware with ${_.priority} priority in ${_.step} step.`);t.splice(Ne,1)}}for(let T of x)n.add(T)}t.push(_)},addRelativeTo:(m,h)=>{let{name:f,override:y,aliases:w}=h,_={middleware:m,...h},x=dn(f,w);if(x.length>0){if(x.some(T=>n.has(T))){if(!y)throw new Error(`Duplicate middleware name '${Or(f,w)}'`);for(let T of x){let Ne=e.findIndex(et=>{var ur;return et.name===T||((ur=et.aliases)==null?void 0:ur.some(Hr=>Hr===T))});if(Ne===-1)continue;let ce=e[Ne];if(ce.toMiddleware!==_.toMiddleware||ce.relation!==_.relation)throw new Error(`"${Or(ce.name,ce.aliases)}" middleware ${ce.relation} "${ce.toMiddleware}" middleware cannot be overridden by "${Or(f,w)}" middleware ${_.relation} "${_.toMiddleware}" middleware.`);e.splice(Ne,1)}}for(let T of x)n.add(T)}e.push(_)},clone:()=>a(Ep()),use:m=>{m.applyToStack(u)},remove:m=>typeof m=="string"?o(m):s(m),removeByTag:m=>{let h=!1,f=st(y=>{let{tags:w,name:_,aliases:x}=y;if(w&&w.includes(m)){let T=dn(_,x);for(let Ne of T)n.delete(Ne);return h=!0,!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),h},concat:m=>{var h;let f=a(Ep());return f.use(m),f.identifyOnResolve(r||f.identifyOnResolve()||(((h=m.identifyOnResolve)==null?void 0:h.call(m))??!1)),f},applyToStack:a,identify:()=>l(!0).map(m=>{let h=m.step??m.relation+" "+m.toMiddleware;return Or(m.name,m.aliases)+" - "+h}),identifyOnResolve(m){return typeof m=="boolean"&&(r=m),r},resolve:(m,h)=>{for(let f of l().map(y=>y.middleware).reverse())m=f(m,h);return r&&console.log(u.identify()),m}};return u},"constructStack"),Dw={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Mw={high:3,normal:2,low:1}});var Uw=p(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.fromBase64=void 0;var _D=$n(),vD=/^[A-Za-z0-9+/]*={0,2}$/,wD=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!vD.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,_D.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};Ic.fromBase64=wD});var jw=p(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.toBase64=void 0;var ED=$n(),ND=it(),SD=t=>{let e;if(typeof t=="string"?e=(0,ND.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,ED.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};kc.toBase64=SD});var Qn=p((Zre,qc)=>{var $w=Object.defineProperty,bD=Object.getOwnPropertyDescriptor,xD=Object.getOwnPropertyNames,CD=Object.prototype.hasOwnProperty,Np=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xD(e))!CD.call(t,i)&&i!==r&&$w(t,i,{get:()=>e[i],enumerable:!(n=bD(e,i))||n.enumerable});return t},Vw=(t,e,r)=>(Np(t,e,"default"),r&&Np(r,e,"default")),OD=t=>Np($w({},"__esModule",{value:!0}),t),Sp={};qc.exports=OD(Sp);Vw(Sp,Uw(),qc.exports);Vw(Sp,jw(),qc.exports)});var Bw=p(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.getAwsChunkedEncodingStream=void 0;var PD=$("stream"),TD=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:i,checksumLocationName:o,streamHasher:s}=e,a=r!==void 0&&i!==void 0&&o!==void 0&&s!==void 0,d=a?s(i,t):void 0,l=new PD.Readable({read:()=>{}});return t.on("data",u=>{let m=n(u)||0;l.push(`${m.toString(16)}\r
`),l.push(u),l.push(`\r
`)}),t.on("end",async()=>{if(l.push(`0\r
`),a){let u=r(await d);l.push(`${o}:${u}\r
`),l.push(`\r
`)}l.push(null)}),l};Dc.getAwsChunkedEncodingStream=TD});var Kw=p((tne,Gw)=>{var Mc=Object.defineProperty,AD=Object.getOwnPropertyDescriptor,RD=Object.getOwnPropertyNames,ID=Object.prototype.hasOwnProperty,kD=(t,e)=>Mc(t,"name",{value:e,configurable:!0}),qD=(t,e)=>{for(var r in e)Mc(t,r,{get:e[r],enumerable:!0})},DD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RD(e))!ID.call(t,i)&&i!==r&&Mc(t,i,{get:()=>e[i],enumerable:!(n=AD(e,i))||n.enumerable});return t},MD=t=>DD(Mc({},"__esModule",{value:!0}),t),zw={};qD(zw,{buildQueryString:()=>Hw});Gw.exports=MD(zw);var bp=Mu();function Hw(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=(0,bp.escapeUri)(r),Array.isArray(n))for(let i=0,o=n.length;i<o;i++)e.push(`${r}=${(0,bp.escapeUri)(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${(0,bp.escapeUri)(n)}`),e.push(i)}}return e.join("&")}kD(Hw,"buildQueryString")});var Jn=p((one,lE)=>{var FD=Object.create,is=Object.defineProperty,LD=Object.getOwnPropertyDescriptor,WD=Object.getOwnPropertyNames,UD=Object.getPrototypeOf,jD=Object.prototype.hasOwnProperty,we=(t,e)=>is(t,"name",{value:e,configurable:!0}),$D=(t,e)=>{for(var r in e)is(t,r,{get:e[r],enumerable:!0})},Yw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of WD(e))!jD.call(t,i)&&i!==r&&is(t,i,{get:()=>e[i],enumerable:!(n=LD(e,i))||n.enumerable});return t},VD=(t,e,r)=>(r=t!=null?FD(UD(t)):{},Yw(e||!t||!t.__esModule?is(r,"default",{value:t,enumerable:!0}):r,t)),BD=t=>Yw(is({},"__esModule",{value:!0}),t),Xw={};$D(Xw,{DEFAULT_REQUEST_TIMEOUT:()=>QD,NodeHttp2Handler:()=>e1,NodeHttpHandler:()=>JD,streamCollector:()=>r1});lE.exports=BD(Xw);var Zw=Ae(),eE=Kw(),xp=$("http"),Cp=$("https"),zD=["ECONNRESET","EPIPE","ETIMEDOUT"],tE=we(t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},"getTransformedHeaders"),HD=we((t,e,r=0)=>{if(!r)return;let n=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);t.on("socket",i=>{i.connecting?i.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})},"setConnectionTimeout"),GD=we((t,{keepAlive:e,keepAliveMsecs:r})=>{e===!0&&t.on("socket",n=>{n.setKeepAlive(e,r||0)})},"setSocketKeepAlive"),KD=we((t,e,r=0)=>{t.setTimeout(r,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"setSocketTimeout"),rE=$("stream"),Qw=1e3;async function Pp(t,e,r=Qw){let n=e.headers??{},i=n.Expect||n.expect,o=-1,s=!1;i==="100-continue"&&await Promise.race([new Promise(a=>{o=Number(setTimeout(a,Math.max(Qw,r)))}),new Promise(a=>{t.on("continue",()=>{clearTimeout(o),a()}),t.on("error",()=>{s=!0,clearTimeout(o),a()})})]),s||nE(t,e.body)}we(Pp,"writeRequestBody");function nE(t,e){if(e instanceof rE.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}we(nE,"writeBody");var QD=0,iE=class Op{constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(i=>{r(this.resolveDefaultConfig(i))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new Op(e)}static checkSocketUsage(e,r){var n,i;let{sockets:o,requests:s,maxSockets:a}=e;if(typeof a!="number"||a===1/0)return r;let d=15e3;if(Date.now()-d<r)return r;if(o&&s)for(let l in o){let u=((n=o[l])==null?void 0:n.length)??0,m=((i=s[l])==null?void 0:i.length)??0;if(u>=a&&m>=2*a)return console.warn("@smithy/node-http-handler:WARN",`socket usage at capacity=${u} and ${m} additional requests are enqueued.`,"See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html","or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config."),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:i,httpAgent:o,httpsAgent:s}=e||{},a=!0,d=50;return{connectionTimeout:n,requestTimeout:r??i,httpAgent:(()=>o instanceof xp.Agent||typeof o?.destroy=="function"?o:new xp.Agent({keepAlive:a,maxSockets:d,...o}))(),httpsAgent:(()=>s instanceof Cp.Agent||typeof s?.destroy=="function"?s:new Cp.Agent({keepAlive:a,maxSockets:d,...s}))()}}destroy(){var e,r,n,i;(r=(e=this.config)==null?void 0:e.httpAgent)==null||r.destroy(),(i=(n=this.config)==null?void 0:n.httpsAgent)==null||i.destroy()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n;return new Promise((i,o)=>{let s,a=we(async T=>{await s,clearTimeout(n),i(T)},"resolve"),d=we(async T=>{await s,o(T)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let T=new Error("Request aborted");T.name="AbortError",d(T);return}let l=e.protocol==="https:",u=l?this.config.httpsAgent:this.config.httpAgent;n=setTimeout(()=>{this.socketWarningTimestamp=Op.checkSocketUsage(u,this.socketWarningTimestamp)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));let m=(0,eE.buildQueryString)(e.query||{}),h;if(e.username!=null||e.password!=null){let T=e.username??"",Ne=e.password??"";h=`${T}:${Ne}`}let f=e.path;m&&(f+=`?${m}`),e.fragment&&(f+=`#${e.fragment}`);let y={headers:e.headers,host:e.hostname,method:e.method,path:f,port:e.port,agent:u,auth:h},_=(l?Cp.request:xp.request)(y,T=>{let Ne=new Zw.HttpResponse({statusCode:T.statusCode||-1,reason:T.statusMessage,headers:tE(T.headers),body:T});a({response:Ne})});_.on("error",T=>{zD.includes(T.code)?d(Object.assign(T,{name:"TimeoutError"})):d(T)}),HD(_,d,this.config.connectionTimeout),KD(_,d,this.config.requestTimeout),r&&(r.onabort=()=>{_.abort();let T=new Error("Request aborted");T.name="AbortError",d(T)});let x=y.agent;typeof x=="object"&&"keepAlive"in x&&GD(_,{keepAlive:x.keepAlive,keepAliveMsecs:x.keepAliveMsecs}),s=Pp(_,e,this.config.requestTimeout).catch(o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}};we(iE,"NodeHttpHandler");var JD=iE,Jw=$("http2"),YD=VD($("http2")),oE=class{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}};we(oE,"NodeHttp2ConnectionPool");var XD=oE,sE=class{constructor(e){if(this.sessionCache=new Map,this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),i=this.sessionCache.get(n);if(i){let d=i.poll();if(d&&!this.config.disableConcurrency)return d}let o=YD.default.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},d=>{if(d)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let s=we(()=>{o.destroy(),this.deleteSession(n,o)},"destroySessionCb");o.on("goaway",s),o.on("error",s),o.on("frameError",s),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,s);let a=this.sessionCache.get(n)||new XD;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){var n;let i=this.getUrlString(e);(n=this.sessionCache.get(i))==null||n.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}};we(sE,"NodeHttp2ConnectionManager");var ZD=sE,aE=class cE{constructor(e){this.metadata={handlerProtocol:"h2"},this.connectionManager=new ZD({}),this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(i=>{r(i||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new cE(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:i}=this.config;return new Promise((o,s)=>{var a;let d=!1,l,u=we(async de=>{await l,o(de)},"resolve"),m=we(async de=>{await l,s(de)},"reject");if(r?.aborted){d=!0;let de=new Error("Request aborted");de.name="AbortError",m(de);return}let{hostname:h,method:f,port:y,protocol:w,query:_}=e,x="";if(e.username!=null||e.password!=null){let de=e.username??"",ro=e.password??"";x=`${de}:${ro}@`}let T=`${w}//${x}${h}${y?`:${y}`:""}`,Ne={destination:new URL(T)},ce=this.connectionManager.lease(Ne,{requestTimeout:(a=this.config)==null?void 0:a.sessionTimeout,disableConcurrentStreams:i||!1}),et=we(de=>{i&&this.destroySession(ce),d=!0,m(de)},"rejectWithDestroy"),ur=(0,eE.buildQueryString)(_||{}),Hr=e.path;ur&&(Hr+=`?${ur}`),e.fragment&&(Hr+=`#${e.fragment}`);let mt=ce.request({...e.headers,[Jw.constants.HTTP2_HEADER_PATH]:Hr,[Jw.constants.HTTP2_HEADER_METHOD]:f});ce.ref(),mt.on("response",de=>{let ro=new Zw.HttpResponse({statusCode:de[":status"]||-1,headers:tE(de),body:mt});d=!0,u({response:ro}),i&&(ce.close(),this.connectionManager.deleteSession(T,ce))}),n&&mt.setTimeout(n,()=>{mt.close();let de=new Error(`Stream timed out because of no activity for ${n} ms`);de.name="TimeoutError",et(de)}),r&&(r.onabort=()=>{mt.close();let de=new Error("Request aborted");de.name="AbortError",et(de)}),mt.on("frameError",(de,ro,L0)=>{et(new Error(`Frame type id ${de} in stream id ${L0} has failed with code ${ro}.`))}),mt.on("error",et),mt.on("aborted",()=>{et(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${mt.rstCode}.`))}),mt.on("close",()=>{ce.unref(),i&&ce.destroy(),d||et(new Error("Unexpected error: http2 request did not get a response"))}),l=Pp(mt,e,n)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}};we(aE,"NodeHttp2Handler");var e1=aE,dE=class extends rE.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,n){this.bufferedBytes.push(e),n()}};we(dE,"Collector");var t1=dE,r1=we(t=>new Promise((e,r)=>{let n=new t1;t.pipe(n),t.on("error",i=>{n.end(),r(i)}),n.on("error",r),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.bufferedBytes));e(i)})}),"streamCollector")});var pE=p(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.sdkStreamMixin=void 0;var n1=Jn(),i1=$n(),Tp=$("stream"),o1=$("util"),uE="The stream has already been transformed.",s1=t=>{var e,r;if(!(t instanceof Tp.Readable)){let o=((r=(e=t?.__proto__)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let n=!1,i=async()=>{if(n)throw new Error(uE);return n=!0,await(0,n1.streamCollector)(t)};return Object.assign(t,{transformToByteArray:i,transformToString:async o=>{let s=await i();return o===void 0||Buffer.isEncoding(o)?(0,i1.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(o):new o1.TextDecoder(o).decode(s)},transformToWebStream:()=>{if(n)throw new Error(uE);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Tp.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return n=!0,Tp.Readable.toWeb(t)}})};Fc.sdkStreamMixin=s1});var wE=p((ane,Uc)=>{var Lc=Object.defineProperty,a1=Object.getOwnPropertyDescriptor,c1=Object.getOwnPropertyNames,d1=Object.prototype.hasOwnProperty,Ip=(t,e)=>Lc(t,"name",{value:e,configurable:!0}),l1=(t,e)=>{for(var r in e)Lc(t,r,{get:e[r],enumerable:!0})},Ap=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of c1(e))!d1.call(t,i)&&i!==r&&Lc(t,i,{get:()=>e[i],enumerable:!(n=a1(e,i))||n.enumerable});return t},mE=(t,e,r)=>(Ap(t,e,"default"),r&&Ap(r,e,"default")),u1=t=>Ap(Lc({},"__esModule",{value:!0}),t),Wc={};l1(Wc,{Uint8ArrayBlobAdapter:()=>Rp});Uc.exports=u1(Wc);var fE=Qn(),hE=it();function yE(t,e="utf-8"){return e==="base64"?(0,fE.toBase64)(t):(0,hE.toUtf8)(t)}Ip(yE,"transformToString");function gE(t,e){return e==="base64"?Rp.mutate((0,fE.fromBase64)(t)):Rp.mutate((0,hE.fromUtf8)(t))}Ip(gE,"transformFromString");var _E=class vE extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return gE(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,vE.prototype),e}transformToString(e="utf-8"){return yE(this,e)}};Ip(_E,"Uint8ArrayBlobAdapter");var Rp=_E;mE(Wc,Bw(),Uc.exports);mE(Wc,pE(),Uc.exports)});var S=p((pne,BE)=>{var zc=Object.defineProperty,p1=Object.getOwnPropertyDescriptor,m1=Object.getOwnPropertyNames,f1=Object.prototype.hasOwnProperty,E=(t,e)=>zc(t,"name",{value:e,configurable:!0}),h1=(t,e)=>{for(var r in e)zc(t,r,{get:e[r],enumerable:!0})},y1=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of m1(e))!f1.call(t,i)&&i!==r&&zc(t,i,{get:()=>e[i],enumerable:!(n=p1(e,i))||n.enumerable});return t},g1=t=>y1(zc({},"__esModule",{value:!0}),t),NE={};h1(NE,{Client:()=>v1,Command:()=>OE,LazyJsonString:()=>hM,NoOpLogger:()=>_1,SENSITIVE_STRING:()=>N1,ServiceException:()=>nM,StringWrapper:()=>ds,_json:()=>Wp,collectBody:()=>w1,convertMap:()=>yM,createAggregatedClient:()=>S1,dateToUtcString:()=>qE,decorateServiceException:()=>FE,emitWarningIfUnsupportedVersion:()=>aM,expectBoolean:()=>x1,expectByte:()=>Lp,expectFloat32:()=>$c,expectInt:()=>O1,expectInt32:()=>Mp,expectLong:()=>as,expectNonNull:()=>T1,expectNumber:()=>ss,expectObject:()=>TE,expectShort:()=>Fp,expectString:()=>A1,expectUnion:()=>R1,extendedEncodeURIComponent:()=>Bc,getArrayIfSingleItem:()=>fM,getDefaultClientConfiguration:()=>pM,getDefaultExtensionConfiguration:()=>WE,getValueFromTextNode:()=>UE,handleFloat:()=>q1,limitedParseDouble:()=>$p,limitedParseFloat:()=>D1,limitedParseFloat32:()=>M1,loadConfigsForDefaultMode:()=>sM,logger:()=>cs,map:()=>Bp,parseBoolean:()=>b1,parseEpochTimestamp:()=>K1,parseRfc3339DateTime:()=>j1,parseRfc3339DateTimeWithOffset:()=>V1,parseRfc7231DateTime:()=>G1,resolveDefaultRuntimeConfig:()=>mM,resolvedPath:()=>EM,serializeFloat:()=>NM,splitEvery:()=>VE,strictParseByte:()=>kE,strictParseDouble:()=>jp,strictParseFloat:()=>I1,strictParseFloat32:()=>AE,strictParseInt:()=>F1,strictParseInt32:()=>L1,strictParseLong:()=>IE,strictParseShort:()=>Yn,take:()=>gM,throwDefaultError:()=>LE,withBaseException:()=>iM});BE.exports=g1(NE);var SE=class{trace(){}debug(){}info(){}warn(){}error(){}};E(SE,"NoOpLogger");var _1=SE,bE=Ww(),xE=class{constructor(e){this.middlewareStack=(0,bE.constructStack)(),this.config=e}send(e,r,n){let i=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,s=e.resolveMiddleware(this.middlewareStack,this.config,i);if(o)s(e).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return s(e).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};E(xE,"Client");var v1=xE,kp=wE(),w1=E(async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return kp.Uint8ArrayBlobAdapter.mutate(t);if(!t)return kp.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return kp.Uint8ArrayBlobAdapter.mutate(await r)},"collectBody"),Dp=z(),CE=class{constructor(){this.middlewareStack=(0,bE.constructStack)()}static classBuilder(){return new E1}resolveMiddlewareWithContext(e,r,n,{middlewareFn:i,clientName:o,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,smithyContext:l,additionalContext:u,CommandCtor:m}){for(let _ of i.bind(this)(m,e,r,n))this.middlewareStack.use(_);let h=e.concat(this.middlewareStack),{logger:f}=r,y={logger:f,clientName:o,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,[Dp.SMITHY_CONTEXT_KEY]:{...l},...u},{requestHandler:w}=r;return h.resolve(_=>w.handle(_.request,n||{}),y)}};E(CE,"Command");var OE=CE,PE=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){var e;let r=this,n;return n=(e=class extends OE{constructor(...[i]){super(),this.serialize=r._serializer,this.deserialize=r._deserializer,this.input=i??{},r._init(this)}static getEndpointParameterInstructions(){return r._ep}resolveMiddleware(i,o,s){return this.resolveMiddlewareWithContext(i,o,s,{CommandCtor:n,middlewareFn:r._middlewareFn,clientName:r._clientName,commandName:r._commandName,inputFilterSensitiveLog:r._inputFilterSensitiveLog,outputFilterSensitiveLog:r._outputFilterSensitiveLog,smithyContext:r._smithyContext,additionalContext:r._additionalContext})}},E(e,"CommandRef"),e)}};E(PE,"ClassBuilder");var E1=PE,N1="***SensitiveInformation***",S1=E((t,e)=>{for(let r of Object.keys(t)){let n=t[r],i=E(async function(s,a,d){let l=new n(s);if(typeof a=="function")this.send(l,a);else if(typeof d=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},d)}else return this.send(l,a)},"methodImpl"),o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=i}},"createAggregatedClient"),b1=E(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean"),x1=E(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&cs.warn(Vc(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&cs.warn(Vc(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean"),ss=E(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&cs.warn(Vc(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber"),C1=Math.ceil(2**127*(2-2**-23)),$c=E(t=>{let e=ss(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>C1)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32"),as=E(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong"),O1=as,Mp=E(t=>Up(t,32),"expectInt32"),Fp=E(t=>Up(t,16),"expectShort"),Lp=E(t=>Up(t,8),"expectByte"),Up=E((t,e)=>{let r=as(t);if(r!==void 0&&P1(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),P1=E((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),T1=E((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull"),TE=E(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject"),A1=E(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return cs.warn(Vc(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString"),R1=E(t=>{if(t==null)return;let e=TE(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion"),jp=E(t=>ss(typeof t=="string"?Zn(t):t),"strictParseDouble"),I1=jp,AE=E(t=>$c(typeof t=="string"?Zn(t):t),"strictParseFloat32"),k1=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zn=E(t=>{let e=t.match(k1);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),$p=E(t=>typeof t=="string"?RE(t):ss(t),"limitedParseDouble"),q1=$p,D1=$p,M1=E(t=>typeof t=="string"?RE(t):$c(t),"limitedParseFloat32"),RE=E(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),IE=E(t=>as(typeof t=="string"?Zn(t):t),"strictParseLong"),F1=IE,L1=E(t=>Mp(typeof t=="string"?Zn(t):t),"strictParseInt32"),Yn=E(t=>Fp(typeof t=="string"?Zn(t):t),"strictParseShort"),kE=E(t=>Lp(typeof t=="string"?Zn(t):t),"strictParseByte"),Vc=E(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),cs={warn:console.warn},W1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Vp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function qE(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),i=t.getUTCDate(),o=t.getUTCHours(),s=t.getUTCMinutes(),a=t.getUTCSeconds(),d=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,u=s<10?`0${s}`:`${s}`,m=a<10?`0${a}`:`${a}`;return`${W1[n]}, ${d} ${Vp[r]} ${e} ${l}:${u}:${m} GMT`}E(qE,"dateToUtcString");var U1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),j1=E(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=U1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,d,l]=e,u=Yn(Xn(n)),m=qt(i,"month",1,12),h=qt(o,"day",1,31);return os(u,m,h,{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l})},"parseRfc3339DateTime"),$1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),V1=E(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=$1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,d,l,u]=e,m=Yn(Xn(n)),h=qt(i,"month",1,12),f=qt(o,"day",1,31),y=os(m,h,f,{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l});return u.toUpperCase()!="Z"&&y.setTime(y.getTime()-rM(u)),y},"parseRfc3339DateTimeWithOffset"),B1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),z1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),H1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),G1=E(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=B1.exec(t);if(e){let[r,n,i,o,s,a,d,l]=e;return os(Yn(Xn(o)),qp(i),qt(n,"day",1,31),{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l})}if(e=z1.exec(t),e){let[r,n,i,o,s,a,d,l]=e;return Y1(os(Q1(o),qp(i),qt(n,"day",1,31),{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l}))}if(e=H1.exec(t),e){let[r,n,i,o,s,a,d,l]=e;return os(Yn(Xn(l)),qp(n),qt(i.trimLeft(),"day",1,31),{hours:o,minutes:s,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),K1=E(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=jp(t);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp"),os=E((t,e,r,n)=>{let i=e-1;return Z1(t,i,r),new Date(Date.UTC(t,i,r,qt(n.hours,"hour",0,23),qt(n.minutes,"minute",0,59),qt(n.seconds,"seconds",0,60),tM(n.fractionalMilliseconds)))},"buildDate"),Q1=E(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Yn(Xn(t));return r<e?r+100:r},"parseTwoDigitYear"),J1=50*365*24*60*60*1e3,Y1=E(t=>t.getTime()-new Date().getTime()>J1?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),qp=E(t=>{let e=Vp.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),X1=[31,28,31,30,31,30,31,31,30,31,30,31],Z1=E((t,e,r)=>{let n=X1[e];if(e===1&&eM(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Vp[e]} in ${t}: ${r}`)},"validateDayOfMonth"),eM=E(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),qt=E((t,e,r,n)=>{let i=kE(Xn(t));if(i<r||i>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return i},"parseDateValue"),tM=E(t=>t==null?0:AE("0."+t)*1e3,"parseMilliseconds"),rM=E(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),i=Number(t.substring(4,6));return r*(n*60+i)*60*1e3},"parseOffsetToMilliseconds"),Xn=E(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes"),DE=class ME extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,ME.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}};E(DE,"ServiceException");var nM=DE,FE=E((t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(t[n]==null||t[n]==="")&&(t[n]=i)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException"),LE=E(({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let i=oM(t),o=i.httpStatusCode?i.httpStatusCode+"":void 0,s=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:i});throw FE(s,e)},"throwDefaultError"),iM=E(t=>({output:e,parsedBody:r,errorCode:n})=>{LE({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},"withBaseException"),oM=E(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),sM=E(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),EE=!1,aM=E(t=>{t&&!EE&&parseInt(t.substring(1,t.indexOf(".")))<14&&(EE=!0)},"emitWarningIfUnsupportedVersion"),cM=E(t=>{let e=[];for(let r in Dp.AlgorithmId){let n=Dp.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),dM=E(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),lM=E(t=>{let e=t.retryStrategy;return{setRetryStrategy(r){e=r},retryStrategy(){return e}}},"getRetryConfiguration"),uM=E(t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},"resolveRetryRuntimeConfig"),WE=E(t=>({...cM(t),...lM(t)}),"getDefaultExtensionConfiguration"),pM=WE,mM=E(t=>({...dM(t),...uM(t)}),"resolveDefaultRuntimeConfig");function Bc(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}E(Bc,"extendedEncodeURIComponent");var fM=E(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem"),UE=E(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=UE(t[r]));return t},"getValueFromTextNode"),ds=E(function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r},"StringWrapper");ds.prototype=Object.create(String.prototype,{constructor:{value:ds,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(ds,String);var jE=class jc extends ds{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(e){return e instanceof jc?e:e instanceof String||typeof e=="string"?new jc(e):new jc(JSON.stringify(e))}};E(jE,"LazyJsonString");var hM=jE;function Bp(t,e,r){let n,i,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return i=e,o=r,_M(n,i,o);o=e}for(let s of Object.keys(o)){if(!Array.isArray(o[s])){n[s]=o[s];continue}$E(n,null,o,s)}return n}E(Bp,"map");var yM=E(t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},"convertMap"),gM=E((t,e)=>{let r={};for(let n in e)$E(r,t,e,n);return r},"take"),_M=E((t,e,r)=>Bp(t,Object.entries(r).reduce((n,[i,o])=>(Array.isArray(o)?n[i]=o:typeof o=="function"?n[i]=[e,o()]:n[i]=[e,o],n),{})),"mapWithFilter"),$E=E((t,e,r,n)=>{if(e!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=vM,d=wM,l=n]=s;(typeof a=="function"&&a(e[l])||typeof a!="function"&&a)&&(t[n]=d(e[l]));return}let[i,o]=r[n];if(typeof o=="function"){let s,a=i===void 0&&(s=o())!=null,d=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;a?t[n]=s:d&&(t[n]=o())}else{let s=i===void 0&&o!=null,a=typeof i=="function"&&!!i(o)||typeof i!="function"&&!!i;(s||a)&&(t[n]=o)}},"applyInstruction"),vM=E(t=>t!=null,"nonNullish"),wM=E(t=>t,"pass"),EM=E((t,e,r,n,i,o)=>{if(e!=null&&e[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(i,o?s.split("/").map(a=>Bc(a)).join("/"):Bc(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return t},"resolvedPath"),NM=E(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat"),Wp=E(t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(Wp);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=Wp(t[r]));return e}return t},"_json");function VE(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let i=[],o="";for(let s=0;s<n.length;s++)o===""?o=n[s]:o+=e+n[s],(s+1)%r===0&&(i.push(o),o="");return o!==""&&i.push(o),i}E(VE,"splitEvery")});var zE=p(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.isStreamingPayload=void 0;var SM=$("stream"),bM=t=>t?.body instanceof SM.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Hc.isStreamingPayload=bM});var tr=p((gne,cN)=>{var Gc=Object.defineProperty,xM=Object.getOwnPropertyDescriptor,CM=Object.getOwnPropertyNames,OM=Object.prototype.hasOwnProperty,me=(t,e)=>Gc(t,"name",{value:e,configurable:!0}),PM=(t,e)=>{for(var r in e)Gc(t,r,{get:e[r],enumerable:!0})},TM=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of CM(e))!OM.call(t,i)&&i!==r&&Gc(t,i,{get:()=>e[i],enumerable:!(n=xM(e,i))||n.enumerable});return t},AM=t=>TM(Gc({},"__esModule",{value:!0}),t),GE={};PM(GE,{AdaptiveRetryStrategy:()=>kM,CONFIG_MAX_ATTEMPTS:()=>Hp,CONFIG_RETRY_MODE:()=>rN,ENV_MAX_ATTEMPTS:()=>zp,ENV_RETRY_MODE:()=>tN,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>qM,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>MM,StandardRetryStrategy:()=>ZE,defaultDelayDecider:()=>QE,defaultRetryDecider:()=>JE,getOmitRetryHeadersPlugin:()=>FM,getRetryAfterHint:()=>aN,getRetryPlugin:()=>VM,omitRetryHeadersMiddleware:()=>nN,omitRetryHeadersMiddlewareOptions:()=>iN,resolveRetryConfig:()=>DM,retryMiddleware:()=>oN,retryMiddlewareOptions:()=>sN});cN.exports=AM(GE);var ei=Ae(),KE=(gw(),F(yw)),ne=Kn(),RM=me((t,e)=>{let r=t,n=e?.noRetryIncrement??ne.NO_RETRY_INCREMENT,i=e?.retryCost??ne.RETRY_COST,o=e?.timeoutRetryCost??ne.TIMEOUT_RETRY_COST,s=t,a=me(m=>m.name==="TimeoutError"?o:i,"getCapacityAmount"),d=me(m=>a(m)<=s,"hasRetryTokens");return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:me(m=>{if(!d(m))throw new Error("No retry token available");let h=a(m);return s-=h,h},"retrieveRetryTokens"),releaseRetryTokens:me(m=>{s+=m??n,s=Math.min(s,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),QE=me((t,e)=>Math.floor(Math.min(ne.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider"),Pr=yp(),JE=me(t=>t?(0,Pr.isRetryableByTrait)(t)||(0,Pr.isClockSkewError)(t)||(0,Pr.isThrottlingError)(t)||(0,Pr.isTransientError)(t):!1,"defaultRetryDecider"),YE=me(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError"),XE=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=ne.RETRY_MODES.STANDARD,this.retryDecider=r?.retryDecider??JE,this.delayDecider=r?.delayDecider??QE,this.retryQuota=r?.retryQuota??RM(ne.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=ne.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let i,o=0,s=0,a=await this.getMaxAttempts(),{request:d}=r;for(ei.HttpRequest.isInstance(d)&&(d.headers[ne.INVOCATION_ID_HEADER]=(0,KE.v4)());;)try{ei.HttpRequest.isInstance(d)&&(d.headers[ne.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:u}=await e(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(i),u.$metadata.attempts=o+1,u.$metadata.totalRetryDelay=s,{response:l,output:u}}catch(l){let u=YE(l);if(o++,this.shouldRetry(u,o,a)){i=this.retryQuota.retrieveRetryTokens(u);let m=this.delayDecider((0,Pr.isThrottlingError)(u)?ne.THROTTLING_RETRY_DELAY_BASE:ne.DEFAULT_RETRY_DELAY_BASE,o),h=IM(u.$response),f=Math.max(h||0,m);s+=f,await new Promise(y=>setTimeout(y,f));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=o,u.$metadata.totalRetryDelay=s,u}}};me(XE,"StandardRetryStrategy");var ZE=XE,IM=me(t=>{if(!ei.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),eN=class extends ZE{constructor(e,r){let{rateLimiter:n,...i}=r??{};super(e,i),this.rateLimiter=n??new ne.DefaultRateLimiter,this.mode=ne.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};me(eN,"AdaptiveRetryStrategy");var kM=eN,HE=jn(),zp="AWS_MAX_ATTEMPTS",Hp="max_attempts",qM={environmentVariableSelector:t=>{let e=t[zp];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${zp} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Hp];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Hp} mast be a number, got "${e}"`);return r},default:ne.DEFAULT_MAX_ATTEMPTS},DM=me(t=>{let{retryStrategy:e}=t,r=(0,HE.normalizeProvider)(t.maxAttempts??ne.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await(0,HE.normalizeProvider)(t.retryMode)()===ne.RETRY_MODES.ADAPTIVE?new ne.AdaptiveRetryStrategy(r):new ne.StandardRetryStrategy(r))}},"resolveRetryConfig"),tN="AWS_RETRY_MODE",rN="retry_mode",MM={environmentVariableSelector:t=>t[tN],configFileSelector:t=>t[rN],default:ne.DEFAULT_RETRY_MODE},nN=me(()=>t=>async e=>{let{request:r}=e;return ei.HttpRequest.isInstance(r)&&(delete r.headers[ne.INVOCATION_ID_HEADER],delete r.headers[ne.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware"),iN={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},FM=me(t=>({applyToStack:e=>{e.addRelativeTo(nN(),iN)}}),"getOmitRetryHeadersPlugin"),LM=S(),WM=zE(),oN=me(t=>(e,r)=>async n=>{var i;let o=await t.retryStrategy(),s=await t.maxAttempts();if(UM(o)){o=o;let a=await o.acquireInitialRetryToken(r.partition_id),d=new Error,l=0,u=0,{request:m}=n,h=ei.HttpRequest.isInstance(m);for(h&&(m.headers[ne.INVOCATION_ID_HEADER]=(0,KE.v4)());;)try{h&&(m.headers[ne.REQUEST_HEADER]=`attempt=${l+1}; max=${s}`);let{response:f,output:y}=await e(n);return o.recordSuccess(a),y.$metadata.attempts=l+1,y.$metadata.totalRetryDelay=u,{response:f,output:y}}catch(f){let y=jM(f);if(d=YE(f),h&&(0,WM.isStreamingPayload)(m))throw(i=r.logger instanceof LM.NoOpLogger?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),d;try{a=await o.refreshRetryTokenForRetry(a,y)}catch{throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=l+1,d.$metadata.totalRetryDelay=u,d}l=a.getRetryCount();let w=a.getRetryDelay();u+=w,await new Promise(_=>setTimeout(_,w))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(e,n)},"retryMiddleware"),UM=me(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),jM=me(t=>{let e={error:t,errorType:$M(t)},r=aN(t.$response);return r&&(e.retryAfterHint=r),e},"getRetryErrorInfo"),$M=me(t=>(0,Pr.isThrottlingError)(t)?"THROTTLING":(0,Pr.isTransientError)(t)?"TRANSIENT":(0,Pr.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),sN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},VM=me(t=>({applyToStack:e=>{e.add(oN(t),sN)}}),"getRetryPlugin"),aN=me(t=>{if(!ei.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var dN=p(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.resolveClientEndpointParameters=void 0;var BM=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rds-data"});Kc.resolveClientEndpointParameters=BM});var lN=p((vne,zM)=>{zM.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.454.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.454.0","@aws-sdk/core":"3.451.0","@aws-sdk/credential-provider-node":"3.451.0","@aws-sdk/middleware-host-header":"3.451.0","@aws-sdk/middleware-logger":"3.451.0","@aws-sdk/middleware-recursion-detection":"3.451.0","@aws-sdk/middleware-signing":"3.451.0","@aws-sdk/middleware-user-agent":"3.451.0","@aws-sdk/region-config-resolver":"3.451.0","@aws-sdk/types":"3.451.0","@aws-sdk/util-endpoints":"3.451.0","@aws-sdk/util-user-agent-browser":"3.451.0","@aws-sdk/util-user-agent-node":"3.451.0","@smithy/config-resolver":"^2.0.18","@smithy/fetch-http-handler":"^2.2.6","@smithy/hash-node":"^2.0.15","@smithy/invalid-dependency":"^2.0.13","@smithy/middleware-content-length":"^2.0.15","@smithy/middleware-endpoint":"^2.2.0","@smithy/middleware-retry":"^2.0.20","@smithy/middleware-serde":"^2.0.13","@smithy/middleware-stack":"^2.0.7","@smithy/node-config-provider":"^2.1.5","@smithy/node-http-handler":"^2.1.9","@smithy/protocol-http":"^3.0.9","@smithy/smithy-client":"^2.1.15","@smithy/types":"^2.5.0","@smithy/url-parser":"^2.0.13","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.19","@smithy/util-defaults-mode-node":"^2.0.25","@smithy/util-endpoints":"^1.0.4","@smithy/util-retry":"^2.0.6","@smithy/util-utf8":"^2.0.2",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var uN=p(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.resolveStsAuthConfig=void 0;var HM=Xt(),GM=(t,{stsClientCtor:e})=>(0,HM.resolveAwsAuthConfig)({...t,stsClientCtor:e});Qc.resolveStsAuthConfig=GM});var pN=p(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.resolveClientEndpointParameters=void 0;var KM=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"});Jc.resolveClientEndpointParameters=KM});var mN=p((Nne,QM)=>{QM.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.454.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.451.0","@aws-sdk/credential-provider-node":"3.451.0","@aws-sdk/middleware-host-header":"3.451.0","@aws-sdk/middleware-logger":"3.451.0","@aws-sdk/middleware-recursion-detection":"3.451.0","@aws-sdk/middleware-sdk-sts":"3.451.0","@aws-sdk/middleware-signing":"3.451.0","@aws-sdk/middleware-user-agent":"3.451.0","@aws-sdk/region-config-resolver":"3.451.0","@aws-sdk/types":"3.451.0","@aws-sdk/util-endpoints":"3.451.0","@aws-sdk/util-user-agent-browser":"3.451.0","@aws-sdk/util-user-agent-node":"3.451.0","@smithy/config-resolver":"^2.0.18","@smithy/fetch-http-handler":"^2.2.6","@smithy/hash-node":"^2.0.15","@smithy/invalid-dependency":"^2.0.13","@smithy/middleware-content-length":"^2.0.15","@smithy/middleware-endpoint":"^2.2.0","@smithy/middleware-retry":"^2.0.20","@smithy/middleware-serde":"^2.0.13","@smithy/middleware-stack":"^2.0.7","@smithy/node-config-provider":"^2.1.5","@smithy/node-http-handler":"^2.1.9","@smithy/protocol-http":"^3.0.9","@smithy/smithy-client":"^2.1.15","@smithy/types":"^2.5.0","@smithy/url-parser":"^2.0.13","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.19","@smithy/util-defaults-mode-node":"^2.0.25","@smithy/util-endpoints":"^1.0.4","@smithy/util-retry":"^2.0.6","@smithy/util-utf8":"^2.0.2","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var Yc=p(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.STSServiceException=ti.__ServiceException=void 0;var fN=S();Object.defineProperty(ti,"__ServiceException",{enumerable:!0,get:function(){return fN.ServiceException}});var Gp=class t extends fN.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};ti.STSServiceException=Gp});var Ar=p(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.GetSessionTokenResponseFilterSensitiveLog=I.GetFederationTokenResponseFilterSensitiveLog=I.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=I.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=I.AssumeRoleWithSAMLResponseFilterSensitiveLog=I.AssumeRoleWithSAMLRequestFilterSensitiveLog=I.AssumeRoleResponseFilterSensitiveLog=I.CredentialsFilterSensitiveLog=I.InvalidAuthorizationMessageException=I.IDPCommunicationErrorException=I.InvalidIdentityTokenException=I.IDPRejectedClaimException=I.RegionDisabledException=I.PackedPolicyTooLargeException=I.MalformedPolicyDocumentException=I.ExpiredTokenException=void 0;var rm=S(),Tr=Yc(),Kp=class t extends Tr.STSServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.ExpiredTokenException=Kp;var Qp=class t extends Tr.STSServiceException{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.MalformedPolicyDocumentException=Qp;var Jp=class t extends Tr.STSServiceException{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.PackedPolicyTooLargeException=Jp;var Yp=class t extends Tr.STSServiceException{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.RegionDisabledException=Yp;var Xp=class t extends Tr.STSServiceException{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.IDPRejectedClaimException=Xp;var Zp=class t extends Tr.STSServiceException{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.InvalidIdentityTokenException=Zp;var em=class t extends Tr.STSServiceException{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.IDPCommunicationErrorException=em;var tm=class t extends Tr.STSServiceException{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};I.InvalidAuthorizationMessageException=tm;var JM=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:rm.SENSITIVE_STRING}});I.CredentialsFilterSensitiveLog=JM;var YM=t=>({...t,...t.Credentials&&{Credentials:(0,I.CredentialsFilterSensitiveLog)(t.Credentials)}});I.AssumeRoleResponseFilterSensitiveLog=YM;var XM=t=>({...t,...t.SAMLAssertion&&{SAMLAssertion:rm.SENSITIVE_STRING}});I.AssumeRoleWithSAMLRequestFilterSensitiveLog=XM;var ZM=t=>({...t,...t.Credentials&&{Credentials:(0,I.CredentialsFilterSensitiveLog)(t.Credentials)}});I.AssumeRoleWithSAMLResponseFilterSensitiveLog=ZM;var eF=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:rm.SENSITIVE_STRING}});I.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=eF;var tF=t=>({...t,...t.Credentials&&{Credentials:(0,I.CredentialsFilterSensitiveLog)(t.Credentials)}});I.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=tF;var rF=t=>({...t,...t.Credentials&&{Credentials:(0,I.CredentialsFilterSensitiveLog)(t.Credentials)}});I.GetFederationTokenResponseFilterSensitiveLog=rF;var nF=t=>({...t,...t.Credentials&&{Credentials:(0,I.CredentialsFilterSensitiveLog)(t.Credentials)}});I.GetSessionTokenResponseFilterSensitiveLog=nF});var Xc=p(rr=>{"use strict";var hN=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",iF=hN+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yN="["+hN+"]["+iF+"]*",oF=new RegExp("^"+yN+"$"),sF=function(t,e){let r=[],n=e.exec(t);for(;n;){let i=[];i.startIndex=e.lastIndex-n[0].length;let o=n.length;for(let s=0;s<o;s++)i.push(n[s]);r.push(i),n=e.exec(t)}return r},aF=function(t){let e=oF.exec(t);return!(e===null||typeof e>"u")};rr.isExist=function(t){return typeof t<"u"};rr.isEmptyObject=function(t){return Object.keys(t).length===0};rr.merge=function(t,e,r){if(e){let n=Object.keys(e),i=n.length;for(let o=0;o<i;o++)r==="strict"?t[n[o]]=[e[n[o]]]:t[n[o]]=e[n[o]]}};rr.getValue=function(t){return rr.isExist(t)?t:""};rr.isName=aF;rr.getAllMatches=sF;rr.nameRegexp=yN});var im=p(EN=>{"use strict";var nm=Xc(),cF={allowBooleanAttributes:!1,unpairedTags:[]};EN.validate=function(t,e){e=Object.assign({},cF,e);let r=[],n=!1,i=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=_N(t,o),o.err)return o}else if(t[o]==="<"){let s=o;if(o++,t[o]==="!"){o=vN(t,o);continue}else{let a=!1;t[o]==="/"&&(a=!0,o++);let d="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)d+=t[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!yF(d)){let m;return d.trim().length===0?m="Invalid space after '<'.":m="Tag '"+d+"' is an invalid name.",fe("InvalidTag",m,ze(t,o))}let l=uF(t,o);if(l===!1)return fe("InvalidAttr","Attributes for '"+d+"' have open quote.",ze(t,o));let u=l.value;if(o=l.index,u[u.length-1]==="/"){let m=o-u.length;u=u.substring(0,u.length-1);let h=wN(u,e);if(h===!0)n=!0;else return fe(h.err.code,h.err.msg,ze(t,m+h.err.line))}else if(a)if(l.tagClosed){if(u.trim().length>0)return fe("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",ze(t,s));{let m=r.pop();if(d!==m.tagName){let h=ze(t,m.tagStartPos);return fe("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+d+"'.",ze(t,s))}r.length==0&&(i=!0)}}else return fe("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",ze(t,o));else{let m=wN(u,e);if(m!==!0)return fe(m.err.code,m.err.msg,ze(t,o-u.length+m.err.line));if(i===!0)return fe("InvalidXml","Multiple possible root nodes found.",ze(t,o));e.unpairedTags.indexOf(d)!==-1||r.push({tagName:d,tagStartPos:s}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=vN(t,o);continue}else if(t[o+1]==="?"){if(o=_N(t,++o),o.err)return o}else break;else if(t[o]==="&"){let m=fF(t,o);if(m==-1)return fe("InvalidChar","char '&' is not expected.",ze(t,o));o=m}else if(i===!0&&!gN(t[o]))return fe("InvalidXml","Extra text at the end",ze(t,o));t[o]==="<"&&o--}}else{if(gN(t[o]))continue;return fe("InvalidChar","char '"+t[o]+"' is not expected.",ze(t,o))}if(n){if(r.length==1)return fe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ze(t,r[0].tagStartPos));if(r.length>0)return fe("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return fe("InvalidXml","Start tag expected.",1);return!0};function gN(t){return t===" "||t==="	"||t===`
`||t==="\r"}function _N(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return fe("InvalidXml","XML declaration allowed only at the start of the document.",ze(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function vN(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var dF='"',lF="'";function uF(t,e){let r="",n="",i=!1;for(;e<t.length;e++){if(t[e]===dF||t[e]===lF)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){i=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:i}}var pF=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function wN(t,e){let r=nm.getAllMatches(t,pF),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return fe("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",ls(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return fe("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",ls(r[i]));if(r[i][3]===void 0&&!e.allowBooleanAttributes)return fe("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",ls(r[i]));let o=r[i][2];if(!hF(o))return fe("InvalidAttr","Attribute '"+o+"' is an invalid name.",ls(r[i]));if(!n.hasOwnProperty(o))n[o]=1;else return fe("InvalidAttr","Attribute '"+o+"' is repeated.",ls(r[i]))}return!0}function mF(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function fF(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,mF(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function fe(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function hF(t){return nm.isName(t)}function yF(t){return nm.isName(t)}function ze(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ls(t){return t.startIndex+t[1].length}});var SN=p(om=>{var NN={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},gF=function(t){return Object.assign({},NN,t)};om.buildOptions=gF;om.defaultOptions=NN});var xN=p((Pne,bN)=>{"use strict";var sm=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};bN.exports=sm});var ON=p((Tne,CN)=>{var _F=Xc();function vF(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,i=!1,o=!1,s="";for(;e<t.length;e++)if(t[e]==="<"&&!o){if(i&&NF(t,e))e+=7,[entityName,val,e]=wF(t,e+1),val.indexOf("&")===-1&&(r[CF(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&SF(t,e))e+=8;else if(i&&bF(t,e))e+=8;else if(i&&xF(t,e))e+=9;else if(EF)o=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(t[e]===">"){if(o?t[e-1]==="-"&&t[e-2]==="-"&&(o=!1,n--):n--,n===0)break}else t[e]==="["?i=!0:s+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function wF(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=t[e++],i="";for(;e<t.length&&t[e]!==n;e++)i+=t[e];return[r,i,e]}function EF(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function NF(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function SF(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function bF(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function xF(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function CF(t){if(_F.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}CN.exports=vF});var TN=p((Ane,PN)=>{var OF=/^[-+]?0x[a-fA-F0-9]+$/,PF=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var TF={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function AF(t,e={}){if(e=Object.assign({},TF,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&OF.test(r))return Number.parseInt(r,16);{let n=PF.exec(r);if(n){let i=n[1],o=n[2],s=RF(n[3]),a=n[4]||n[6];if(!e.leadingZeros&&o.length>0&&i&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!i&&r[1]!==".")return t;{let d=Number(r),l=""+d;return l.search(/[eE]/)!==-1||a?e.eNotation?d:t:r.indexOf(".")!==-1?l==="0"&&s===""||l===s||i&&l==="-"+s?d:t:o?s===l||i+s===l?d:t:r===l||r===i+l?d:t}}else return t}}function RF(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}PN.exports=AF});var RN=p((Ine,AN)=>{"use strict";var lm=Xc(),us=xN(),IF=ON(),kF=TN(),Rne="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,lm.nameRegexp),am=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=qF,this.parseXml=WF,this.parseTextData=DF,this.resolveNameSpace=MF,this.buildAttributesMap=LF,this.isItStopNode=VF,this.replaceEntitiesValue=jF,this.readStopNodeData=zF,this.saveTextToParentTag=$F,this.addChild=UF}};function qF(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function DF(t,e,r,n,i,o,s){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,i,o);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?dm(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?dm(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function MF(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var FF=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function LF(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){let n=lm.getAllMatches(t,FF),i=n.length,o={};for(let s=0;s<i;s++){let a=this.resolveNameSpace(n[s][1]),d=n[s][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);let u=this.options.attributeValueProcessor(a,d,e);u==null?o[l]=d:typeof u!=typeof d||u!==d?o[l]=u:o[l]=dm(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[l]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=o,s}return o}}var WF=function(t){t=t.replace(/\r\n?/g,`
`);let e=new us("!xml"),r=e,n="",i="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let a=ln(t,">",o,"Closing Tag is not closed."),d=t.substring(o+2,a).trim();if(this.options.removeNSPrefix){let m=d.indexOf(":");m!==-1&&(d=d.substr(m+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&(n=this.saveTextToParentTag(n,r,i));let l=i.substring(i.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=i.lastIndexOf("."),i=i.substring(0,u),r=this.tagsNodeStack.pop(),n="",o=a}else if(t[o+1]==="?"){let a=cm(t,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let d=new us(a.tagName);d.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(d[":@"]=this.buildAttributesMap(a.tagExp,i,a.tagName)),this.addChild(r,d,i)}o=a.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let a=ln(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let d=t.substring(o+4,a-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=a}else if(t.substr(o+1,2)==="!D"){let a=IF(t,o);this.docTypeEntities=a.entities,o=a.i}else if(t.substr(o+1,2)==="!["){let a=ln(t,"]]>",o,"CDATA is not closed.")-2,d=t.substring(o+9,a);if(n=this.saveTextToParentTag(n,r,i),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]);else{let l=this.parseTextData(d,r.tagname,i,!0,!1,!0);l==null&&(l=""),r.add(this.options.textNodeName,l)}o=a+2}else{let a=cm(t,o,this.options.removeNSPrefix),d=a.tagName,l=a.tagExp,u=a.attrExpPresent,m=a.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1));let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),d!==e.tagname&&(i+=i?"."+d:d),this.isItStopNode(this.options.stopNodes,i,d)){let f="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)o=a.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=a.closeIndex;else{let w=this.readStopNodeData(t,d,m+1);if(!w)throw new Error(`Unexpected end of ${d}`);o=w.i,f=w.tagContent}let y=new us(d);d!==l&&u&&(y[":@"]=this.buildAttributesMap(l,i,d)),f&&(f=this.parseTextData(f,d,i,!0,u,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),y.add(this.options.textNodeName,f),this.addChild(r,y,i)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=d):l=l.substr(0,l.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));let f=new us(d);d!==l&&u&&(f[":@"]=this.buildAttributesMap(l,i,d)),this.addChild(r,f,i),i=i.substr(0,i.lastIndexOf("."))}else{let f=new us(d);this.tagsNodeStack.push(r),d!==l&&u&&(f[":@"]=this.buildAttributesMap(l,i,d)),this.addChild(r,f,i),r=f}n="",o=m}}else n+=t[o];return e.child};function UF(t,e,r){let n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}var jF=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function $F(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function VF(t,e,r){let n="*."+r;for(let i in t){let o=t[i];if(n===o||e===o)return!0}return!1}function BF(t,e,r=">"){let n,i="";for(let o=e;o<t.length;o++){let s=t[o];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(t[o+1]===r[1])return{data:i,index:o}}else return{data:i,index:o};else s==="	"&&(s=" ");i+=s}}function ln(t,e,r,n){let i=t.indexOf(e,r);if(i===-1)throw new Error(n);return i+e.length-1}function cm(t,e,r,n=">"){let i=BF(t,e+1,n);if(!i)return;let o=i.data,s=i.index,a=o.search(/\s/),d=o,l=!0;if(a!==-1&&(d=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){let u=d.indexOf(":");u!==-1&&(d=d.substr(u+1),l=d!==i.data.substr(u+1))}return{tagName:d,tagExp:o,closeIndex:s,attrExpPresent:l}}function zF(t,e,r){let n=r,i=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=ln(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(i--,i===0))return{tagContent:t.substring(n,r),i:o};r=o}else if(t[r+1]==="?")r=ln(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=ln(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=ln(t,"]]>",r,"StopNode is not closed.")-2;else{let o=cm(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&i++,r=o.closeIndex)}}function dm(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:kF(t,r)}else return lm.isExist(t)?t:""}AN.exports=am});var qN=p(kN=>{"use strict";function HF(t,e){return IN(t,e)}function IN(t,e,r){let n,i={};for(let o=0;o<t.length;o++){let s=t[o],a=GF(s),d="";if(r===void 0?d=a:d=r+"."+a,a===e.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let l=IN(s[a],e,d),u=QF(l,e);s[":@"]?KF(l,s[":@"],d,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(l)):e.isArray(a,d,u)?i[a]=[l]:i[a]=l}}}return typeof n=="string"?n.length>0&&(i[e.textNodeName]=n):n!==void 0&&(i[e.textNodeName]=n),i}function GF(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function KF(t,e,r,n){if(e){let i=Object.keys(e),o=i.length;for(let s=0;s<o;s++){let a=i[s];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function QF(t,e){let{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}kN.prettify=HF});var MN=p((qne,DN)=>{var{buildOptions:JF}=SN(),YF=RN(),{prettify:XF}=qN(),ZF=im(),um=class{constructor(e){this.externalEntities={},this.options=JF(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=ZF.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new YF(this.options);n.addExternalEntities(this.externalEntities);let i=n.parseXml(e);return this.options.preserveOrder||i===void 0?i:XF(i,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};DN.exports=um});var jN=p((Dne,UN)=>{var eL=`
`;function tL(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=eL),LN(t,e,"",r)}function LN(t,e,r,n){let i="",o=!1;for(let s=0;s<t.length;s++){let a=t[s],d=rL(a),l="";if(r.length===0?l=d:l=`${r}.${d}`,d===e.textNodeName){let y=a[d];nL(l,e)||(y=e.tagValueProcessor(d,y),y=WN(y,e)),o&&(i+=n),i+=y,o=!1;continue}else if(d===e.cdataPropName){o&&(i+=n),i+=`<![CDATA[${a[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){i+=n+`<!--${a[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){let y=FN(a[":@"],e),w=d==="?xml"?"":n,_=a[d][0][e.textNodeName];_=_.length!==0?" "+_:"",i+=w+`<${d}${_}${y}?>`,o=!0;continue}let u=n;u!==""&&(u+=e.indentBy);let m=FN(a[":@"],e),h=n+`<${d}${m}`,f=LN(a[d],e,l,u);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?i+=h+">":i+=h+"/>":(!f||f.length===0)&&e.suppressEmptyNode?i+=h+"/>":f&&f.endsWith(">")?i+=h+`>${f}${n}</${d}>`:(i+=h+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?i+=n+e.indentBy+f+n:i+=f,i+=`</${d}>`),o=!0}return i}function rL(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function FN(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){let i=e.attributeValueProcessor(n,t[n]);i=WN(i,e),i===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${i}"`}return r}function nL(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function WN(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}UN.exports=tL});var VN=p((Mne,$N)=>{"use strict";var iL=jN(),oL={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Rr(t){this.options=Object.assign({},oL,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=cL),this.processTextOrObjNode=sL,this.options.format?(this.indentate=aL,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Rr.prototype.build=function(t){return this.options.preserveOrder?iL(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Rr.prototype.j2x=function(t,e){let r="",n="";for(let i in t)if(!(typeof t[i]>"u"))if(t[i]===null)i[0]==="?"?n+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)n+=this.buildTextValNode(t[i],i,"",e);else if(typeof t[i]!="object"){let o=this.isAttribute(i);if(o)r+=this.buildAttrPairStr(o,""+t[i]);else if(i===this.options.textNodeName){let s=this.options.tagValueProcessor(i,""+t[i]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){let o=t[i].length,s="";for(let a=0;a<o;a++){let d=t[i][a];typeof d>"u"||(d===null?i[0]==="?"?n+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar:typeof d=="object"?this.options.oneListGroup?s+=this.j2x(d,e+1).val:s+=this.processTextOrObjNode(d,i,e):s+=this.buildTextValNode(d,i,"",e))}this.options.oneListGroup&&(s=this.buildObjectNode(s,i,"",e)),n+=s}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let o=Object.keys(t[i]),s=o.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(o[a],""+t[i][o[a]])}else n+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:n}};Rr.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function sL(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Rr.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",i=""),r&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+i}};Rr.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Rr.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,t);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+i+"</"+e+this.tagEndChar}};Rr.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function aL(t){return this.options.indentBy.repeat(t)}function cL(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}$N.exports=Rr});var zN=p((Fne,BN)=>{"use strict";var dL=im(),lL=MN(),uL=VN();BN.exports={XMLParser:lL,XMLValidator:dL,XMLBuilder:uL}});var ir=p(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.de_GetSessionTokenCommand=q.de_GetFederationTokenCommand=q.de_GetCallerIdentityCommand=q.de_GetAccessKeyInfoCommand=q.de_DecodeAuthorizationMessageCommand=q.de_AssumeRoleWithWebIdentityCommand=q.de_AssumeRoleWithSAMLCommand=q.de_AssumeRoleCommand=q.se_GetSessionTokenCommand=q.se_GetFederationTokenCommand=q.se_GetCallerIdentityCommand=q.se_GetAccessKeyInfoCommand=q.se_DecodeAuthorizationMessageCommand=q.se_AssumeRoleWithWebIdentityCommand=q.se_AssumeRoleWithSAMLCommand=q.se_AssumeRoleCommand=void 0;var pL=Ae(),C=S(),mL=zN(),Ir=Ar(),fL=Yc(),hL=async(t,e)=>{let r=Dr,n;return n=Fr({...jL(t,e),Action:"AssumeRole",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_AssumeRoleCommand=hL;var yL=async(t,e)=>{let r=Dr,n;return n=Fr({...$L(t,e),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_AssumeRoleWithSAMLCommand=yL;var gL=async(t,e)=>{let r=Dr,n;return n=Fr({...VL(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_AssumeRoleWithWebIdentityCommand=gL;var _L=async(t,e)=>{let r=Dr,n;return n=Fr({...BL(t,e),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_DecodeAuthorizationMessageCommand=_L;var vL=async(t,e)=>{let r=Dr,n;return n=Fr({...zL(t,e),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_GetAccessKeyInfoCommand=vL;var wL=async(t,e)=>{let r=Dr,n;return n=Fr({...HL(t,e),Action:"GetCallerIdentity",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_GetCallerIdentityCommand=wL;var EL=async(t,e)=>{let r=Dr,n;return n=Fr({...GL(t,e),Action:"GetFederationToken",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_GetFederationTokenCommand=EL;var NL=async(t,e)=>{let r=Dr,n;return n=Fr({...KL(t,e),Action:"GetSessionToken",Version:"2011-06-15"}),qr(e,r,"/",void 0,n)};q.se_GetSessionTokenCommand=NL;var SL=async(t,e)=>{if(t.statusCode>=300)return bL(t,e);let r=await nr(t.body,e),n={};return n=eW(r.AssumeRoleResult,e),{$metadata:Ie(t),...n}};q.de_AssumeRoleCommand=SL;var bL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await pm(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Zc(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ed(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ps(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},xL=async(t,e)=>{if(t.statusCode>=300)return CL(t,e);let r=await nr(t.body,e),n={};return n=tW(r.AssumeRoleWithSAMLResult,e),{$metadata:Ie(t),...n}};q.de_AssumeRoleWithSAMLCommand=xL;var CL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await pm(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await HN(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await GN(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Zc(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ed(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ps(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},OL=async(t,e)=>{if(t.statusCode>=300)return PL(t,e);let r=await nr(t.body,e),n={};return n=rW(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Ie(t),...n}};q.de_AssumeRoleWithWebIdentityCommand=OL;var PL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await pm(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await WL(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await HN(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await GN(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Zc(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ed(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ps(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},TL=async(t,e)=>{if(t.statusCode>=300)return AL(t,e);let r=await nr(t.body,e),n={};return n=nW(r.DecodeAuthorizationMessageResult,e),{$metadata:Ie(t),...n}};q.de_DecodeAuthorizationMessageCommand=TL;var AL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await UL(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},RL=async(t,e)=>{if(t.statusCode>=300)return IL(t,e);let r=await nr(t.body,e),n={};return n=sW(r.GetAccessKeyInfoResult,e),{$metadata:Ie(t),...n}};q.de_GetAccessKeyInfoCommand=RL;var IL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body),i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})},kL=async(t,e)=>{if(t.statusCode>=300)return qL(t,e);let r=await nr(t.body,e),n={};return n=aW(r.GetCallerIdentityResult,e),{$metadata:Ie(t),...n}};q.de_GetCallerIdentityCommand=kL;var qL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body),i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})},DL=async(t,e)=>{if(t.statusCode>=300)return ML(t,e);let r=await nr(t.body,e),n={};return n=cW(r.GetFederationTokenResult,e),{$metadata:Ie(t),...n}};q.de_GetFederationTokenCommand=DL;var ML=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Zc(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ed(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ps(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},FL=async(t,e)=>{if(t.statusCode>=300)return LL(t,e);let r=await nr(t.body,e),n={};return n=dW(r.GetSessionTokenResult,e),{$metadata:Ie(t),...n}};q.de_GetSessionTokenCommand=FL;var LL=async(t,e)=>{let r={...t,body:await Mr(t.body,e)},n=Lr(t,r.body);switch(n){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ps(r,e);default:let i=r.body;return kr({output:t,parsedBody:i.Error,errorCode:n})}},pm=async(t,e)=>{let r=t.body,n=iW(r.Error,e),i=new Ir.ExpiredTokenException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},WL=async(t,e)=>{let r=t.body,n=lW(r.Error,e),i=new Ir.IDPCommunicationErrorException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},HN=async(t,e)=>{let r=t.body,n=uW(r.Error,e),i=new Ir.IDPRejectedClaimException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},UL=async(t,e)=>{let r=t.body,n=pW(r.Error,e),i=new Ir.InvalidAuthorizationMessageException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},GN=async(t,e)=>{let r=t.body,n=mW(r.Error,e),i=new Ir.InvalidIdentityTokenException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},Zc=async(t,e)=>{let r=t.body,n=fW(r.Error,e),i=new Ir.MalformedPolicyDocumentException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},ed=async(t,e)=>{let r=t.body,n=hW(r.Error,e),i=new Ir.PackedPolicyTooLargeException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},ps=async(t,e)=>{let r=t.body,n=yW(r.Error,e),i=new Ir.RegionDisabledException({$metadata:Ie(t),...n});return(0,C.decorateServiceException)(i,r)},jL=(t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let n=td(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let n=KN(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,o])=>{let s=`Tags.${i}`;r[s]=o})}if(t.TransitiveTagKeys!=null){let n=ZL(t.TransitiveTagKeys,e);t.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([i,o])=>{let s=`TransitiveTagKeys.${i}`;r[s]=o})}if(t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),t.ProvidedContexts!=null){let n=YL(t.ProvidedContexts,e);t.ProvidedContexts?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([i,o])=>{let s=`ProvidedContexts.${i}`;r[s]=o})}return r},$L=(t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.PrincipalArn!=null&&(r.PrincipalArn=t.PrincipalArn),t.SAMLAssertion!=null&&(r.SAMLAssertion=t.SAMLAssertion),t.PolicyArns!=null){let n=td(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},VL=(t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let n=td(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},BL=(t,e)=>{let r={};return t.EncodedMessage!=null&&(r.EncodedMessage=t.EncodedMessage),r},zL=(t,e)=>{let r={};return t.AccessKeyId!=null&&(r.AccessKeyId=t.AccessKeyId),r},HL=(t,e)=>({}),GL=(t,e)=>{let r={};if(t.Name!=null&&(r.Name=t.Name),t.Policy!=null&&(r.Policy=t.Policy),t.PolicyArns!=null){let n=td(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,o])=>{let s=`PolicyArns.${i}`;r[s]=o})}if(t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let n=KN(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,o])=>{let s=`Tags.${i}`;r[s]=o})}return r},KL=(t,e)=>{let r={};return t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),r},td=(t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=QL(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},QL=(t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},JL=(t,e)=>{let r={};return t.ProviderArn!=null&&(r.ProviderArn=t.ProviderArn),t.ContextAssertion!=null&&(r.ContextAssertion=t.ContextAssertion),r},YL=(t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=JL(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},XL=(t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},ZL=(t,e)=>{let r={},n=1;for(let i of t)i!==null&&(r[`member.${n}`]=i,n++);return r},KN=(t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=XL(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},mm=(t,e)=>{let r={};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,C.expectString)(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=(0,C.expectString)(t.Arn)),r},eW=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=ms(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=mm(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,C.strictParseInt32)(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,C.expectString)(t.SourceIdentity)),r},tW=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=ms(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=mm(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,C.strictParseInt32)(t.PackedPolicySize)),t.Subject!==void 0&&(r.Subject=(0,C.expectString)(t.Subject)),t.SubjectType!==void 0&&(r.SubjectType=(0,C.expectString)(t.SubjectType)),t.Issuer!==void 0&&(r.Issuer=(0,C.expectString)(t.Issuer)),t.Audience!==void 0&&(r.Audience=(0,C.expectString)(t.Audience)),t.NameQualifier!==void 0&&(r.NameQualifier=(0,C.expectString)(t.NameQualifier)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,C.expectString)(t.SourceIdentity)),r},rW=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=ms(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,C.expectString)(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=mm(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,C.strictParseInt32)(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=(0,C.expectString)(t.Provider)),t.Audience!==void 0&&(r.Audience=(0,C.expectString)(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,C.expectString)(t.SourceIdentity)),r},ms=(t,e)=>{let r={};return t.AccessKeyId!==void 0&&(r.AccessKeyId=(0,C.expectString)(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,C.expectString)(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=(0,C.expectString)(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=(0,C.expectNonNull)((0,C.parseRfc3339DateTimeWithOffset)(t.Expiration))),r},nW=(t,e)=>{let r={};return t.DecodedMessage!==void 0&&(r.DecodedMessage=(0,C.expectString)(t.DecodedMessage)),r},iW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},oW=(t,e)=>{let r={};return t.FederatedUserId!==void 0&&(r.FederatedUserId=(0,C.expectString)(t.FederatedUserId)),t.Arn!==void 0&&(r.Arn=(0,C.expectString)(t.Arn)),r},sW=(t,e)=>{let r={};return t.Account!==void 0&&(r.Account=(0,C.expectString)(t.Account)),r},aW=(t,e)=>{let r={};return t.UserId!==void 0&&(r.UserId=(0,C.expectString)(t.UserId)),t.Account!==void 0&&(r.Account=(0,C.expectString)(t.Account)),t.Arn!==void 0&&(r.Arn=(0,C.expectString)(t.Arn)),r},cW=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=ms(t.Credentials,e)),t.FederatedUser!==void 0&&(r.FederatedUser=oW(t.FederatedUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,C.strictParseInt32)(t.PackedPolicySize)),r},dW=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=ms(t.Credentials,e)),r},lW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},uW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},pW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},mW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},fW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},hW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},yW=(t,e)=>{let r={};return t.message!==void 0&&(r.message=(0,C.expectString)(t.message)),r},Ie=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),gW=(t,e)=>(0,C.collectBody)(t,e).then(r=>e.utf8Encoder(r)),kr=(0,C.withBaseException)(fL.STSServiceException),qr=async(t,e,r,n,i)=>{let{hostname:o,protocol:s="https",port:a,path:d}=await t.endpoint(),l={protocol:s,hostname:o,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:e};return n!==void 0&&(l.hostname=n),i!==void 0&&(l.body=i),new pL.HttpRequest(l)},Dr={"content-type":"application/x-www-form-urlencoded"},nr=(t,e)=>gW(t,e).then(r=>{if(r.length){let n=new mL.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i=n.parse(r),o="#text",s=Object.keys(i)[0],a=i[s];return a[o]&&(a[s]=a[o],delete a[o]),(0,C.getValueFromTextNode)(a)}return{}}),Mr=async(t,e)=>{let r=await nr(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Fr=t=>Object.entries(t).map(([e,r])=>(0,C.extendedEncodeURIComponent)(e)+"="+(0,C.extendedEncodeURIComponent)(r)).join("&"),Lr=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var rd=p(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.AssumeRoleCommand=ri.$Command=void 0;var _W=Xt(),vW=H(),wW=re(),JN=S();Object.defineProperty(ri,"$Command",{enumerable:!0,get:function(){return JN.Command}});var EW=z(),NW=Ar(),QN=ir(),fm=class t extends JN.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,wW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,vW.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,_W.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:NW.AssumeRoleResponseFilterSensitiveLog,[EW.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRole"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,QN.se_AssumeRoleCommand)(e,r)}deserialize(e,r){return(0,QN.de_AssumeRoleCommand)(e,r)}};ri.AssumeRoleCommand=fm});var nd=p(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.AssumeRoleWithWebIdentityCommand=ni.$Command=void 0;var SW=H(),bW=re(),ZN=S();Object.defineProperty(ni,"$Command",{enumerable:!0,get:function(){return ZN.Command}});var xW=z(),YN=Ar(),XN=ir(),hm=class t extends ZN.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,bW.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,SW.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:YN.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:YN.AssumeRoleWithWebIdentityResponseFilterSensitiveLog,[xW.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRoleWithWebIdentity"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,XN.se_AssumeRoleWithWebIdentityCommand)(e,r)}deserialize(e,r){return(0,XN.de_AssumeRoleWithWebIdentityCommand)(e,r)}};ni.AssumeRoleWithWebIdentityCommand=hm});var ym=p(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.decorateDefaultCredentialProvider=Dt.getDefaultRoleAssumerWithWebIdentity=Dt.getDefaultRoleAssumer=void 0;var CW=rd(),OW=nd(),eS="us-east-1",tS=t=>typeof t!="function"?t===void 0?eS:t:async()=>{try{return await t()}catch{return eS}},PW=(t,e)=>{let r,n;return async(i,o)=>{if(n=i,!r){let{logger:a,region:d,requestHandler:l}=t;r=new e({logger:a,credentialDefaultProvider:()=>async()=>n,region:tS(d||t.region),...l?{requestHandler:l}:{}})}let{Credentials:s}=await r.send(new CW.AssumeRoleCommand(o));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}};Dt.getDefaultRoleAssumer=PW;var TW=(t,e)=>{let r;return async n=>{if(!r){let{logger:o,region:s,requestHandler:a}=t;r=new e({logger:o,region:tS(s||t.region),...a?{requestHandler:a}:{}})}let{Credentials:i}=await r.send(new OW.AssumeRoleWithWebIdentityCommand(n));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}};Dt.getDefaultRoleAssumerWithWebIdentity=TW;var AW=t=>e=>t({roleAssumer:(0,Dt.getDefaultRoleAssumer)(e,e.stsClientCtor),roleAssumerWithWebIdentity:(0,Dt.getDefaultRoleAssumerWithWebIdentity)(e,e.stsClientCtor),...e});Dt.decorateDefaultCredentialProvider=AW});var nS=p(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.emitWarningIfUnsupportedVersion=void 0;var rS=!1,RW=t=>{t&&!rS&&parseInt(t.substring(1,t.indexOf(".")))<16&&(rS=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))};id.emitWarningIfUnsupportedVersion=RW});var iS=p(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});var IW=(W(),F(L));IW.__exportStar(nS(),gm)});var oS=p(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr._toNum=Wr._toBool=Wr._toStr=void 0;var kW=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t};Wr._toStr=kW;var qW=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t};Wr._toBool=qW;var DW=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t};Wr._toNum=DW});var sS=p(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.awsExpectUnion=void 0;var MW=S(),FW=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,MW.expectUnion)(t)};od.awsExpectUnion=FW});var cS=p(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var aS=(W(),F(L));aS.__exportStar(oS(),sd);aS.__exportStar(sS(),sd)});var fs=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var dS=(W(),F(L));dS.__exportStar(iS(),ad);dS.__exportStar(cS(),ad)});var lS=p(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.fromEnv=ke.ENV_EXPIRATION=ke.ENV_SESSION=ke.ENV_SECRET=ke.ENV_KEY=void 0;var LW=ae();ke.ENV_KEY="AWS_ACCESS_KEY_ID";ke.ENV_SECRET="AWS_SECRET_ACCESS_KEY";ke.ENV_SESSION="AWS_SESSION_TOKEN";ke.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var WW=()=>async()=>{let t=process.env[ke.ENV_KEY],e=process.env[ke.ENV_SECRET],r=process.env[ke.ENV_SESSION],n=process.env[ke.ENV_EXPIRATION];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new LW.CredentialsProviderError("Unable to find environment variable credentials.")};ke.fromEnv=WW});var vm=p(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});var UW=(W(),F(L));UW.__exportStar(lS(),_m)});var ud=p((Jne,xS)=>{var ld=Object.defineProperty,jW=Object.getOwnPropertyDescriptor,$W=Object.getOwnPropertyNames,VW=Object.prototype.hasOwnProperty,he=(t,e)=>ld(t,"name",{value:e,configurable:!0}),BW=(t,e)=>{for(var r in e)ld(t,r,{get:e[r],enumerable:!0})},zW=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $W(e))!VW.call(t,i)&&i!==r&&ld(t,i,{get:()=>e[i],enumerable:!(n=jW(e,i))||n.enumerable});return t},HW=t=>zW(ld({},"__esModule",{value:!0}),t),fS={};BW(fS,{DEFAULT_MAX_RETRIES:()=>_S,DEFAULT_TIMEOUT:()=>gS,ENV_CMDS_AUTH_TOKEN:()=>Nm,ENV_CMDS_FULL_URI:()=>cd,ENV_CMDS_RELATIVE_URI:()=>dd,Endpoint:()=>ES,fromContainerMetadata:()=>JW,fromInstanceMetadata:()=>gU,getInstanceMetadataEndpoint:()=>SS,httpRequest:()=>ii,providerConfigFromInit:()=>Sm});xS.exports=HW(fS);var GW=$("url"),Mt=ae(),KW=$("buffer"),QW=$("http");function ii(t){return new Promise((e,r)=>{var n;let i=(0,QW.request)({method:"GET",...t,hostname:(n=t.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});i.on("error",o=>{r(Object.assign(new Mt.ProviderError("Unable to connect to instance metadata service"),o)),i.destroy()}),i.on("timeout",()=>{r(new Mt.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Mt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),i.destroy());let a=[];o.on("data",d=>{a.push(d)}),o.on("end",()=>{e(KW.Buffer.concat(a)),i.destroy()})}),i.end()})}he(ii,"httpRequest");var hS=he(t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials"),yS=he(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)}),"fromImdsCredentials"),gS=1e3,_S=0,Sm=he(({maxRetries:t=_S,timeout:e=gS})=>({maxRetries:t,timeout:e}),"providerConfigFromInit"),Em=he((t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},"retry"),cd="AWS_CONTAINER_CREDENTIALS_FULL_URI",dd="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Nm="AWS_CONTAINER_AUTHORIZATION_TOKEN",JW=he((t={})=>{let{timeout:e,maxRetries:r}=Sm(t);return()=>Em(async()=>{let n=await tU(),i=JSON.parse(await YW(e,n));if(!hS(i))throw new Mt.CredentialsProviderError("Invalid response received from instance metadata service.");return yS(i)},r)},"fromContainerMetadata"),YW=he(async(t,e)=>(process.env[Nm]&&(e.headers={...e.headers,Authorization:process.env[Nm]}),(await ii({...e,timeout:t})).toString()),"requestFromEcsImds"),XW="169.254.170.2",ZW={localhost:!0,"127.0.0.1":!0},eU={"http:":!0,"https:":!0},tU=he(async()=>{if(process.env[dd])return{hostname:XW,path:process.env[dd]};if(process.env[cd]){let t=(0,GW.parse)(process.env[cd]);if(!t.hostname||!(t.hostname in ZW))throw new Mt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in eU))throw new Mt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Mt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${dd} or ${cd} environment variable is set`,!1)},"getCmdsUri"),vS=class wS extends Mt.CredentialsProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,wS.prototype)}};he(vS,"InstanceMetadataV1FallbackError");var rU=vS,bm=er(),nU=an(),ES=(t=>(t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]",t))(ES||{}),iU="AWS_EC2_METADATA_SERVICE_ENDPOINT",oU="ec2_metadata_service_endpoint",sU={environmentVariableSelector:t=>t[iU],configFileSelector:t=>t[oU],default:void 0},NS=(t=>(t.IPv4="IPv4",t.IPv6="IPv6",t))(NS||{}),aU="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",cU="ec2_metadata_service_endpoint_mode",dU={environmentVariableSelector:t=>t[aU],configFileSelector:t=>t[cU],default:"IPv4"},SS=he(async()=>(0,nU.parseUrl)(await lU()||await uU()),"getInstanceMetadataEndpoint"),lU=he(async()=>(0,bm.loadConfig)(sU)(),"getFromEndpointConfig"),uU=he(async()=>{let t=await(0,bm.loadConfig)(dU)();switch(t){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(NS)}`)}},"getFromEndpointModeConfig"),pU=5*60,mU=5*60,fU="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",uS=he((t,e)=>{let r=pU+Math.floor(Math.random()*mU),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+fU);let i=t.originalExpiration??t.expiration;return{...t,...i?{originalExpiration:i}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),hU=he((t,e={})=>{let r=e?.logger||console,n;return async()=>{let i;try{i=await t(),i.expiration&&i.expiration.getTime()<Date.now()&&(i=uS(i,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),i=uS(n,r);else throw o}return n=i,i}},"staticStabilityProvider"),bS="/latest/meta-data/iam/security-credentials/",yU="/latest/api/token",wm="AWS_EC2_METADATA_V1_DISABLED",pS="ec2_metadata_v1_disabled",mS="x-aws-ec2-metadata-token",gU=he((t={})=>hU(_U(t),{logger:t.logger}),"fromInstanceMetadata"),_U=he(t=>{let e=!1,{logger:r,profile:n}=t,{timeout:i,maxRetries:o}=Sm(t),s=he(async(a,d)=>{var l;if(e||((l=d.headers)==null?void 0:l[mS])==null){let h=!1,f=!1,y=await(0,bm.loadConfig)({environmentVariableSelector:w=>{let _=w[wm];if(f=!!_&&_!=="false",_===void 0)throw new Mt.CredentialsProviderError(`${wm} not set in env, checking config file next.`);return f},configFileSelector:w=>{let _=w[pS];return h=!!_&&_!=="false",h},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||y){let w=[];throw t.ec2MetadataV1Disabled&&w.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),h&&w.push(`config file profile (${pS})`),f&&w.push(`process environment variable (${wm})`),new rU(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${w.join(", ")}].`)}}let m=(await Em(async()=>{let h;try{h=await wU(d)}catch(f){throw f.statusCode===401&&(e=!1),f}return h},a)).trim();return Em(async()=>{let h;try{h=await EU(m,d)}catch(f){throw f.statusCode===401&&(e=!1),f}return h},a)},"getCredentials");return async()=>{let a=await SS();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),s(o,{...a,timeout:i});{let d;try{d=(await vU({...a,timeout:i})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),s(o,{...a,timeout:i})}return s(o,{...a,headers:{[mS]:d},timeout:i})}}},"getInstanceImdsProvider"),vU=he(async t=>ii({...t,path:yU,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),wU=he(async t=>(await ii({...t,path:bS})).toString(),"getProfile"),EU=he(async(t,e)=>{let r=JSON.parse((await ii({...e,path:bS+t})).toString());if(!hS(r))throw new Mt.CredentialsProviderError("Invalid response received from instance metadata service.");return yS(r)},"getCredentialsFromProfile")});var OS=p(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.resolveCredentialSource=void 0;var NU=vm(),CS=ud(),SU=ae(),bU=(t,e)=>{let r={EcsContainer:CS.fromContainerMetadata,Ec2InstanceMetadata:CS.fromInstanceMetadata,Environment:NU.fromEnv};if(t in r)return r[t]();throw new SU.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};pd.resolveCredentialSource=bU});var PS=p(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.resolveAssumeRoleCredentials=oi.isAssumeRoleProfile=void 0;var xm=ae(),xU=_t(),CU=OS(),OU=Cm(),PU=t=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(TU(t)||AU(t));oi.isAssumeRoleProfile=PU;var TU=t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u",AU=t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u",RU=async(t,e,r,n={})=>{let i=e[t];if(!r.roleAssumer)throw new xm.CredentialsProviderError(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=i;if(o&&o in n)throw new xm.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,xU.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let s=o?(0,OU.resolveProfileData)(o,e,r,{...n,[o]:!0}):(0,CU.resolveCredentialSource)(i.credential_source,t)(),a={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:d}=i;if(d){if(!r.mfaCodeProvider)throw new xm.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=d,a.TokenCode=await r.mfaCodeProvider(d)}let l=await s;return r.roleAssumer(l,a)};oi.resolveAssumeRoleCredentials=RU});var TS=p(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.getValidatedProcessCredentials=void 0;var IU=(t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}};md.getValidatedProcessCredentials=IU});var AS=p(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.resolveProcessCredentials=void 0;var Om=ae(),kU=$("child_process"),qU=$("util"),DU=TS(),MU=async(t,e)=>{let r=e[t];if(e[t]){let n=r.credential_process;if(n!==void 0){let i=(0,qU.promisify)(kU.exec);try{let{stdout:o}=await i(n),s;try{s=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return(0,DU.getValidatedProcessCredentials)(t,s)}catch(o){throw new Om.CredentialsProviderError(o.message)}}else throw new Om.CredentialsProviderError(`Profile ${t} did not contain credential_process.`)}else throw new Om.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`)};fd.resolveProcessCredentials=MU});var IS=p(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.fromProcess=void 0;var RS=_t(),FU=AS(),LU=(t={})=>async()=>{let e=await(0,RS.parseKnownFiles)(t);return(0,FU.resolveProcessCredentials)((0,RS.getProfileName)(t),e)};hd.fromProcess=LU});var Tm=p(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var WU=(W(),F(L));WU.__exportStar(IS(),Pm)});var kS=p(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.resolveProcessCredentials=si.isProcessProfile=void 0;var UU=Tm(),jU=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string";si.isProcessProfile=jU;var $U=async(t,e)=>(0,UU.fromProcess)({...t,profile:e})();si.resolveProcessCredentials=$U});var Am=p(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.isSsoProfile=void 0;var VU=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string");yd.isSsoProfile=VU});var qS=p(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.resolveClientEndpointParameters=void 0;var BU=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});gd.resolveClientEndpointParameters=BU});var DS=p((sie,zU)=>{zU.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.451.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.451.0","@aws-sdk/middleware-host-header":"3.451.0","@aws-sdk/middleware-logger":"3.451.0","@aws-sdk/middleware-recursion-detection":"3.451.0","@aws-sdk/middleware-user-agent":"3.451.0","@aws-sdk/region-config-resolver":"3.451.0","@aws-sdk/types":"3.451.0","@aws-sdk/util-endpoints":"3.451.0","@aws-sdk/util-user-agent-browser":"3.451.0","@aws-sdk/util-user-agent-node":"3.451.0","@smithy/config-resolver":"^2.0.18","@smithy/fetch-http-handler":"^2.2.6","@smithy/hash-node":"^2.0.15","@smithy/invalid-dependency":"^2.0.13","@smithy/middleware-content-length":"^2.0.15","@smithy/middleware-endpoint":"^2.2.0","@smithy/middleware-retry":"^2.0.20","@smithy/middleware-serde":"^2.0.13","@smithy/middleware-stack":"^2.0.7","@smithy/node-config-provider":"^2.1.5","@smithy/node-http-handler":"^2.1.9","@smithy/protocol-http":"^3.0.9","@smithy/smithy-client":"^2.1.15","@smithy/types":"^2.5.0","@smithy/url-parser":"^2.0.13","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.19","@smithy/util-defaults-mode-node":"^2.0.25","@smithy/util-endpoints":"^1.0.4","@smithy/util-retry":"^2.0.6","@smithy/util-utf8":"^2.0.2",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Rm=p(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.crtAvailability=void 0;_d.crtAvailability={isCrtAvailable:!1}});var MS=p(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.isCrtAvailable=void 0;var HU=Rm(),GU=()=>HU.crtAvailability.isCrtAvailable?["md/crt-avail"]:null;vd.isCrtAvailable=GU});var hs=p(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.defaultUserAgent=at.UA_APP_ID_INI_NAME=at.UA_APP_ID_ENV_NAME=at.crtAvailability=void 0;var KU=er(),FS=$("os"),Im=$("process"),QU=MS(),JU=Rm();Object.defineProperty(at,"crtAvailability",{enumerable:!0,get:function(){return JU.crtAvailability}});at.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";at.UA_APP_ID_INI_NAME="sdk-ua-app-id";var YU=({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],["ua","2.0"],[`os/${(0,FS.platform)()}`,(0,FS.release)()],["lang/js"],["md/nodejs",`${Im.versions.node}`]],n=(0,QU.isCrtAvailable)();n&&r.push(n),t&&r.push([`api/${t}`,e]),Im.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Im.env.AWS_EXECUTION_ENV}`]);let i=(0,KU.loadConfig)({environmentVariableSelector:s=>s[at.UA_APP_ID_ENV_NAME],configFileSelector:s=>s[at.UA_APP_ID_INI_NAME],default:void 0})(),o;return async()=>{if(!o){let s=await i;o=s?[...r,[`app/${s}`]]:[...r]}return o}};at.defaultUserAgent=YU});var ys=p((uie,$S)=>{var wd=Object.defineProperty,XU=Object.getOwnPropertyDescriptor,ZU=Object.getOwnPropertyNames,ej=Object.prototype.hasOwnProperty,WS=(t,e)=>wd(t,"name",{value:e,configurable:!0}),tj=(t,e)=>{for(var r in e)wd(t,r,{get:e[r],enumerable:!0})},rj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ZU(e))!ej.call(t,i)&&i!==r&&wd(t,i,{get:()=>e[i],enumerable:!(n=XU(e,i))||n.enumerable});return t},nj=t=>rj(wd({},"__esModule",{value:!0}),t),US={};tj(US,{Hash:()=>sj});$S.exports=nj(US);var km=$n(),ij=it(),oj=$("buffer"),LS=$("crypto"),jS=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,ij.toUint8Array)(qm(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,LS.createHmac)(this.algorithmIdentifier,qm(this.secret)):(0,LS.createHash)(this.algorithmIdentifier)}};WS(jS,"Hash");var sj=jS;function qm(t,e){return oj.Buffer.isBuffer(t)?t:typeof t=="string"?(0,km.fromString)(t,e):ArrayBuffer.isView(t)?(0,km.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,km.fromArrayBuffer)(t)}WS(qm,"castSourceData")});var gs=p((pie,zS)=>{var Ed=Object.defineProperty,aj=Object.getOwnPropertyDescriptor,cj=Object.getOwnPropertyNames,dj=Object.prototype.hasOwnProperty,lj=(t,e)=>Ed(t,"name",{value:e,configurable:!0}),uj=(t,e)=>{for(var r in e)Ed(t,r,{get:e[r],enumerable:!0})},pj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cj(e))!dj.call(t,i)&&i!==r&&Ed(t,i,{get:()=>e[i],enumerable:!(n=aj(e,i))||n.enumerable});return t},mj=t=>pj(Ed({},"__esModule",{value:!0}),t),BS={};uj(BS,{calculateBodyLength:()=>fj});zS.exports=mj(BS);var VS=$("fs"),fj=lj(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,VS.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,VS.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength")});var sb=p(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.ruleSet=void 0;var rb="required",dt="fn",lt="argv",di="ref",HS=!0,GS="isSet",_s="booleanEquals",ai="error",ci="endpoint",or="tree",Dm="PartitionResult",Mm="getAttr",KS={[rb]:!1,type:"String"},QS={[rb]:!0,default:!1,type:"Boolean"},JS={[di]:"Endpoint"},nb={[dt]:_s,[lt]:[{[di]:"UseFIPS"},!0]},ib={[dt]:_s,[lt]:[{[di]:"UseDualStack"},!0]},ct={},YS={[dt]:Mm,[lt]:[{[di]:Dm},"supportsFIPS"]},ob={[di]:Dm},XS={[dt]:_s,[lt]:[!0,{[dt]:Mm,[lt]:[ob,"supportsDualStack"]}]},ZS=[nb],eb=[ib],tb=[{[di]:"Region"}],hj={version:"1.0",parameters:{Region:KS,UseDualStack:QS,UseFIPS:QS,Endpoint:KS},rules:[{conditions:[{[dt]:GS,[lt]:[JS]}],rules:[{conditions:ZS,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ai},{conditions:eb,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ai},{endpoint:{url:JS,properties:ct,headers:ct},type:ci}],type:or},{conditions:[{[dt]:GS,[lt]:tb}],rules:[{conditions:[{[dt]:"aws.partition",[lt]:tb,assign:Dm}],rules:[{conditions:[nb,ib],rules:[{conditions:[{[dt]:_s,[lt]:[HS,YS]},XS],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:ci}],type:or},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ai}],type:or},{conditions:ZS,rules:[{conditions:[{[dt]:_s,[lt]:[YS,HS]}],rules:[{conditions:[{[dt]:"stringEquals",[lt]:[{[dt]:Mm,[lt]:[ob,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:ct,headers:ct},type:ci},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:ci}],type:or},{error:"FIPS is enabled but this partition does not support FIPS",type:ai}],type:or},{conditions:eb,rules:[{conditions:[XS],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:ci}],type:or},{error:"DualStack is enabled but this partition does not support DualStack",type:ai}],type:or},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:ci}],type:or}],type:or},{error:"Invalid Configuration: Missing Region",type:ai}]};Nd.ruleSet=hj});var ab=p(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.defaultEndpointResolver=void 0;var yj=Rt(),gj=sb(),_j=(t,e={})=>(0,yj.resolveEndpoint)(gj.ruleSet,{endpointParams:t,logger:e.logger});Sd.defaultEndpointResolver=_j});var lb=p(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.getRuntimeConfig=void 0;var vj=S(),wj=an(),cb=Qn(),db=it(),Ej=ab(),Nj=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??cb.fromBase64,base64Encoder:t?.base64Encoder??cb.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Ej.defaultEndpointResolver,extensions:t?.extensions??[],logger:t?.logger??new vj.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??wj.parseUrl,utf8Decoder:t?.utf8Decoder??db.fromUtf8,utf8Encoder:t?.utf8Encoder??db.toUtf8});bd.getRuntimeConfig=Nj});var ws=p((yie,yb)=>{var Sj=Object.create,vs=Object.defineProperty,bj=Object.getOwnPropertyDescriptor,xj=Object.getOwnPropertyNames,Cj=Object.getPrototypeOf,Oj=Object.prototype.hasOwnProperty,Fm=(t,e)=>vs(t,"name",{value:e,configurable:!0}),Pj=(t,e)=>{for(var r in e)vs(t,r,{get:e[r],enumerable:!0})},fb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xj(e))!Oj.call(t,i)&&i!==r&&vs(t,i,{get:()=>e[i],enumerable:!(n=bj(e,i))||n.enumerable});return t},Tj=(t,e,r)=>(r=t!=null?Sj(Cj(t)):{},fb(e||!t||!t.__esModule?vs(r,"default",{value:t,enumerable:!0}):r,t)),Aj=t=>fb(vs({},"__esModule",{value:!0}),t),hb={};Pj(hb,{resolveDefaultsModeConfig:()=>Uj});yb.exports=Aj(hb);var Rj=kt(),ub=er(),Ij=ae(),kj="AWS_EXECUTION_ENV",pb="AWS_REGION",mb="AWS_DEFAULT_REGION",qj="AWS_EC2_METADATA_DISABLED",Dj=["in-region","cross-region","mobile","standard","legacy"],Mj="/latest/meta-data/placement/region",Fj="AWS_DEFAULTS_MODE",Lj="defaults_mode",Wj={environmentVariableSelector:t=>t[Fj],configFileSelector:t=>t[Lj],default:"legacy"},Uj=Fm(({region:t=(0,ub.loadConfig)(Rj.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,ub.loadConfig)(Wj)}={})=>(0,Ij.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return jj(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Dj.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),jj=Fm(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await $j();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),$j=Fm(async()=>{if(process.env[kj]&&(process.env[pb]||process.env[mb]))return process.env[pb]??process.env[mb];if(!process.env[qj])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>Tj(ud())),r=await t();return(await e({...r,path:Mj})).toString()}catch{}},"inferPhysicalRegion")});var vb=p(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.getRuntimeConfig=void 0;var Vj=(W(),F(L)),Bj=Vj.__importDefault(DS()),zj=fs(),Hj=hs(),xd=kt(),Gj=ys(),gb=tr(),Es=er(),_b=Jn(),Kj=gs(),Qj=Kn(),Jj=lb(),Yj=S(),Xj=ws(),Zj=S(),e$=t=>{(0,Zj.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Xj.resolveDefaultsModeConfig)(t),r=()=>e().then(Yj.loadConfigsForDefaultMode),n=(0,Jj.getRuntimeConfig)(t);return(0,zj.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Kj.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Hj.defaultUserAgent)({serviceId:n.serviceId,clientVersion:Bj.default.version}),maxAttempts:t?.maxAttempts??(0,Es.loadConfig)(gb.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Es.loadConfig)(xd.NODE_REGION_CONFIG_OPTIONS,xd.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new _b.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Es.loadConfig)({...gb.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Qj.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Gj.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??_b.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Es.loadConfig)(xd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Es.loadConfig)(xd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Cd.getRuntimeConfig=e$});var wb=p(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.resolveAwsRegionExtensionConfiguration=li.getAwsRegionExtensionConfiguration=void 0;var t$=t=>{let e=async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=t.region;return typeof r=="string"?r:r()};return{setRegion(r){e=r},region(){return e}}};li.getAwsRegionExtensionConfiguration=t$;var r$=t=>({region:t.region()});li.resolveAwsRegionExtensionConfiguration=r$});var Eb=p(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.NODE_REGION_CONFIG_FILE_OPTIONS=ut.NODE_REGION_CONFIG_OPTIONS=ut.REGION_INI_NAME=ut.REGION_ENV_NAME=void 0;ut.REGION_ENV_NAME="AWS_REGION";ut.REGION_INI_NAME="region";ut.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:t=>t[ut.REGION_ENV_NAME],configFileSelector:t=>t[ut.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};ut.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var Lm=p(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.isFipsRegion=void 0;var n$=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"));Od.isFipsRegion=n$});var Nb=p(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.getRealRegion=void 0;var i$=Lm(),o$=t=>(0,i$.isFipsRegion)(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t;Pd.getRealRegion=o$});var bb=p(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.resolveRegionConfig=void 0;var Sb=Nb(),s$=Lm(),a$=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return(0,Sb.getRealRegion)(e);let n=await e();return(0,Sb.getRealRegion)(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return(0,s$.isFipsRegion)(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};Td.resolveRegionConfig=a$});var Cb=p(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});var xb=(W(),F(L));xb.__exportStar(Eb(),Ad);xb.__exportStar(bb(),Ad)});var Ns=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var Ob=(W(),F(L));Ob.__exportStar(wb(),Rd);Ob.__exportStar(Cb(),Rd)});var Rb=p(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.resolveRuntimeExtensions=void 0;var Pb=Ns(),Tb=Ae(),Ab=S(),Wm=t=>t,c$=(t,e)=>{let r={...Wm((0,Pb.getAwsRegionExtensionConfiguration)(t)),...Wm((0,Ab.getDefaultExtensionConfiguration)(t)),...Wm((0,Tb.getHttpHandlerExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,Pb.resolveAwsRegionExtensionConfiguration)(r),...(0,Ab.resolveDefaultRuntimeConfig)(r),...(0,Tb.resolveHttpHandlerRuntimeConfig)(r)}};Id.resolveRuntimeExtensions=c$});var Ss=p(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.SSOClient=ui.__Client=void 0;var Ib=Lo(),d$=Wo(),l$=Uo(),kb=Ho(),u$=kt(),p$=Go(),m$=H(),qb=tr(),Db=S();Object.defineProperty(ui,"__Client",{enumerable:!0,get:function(){return Db.Client}});var f$=qS(),h$=vb(),y$=Rb(),Um=class extends Db.Client{constructor(...[e]){let r=(0,h$.getRuntimeConfig)(e||{}),n=(0,f$.resolveClientEndpointParameters)(r),i=(0,u$.resolveRegionConfig)(n),o=(0,m$.resolveEndpointConfig)(i),s=(0,qb.resolveRetryConfig)(o),a=(0,Ib.resolveHostHeaderConfig)(s),d=(0,kb.resolveUserAgentConfig)(a),l=(0,y$.resolveRuntimeExtensions)(d,e?.extensions||[]);super(l),this.config=l,this.middlewareStack.use((0,qb.getRetryPlugin)(this.config)),this.middlewareStack.use((0,p$.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ib.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,d$.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,l$.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,kb.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};ui.SSOClient=Um});var kd=p(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.SSOServiceException=pi.__ServiceException=void 0;var Mb=S();Object.defineProperty(pi,"__ServiceException",{enumerable:!0,get:function(){return Mb.ServiceException}});var jm=class t extends Mb.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};pi.SSOServiceException=jm});var un=p(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.LogoutRequestFilterSensitiveLog=ie.ListAccountsRequestFilterSensitiveLog=ie.ListAccountRolesRequestFilterSensitiveLog=ie.GetRoleCredentialsResponseFilterSensitiveLog=ie.RoleCredentialsFilterSensitiveLog=ie.GetRoleCredentialsRequestFilterSensitiveLog=ie.UnauthorizedException=ie.TooManyRequestsException=ie.ResourceNotFoundException=ie.InvalidRequestException=void 0;var mi=S(),qd=kd(),$m=class t extends qd.SSOServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};ie.InvalidRequestException=$m;var Vm=class t extends qd.SSOServiceException{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};ie.ResourceNotFoundException=Vm;var Bm=class t extends qd.SSOServiceException{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};ie.TooManyRequestsException=Bm;var zm=class t extends qd.SSOServiceException{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};ie.UnauthorizedException=zm;var g$=t=>({...t,...t.accessToken&&{accessToken:mi.SENSITIVE_STRING}});ie.GetRoleCredentialsRequestFilterSensitiveLog=g$;var _$=t=>({...t,...t.secretAccessKey&&{secretAccessKey:mi.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:mi.SENSITIVE_STRING}});ie.RoleCredentialsFilterSensitiveLog=_$;var v$=t=>({...t,...t.roleCredentials&&{roleCredentials:(0,ie.RoleCredentialsFilterSensitiveLog)(t.roleCredentials)}});ie.GetRoleCredentialsResponseFilterSensitiveLog=v$;var w$=t=>({...t,...t.accessToken&&{accessToken:mi.SENSITIVE_STRING}});ie.ListAccountRolesRequestFilterSensitiveLog=w$;var E$=t=>({...t,...t.accessToken&&{accessToken:mi.SENSITIVE_STRING}});ie.ListAccountsRequestFilterSensitiveLog=E$;var N$=t=>({...t,...t.accessToken&&{accessToken:mi.SENSITIVE_STRING}});ie.LogoutRequestFilterSensitiveLog=N$});var bs=p(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.de_LogoutCommand=Ee.de_ListAccountsCommand=Ee.de_ListAccountRolesCommand=Ee.de_GetRoleCredentialsCommand=Ee.se_LogoutCommand=Ee.se_ListAccountsCommand=Ee.se_ListAccountRolesCommand=Ee.se_GetRoleCredentialsCommand=void 0;var Dd=Ae(),P=S(),Md=un(),S$=kd(),b$=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s=(0,P.map)({},jd,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,d=(0,P.map)({role_name:[,(0,P.expectNonNull)(t.roleName,"roleName")],account_id:[,(0,P.expectNonNull)(t.accountId,"accountId")]}),l;return new Dd.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:d,body:l})};Ee.se_GetRoleCredentialsCommand=b$;var x$=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s=(0,P.map)({},jd,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/roles`,d=(0,P.map)({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()],account_id:[,(0,P.expectNonNull)(t.accountId,"accountId")]}),l;return new Dd.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:d,body:l})};Ee.se_ListAccountRolesCommand=x$;var C$=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s=(0,P.map)({},jd,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/accounts`,d=(0,P.map)({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()]}),l;return new Dd.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:s,path:a,query:d,body:l})};Ee.se_ListAccountsCommand=C$;var O$=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s=(0,P.map)({},jd,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/logout`,d;return new Dd.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};Ee.se_LogoutCommand=O$;var P$=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return T$(t,e);let r=(0,P.map)({$metadata:Ur(t)}),n=(0,P.expectNonNull)((0,P.expectObject)(await $d(t.body,e)),"body"),i=(0,P.take)(n,{roleCredentials:P._json});return Object.assign(r,i),r};Ee.de_GetRoleCredentialsCommand=P$;var T$=async(t,e)=>{let r={...t,body:await Vd(t.body,e)},n=Bd(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ld(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Hm(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Wd(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Ud(r,e);default:let i=r.body;return Fd({output:t,parsedBody:i,errorCode:n})}},A$=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return R$(t,e);let r=(0,P.map)({$metadata:Ur(t)}),n=(0,P.expectNonNull)((0,P.expectObject)(await $d(t.body,e)),"body"),i=(0,P.take)(n,{nextToken:P.expectString,roleList:P._json});return Object.assign(r,i),r};Ee.de_ListAccountRolesCommand=A$;var R$=async(t,e)=>{let r={...t,body:await Vd(t.body,e)},n=Bd(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ld(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Hm(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Wd(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Ud(r,e);default:let i=r.body;return Fd({output:t,parsedBody:i,errorCode:n})}},I$=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return k$(t,e);let r=(0,P.map)({$metadata:Ur(t)}),n=(0,P.expectNonNull)((0,P.expectObject)(await $d(t.body,e)),"body"),i=(0,P.take)(n,{accountList:P._json,nextToken:P.expectString});return Object.assign(r,i),r};Ee.de_ListAccountsCommand=I$;var k$=async(t,e)=>{let r={...t,body:await Vd(t.body,e)},n=Bd(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ld(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Hm(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Wd(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Ud(r,e);default:let i=r.body;return Fd({output:t,parsedBody:i,errorCode:n})}},q$=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return D$(t,e);let r=(0,P.map)({$metadata:Ur(t)});return await(0,P.collectBody)(t.body,e),r};Ee.de_LogoutCommand=q$;var D$=async(t,e)=>{let r={...t,body:await Vd(t.body,e)},n=Bd(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ld(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Wd(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Ud(r,e);default:let i=r.body;return Fd({output:t,parsedBody:i,errorCode:n})}},Fd=(0,P.withBaseException)(S$.SSOServiceException),Ld=async(t,e)=>{let r=(0,P.map)({}),n=t.body,i=(0,P.take)(n,{message:P.expectString});Object.assign(r,i);let o=new Md.InvalidRequestException({$metadata:Ur(t),...r});return(0,P.decorateServiceException)(o,t.body)},Hm=async(t,e)=>{let r=(0,P.map)({}),n=t.body,i=(0,P.take)(n,{message:P.expectString});Object.assign(r,i);let o=new Md.ResourceNotFoundException({$metadata:Ur(t),...r});return(0,P.decorateServiceException)(o,t.body)},Wd=async(t,e)=>{let r=(0,P.map)({}),n=t.body,i=(0,P.take)(n,{message:P.expectString});Object.assign(r,i);let o=new Md.TooManyRequestsException({$metadata:Ur(t),...r});return(0,P.decorateServiceException)(o,t.body)},Ud=async(t,e)=>{let r=(0,P.map)({}),n=t.body,i=(0,P.take)(n,{message:P.expectString});Object.assign(r,i);let o=new Md.UnauthorizedException({$metadata:Ur(t),...r});return(0,P.decorateServiceException)(o,t.body)},Ur=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),M$=(t,e)=>(0,P.collectBody)(t,e).then(r=>e.utf8Encoder(r)),jd=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),$d=(t,e)=>M$(t,e).then(r=>r.length?JSON.parse(r):{}),Vd=async(t,e)=>{let r=await $d(t,e);return r.message=r.message??r.Message,r},Bd=(t,e)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(t.headers,"x-amzn-errortype");if(i!==void 0)return n(t.headers[i]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)}});var Km=p(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.GetRoleCredentialsCommand=fi.$Command=void 0;var F$=H(),L$=re(),Wb=S();Object.defineProperty(fi,"$Command",{enumerable:!0,get:function(){return Wb.Command}});var W$=z(),Fb=un(),Lb=bs(),Gm=class t extends Wb.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,L$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,F$.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Fb.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:Fb.GetRoleCredentialsResponseFilterSensitiveLog,[W$.SMITHY_CONTEXT_KEY]:{service:"SWBPortalService",operation:"GetRoleCredentials"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,Lb.se_GetRoleCredentialsCommand)(e,r)}deserialize(e,r){return(0,Lb.de_GetRoleCredentialsCommand)(e,r)}};fi.GetRoleCredentialsCommand=Gm});var zd=p(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.ListAccountRolesCommand=hi.$Command=void 0;var U$=H(),j$=re(),jb=S();Object.defineProperty(hi,"$Command",{enumerable:!0,get:function(){return jb.Command}});var $$=z(),V$=un(),Ub=bs(),Qm=class t extends jb.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,j$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,U$.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:V$.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:u=>u,[$$.SMITHY_CONTEXT_KEY]:{service:"SWBPortalService",operation:"ListAccountRoles"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,Ub.se_ListAccountRolesCommand)(e,r)}deserialize(e,r){return(0,Ub.de_ListAccountRolesCommand)(e,r)}};hi.ListAccountRolesCommand=Qm});var Hd=p(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.ListAccountsCommand=yi.$Command=void 0;var B$=H(),z$=re(),Vb=S();Object.defineProperty(yi,"$Command",{enumerable:!0,get:function(){return Vb.Command}});var H$=z(),G$=un(),$b=bs(),Jm=class t extends Vb.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,z$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,B$.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:G$.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:u=>u,[H$.SMITHY_CONTEXT_KEY]:{service:"SWBPortalService",operation:"ListAccounts"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,$b.se_ListAccountsCommand)(e,r)}deserialize(e,r){return(0,$b.de_ListAccountsCommand)(e,r)}};yi.ListAccountsCommand=Jm});var Xm=p(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.LogoutCommand=gi.$Command=void 0;var K$=H(),Q$=re(),zb=S();Object.defineProperty(gi,"$Command",{enumerable:!0,get:function(){return zb.Command}});var J$=z(),Y$=un(),Bb=bs(),Ym=class t extends zb.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,Q$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,K$.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:Y$.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:u=>u,[J$.SMITHY_CONTEXT_KEY]:{service:"SWBPortalService",operation:"Logout"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,Bb.se_LogoutCommand)(e,r)}deserialize(e,r){return(0,Bb.de_LogoutCommand)(e,r)}};gi.LogoutCommand=Ym});var Hb=p(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.SSO=void 0;var X$=S(),Z$=Km(),eV=zd(),tV=Hd(),rV=Xm(),nV=Ss(),iV={GetRoleCredentialsCommand:Z$.GetRoleCredentialsCommand,ListAccountRolesCommand:eV.ListAccountRolesCommand,ListAccountsCommand:tV.ListAccountsCommand,LogoutCommand:rV.LogoutCommand},Gd=class extends nV.SSOClient{};Kd.SSO=Gd;(0,X$.createAggregatedClient)(iV,Gd)});var Gb=p(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});var Qd=(W(),F(L));Qd.__exportStar(Km(),_i);Qd.__exportStar(zd(),_i);Qd.__exportStar(Hd(),_i);Qd.__exportStar(Xm(),_i)});var Qb=p(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0})});var Jb=p(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.paginateListAccountRoles=void 0;var oV=zd(),sV=Ss(),aV=async(t,e,...r)=>await t.send(new oV.ListAccountRolesCommand(e),...r);async function*cV(t,e,...r){let n=t.startingToken||void 0,i=!0,o;for(;i;){if(e.nextToken=n,e.maxResults=t.pageSize,t.client instanceof sV.SSOClient)o=await aV(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let s=n;n=o.nextToken,i=!!(n&&(!t.stopOnSameToken||n!==s))}return void 0}Jd.paginateListAccountRoles=cV});var Yb=p(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.paginateListAccounts=void 0;var dV=Hd(),lV=Ss(),uV=async(t,e,...r)=>await t.send(new dV.ListAccountsCommand(e),...r);async function*pV(t,e,...r){let n=t.startingToken||void 0,i=!0,o;for(;i;){if(e.nextToken=n,e.maxResults=t.pageSize,t.client instanceof lV.SSOClient)o=await uV(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let s=n;n=o.nextToken,i=!!(n&&(!t.stopOnSameToken||n!==s))}return void 0}Yd.paginateListAccounts=pV});var Xb=p(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var Zm=(W(),F(L));Zm.__exportStar(Qb(),xs);Zm.__exportStar(Jb(),xs);Zm.__exportStar(Yb(),xs)});var Zb=p(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var mV=(W(),F(L));mV.__exportStar(un(),ef)});var ex=p(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.SSOServiceException=void 0;var Cs=(W(),F(L));Cs.__exportStar(Ss(),sr);Cs.__exportStar(Hb(),sr);Cs.__exportStar(Gb(),sr);Cs.__exportStar(Xb(),sr);Cs.__exportStar(Zb(),sr);zo();var fV=kd();Object.defineProperty(sr,"SSOServiceException",{enumerable:!0,get:function(){return fV.SSOServiceException}})});var el=p(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.UnsupportedGrantTypeException=G.UnauthorizedClientException=G.SlowDownException=G.SSOOIDCClient=G.InvalidScopeException=G.InvalidRequestException=G.InvalidClientException=G.InternalServerException=G.ExpiredTokenException=G.CreateTokenCommand=G.AuthorizationPendingException=G.AccessDeniedException=void 0;var tx=Lo(),hV=Wo(),yV=Uo(),rx=Ho(),gV=kt(),_V=Go(),vV=H(),nx=tr(),wV=S(),EV=t=>{var e,r;return{...t,useDualstackEndpoint:(e=t.useDualstackEndpoint)!==null&&e!==void 0?e:!1,useFipsEndpoint:(r=t.useFipsEndpoint)!==null&&r!==void 0?r:!1,defaultSigningName:"awsssooidc"}},NV={version:"3.429.0"},SV=hs(),Xd=kt(),bV=ys(),ix=tr(),Os=er(),ox=Jn(),xV=gs(),CV=Kn(),OV=S(),PV=an(),sx=Qn(),ax=it(),TV=Rt(),wx="required",Et="fn",Nt="argv",Ei="ref",cx="isSet",ar="tree",vi="error",wi="endpoint",rf="PartitionResult",nf="getAttr",dx={[wx]:!1,type:"String"},lx={[wx]:!0,default:!1,type:"Boolean"},ux={[Ei]:"Endpoint"},Ex={[Et]:"booleanEquals",[Nt]:[{[Ei]:"UseFIPS"},!0]},Nx={[Et]:"booleanEquals",[Nt]:[{[Ei]:"UseDualStack"},!0]},pt={},px={[Et]:"booleanEquals",[Nt]:[!0,{[Et]:nf,[Nt]:[{[Ei]:rf},"supportsFIPS"]}]},Sx={[Ei]:rf},mx={[Et]:"booleanEquals",[Nt]:[!0,{[Et]:nf,[Nt]:[Sx,"supportsDualStack"]}]},fx=[Ex],hx=[Nx],yx=[{[Ei]:"Region"}],AV={version:"1.0",parameters:{Region:dx,UseDualStack:lx,UseFIPS:lx,Endpoint:dx},rules:[{conditions:[{[Et]:cx,[Nt]:[ux]}],type:ar,rules:[{conditions:fx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vi},{conditions:hx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vi},{endpoint:{url:ux,properties:pt,headers:pt},type:wi}]},{conditions:[{[Et]:cx,[Nt]:yx}],type:ar,rules:[{conditions:[{[Et]:"aws.partition",[Nt]:yx,assign:rf}],type:ar,rules:[{conditions:[Ex,Nx],type:ar,rules:[{conditions:[px,mx],type:ar,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:wi}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vi}]},{conditions:fx,type:ar,rules:[{conditions:[px],type:ar,rules:[{conditions:[{[Et]:"stringEquals",[Nt]:["aws-us-gov",{[Et]:nf,[Nt]:[Sx,"name"]}]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:pt,headers:pt},type:wi},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:wi}]},{error:"FIPS is enabled but this partition does not support FIPS",type:vi}]},{conditions:hx,type:ar,rules:[{conditions:[mx],type:ar,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:wi}]},{error:"DualStack is enabled but this partition does not support DualStack",type:vi}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:wi}]}]},{error:"Invalid Configuration: Missing Region",type:vi}]},RV=AV,IV=(t,e={})=>(0,TV.resolveEndpoint)(RV,{endpointParams:t,logger:e.logger}),kV=t=>{var e,r,n,i,o,s,a,d,l,u;return{apiVersion:"2019-06-10",base64Decoder:(e=t?.base64Decoder)!==null&&e!==void 0?e:sx.fromBase64,base64Encoder:(r=t?.base64Encoder)!==null&&r!==void 0?r:sx.toBase64,disableHostPrefix:(n=t?.disableHostPrefix)!==null&&n!==void 0?n:!1,endpointProvider:(i=t?.endpointProvider)!==null&&i!==void 0?i:IV,extensions:(o=t?.extensions)!==null&&o!==void 0?o:[],logger:(s=t?.logger)!==null&&s!==void 0?s:new OV.NoOpLogger,serviceId:(a=t?.serviceId)!==null&&a!==void 0?a:"SSO OIDC",urlParser:(d=t?.urlParser)!==null&&d!==void 0?d:PV.parseUrl,utf8Decoder:(l=t?.utf8Decoder)!==null&&l!==void 0?l:ax.fromUtf8,utf8Encoder:(u=t?.utf8Encoder)!==null&&u!==void 0?u:ax.toUtf8}},qV=S(),DV=ws(),MV=S(),FV=t=>{var e,r,n,i,o,s,a,d,l,u;(0,MV.emitWarningIfUnsupportedVersion)(process.version);let m=(0,DV.resolveDefaultsModeConfig)(t),h=()=>m().then(qV.loadConfigsForDefaultMode),f=kV(t);return{...f,...t,runtime:"node",defaultsMode:m,bodyLengthChecker:(e=t?.bodyLengthChecker)!==null&&e!==void 0?e:xV.calculateBodyLength,defaultUserAgentProvider:(r=t?.defaultUserAgentProvider)!==null&&r!==void 0?r:(0,SV.defaultUserAgent)({serviceId:f.serviceId,clientVersion:NV.version}),maxAttempts:(n=t?.maxAttempts)!==null&&n!==void 0?n:(0,Os.loadConfig)(ix.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(i=t?.region)!==null&&i!==void 0?i:(0,Os.loadConfig)(Xd.NODE_REGION_CONFIG_OPTIONS,Xd.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:(o=t?.requestHandler)!==null&&o!==void 0?o:new ox.NodeHttpHandler(h),retryMode:(s=t?.retryMode)!==null&&s!==void 0?s:(0,Os.loadConfig)({...ix.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await h()).retryMode||CV.DEFAULT_RETRY_MODE}),sha256:(a=t?.sha256)!==null&&a!==void 0?a:bV.Hash.bind(null,"sha256"),streamCollector:(d=t?.streamCollector)!==null&&d!==void 0?d:ox.streamCollector,useDualstackEndpoint:(l=t?.useDualstackEndpoint)!==null&&l!==void 0?l:(0,Os.loadConfig)(Xd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(u=t?.useFipsEndpoint)!==null&&u!==void 0?u:(0,Os.loadConfig)(Xd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},gx=Ns(),_x=Ae(),vx=S(),tf=t=>t,LV=(t,e)=>{let r={...tf((0,gx.getAwsRegionExtensionConfiguration)(t)),...tf((0,vx.getDefaultExtensionConfiguration)(t)),...tf((0,_x.getHttpHandlerExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,gx.resolveAwsRegionExtensionConfiguration)(r),...(0,vx.resolveDefaultRuntimeConfig)(r),...(0,_x.resolveHttpHandlerRuntimeConfig)(r)}},bx=class extends wV.Client{constructor(...[t]){let e=FV(t||{}),r=EV(e),n=(0,gV.resolveRegionConfig)(r),i=(0,vV.resolveEndpointConfig)(n),o=(0,nx.resolveRetryConfig)(i),s=(0,tx.resolveHostHeaderConfig)(o),a=(0,rx.resolveUserAgentConfig)(s),d=LV(a,t?.extensions||[]);super(d),this.config=d,this.middlewareStack.use((0,nx.getRetryPlugin)(this.config)),this.middlewareStack.use((0,_V.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,tx.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hV.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,yV.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,rx.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};G.SSOOIDCClient=bx;var WV=S(),UV=H(),jV=re(),$V=S(),VV=z(),of=Ae(),v=S(),BV=S(),Ye=class xx extends BV.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,xx.prototype)}},Cx=class Ox extends Ye{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ox.prototype),this.error=e.error,this.error_description=e.error_description}};G.AccessDeniedException=Cx;var Px=class Tx extends Ye{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Tx.prototype),this.error=e.error,this.error_description=e.error_description}};G.AuthorizationPendingException=Px;var Ax=class Rx extends Ye{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Rx.prototype),this.error=e.error,this.error_description=e.error_description}};G.ExpiredTokenException=Ax;var Ix=class kx extends Ye{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,kx.prototype),this.error=e.error,this.error_description=e.error_description}};G.InternalServerException=Ix;var qx=class Dx extends Ye{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Dx.prototype),this.error=e.error,this.error_description=e.error_description}};G.InvalidClientException=qx;var zV=class Mx extends Ye{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Mx.prototype),this.error=e.error,this.error_description=e.error_description}},Fx=class Lx extends Ye{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Lx.prototype),this.error=e.error,this.error_description=e.error_description}};G.InvalidRequestException=Fx;var Wx=class Ux extends Ye{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Ux.prototype),this.error=e.error,this.error_description=e.error_description}};G.InvalidScopeException=Wx;var jx=class $x extends Ye{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,$x.prototype),this.error=e.error,this.error_description=e.error_description}};G.SlowDownException=jx;var Vx=class Bx extends Ye{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Bx.prototype),this.error=e.error,this.error_description=e.error_description}};G.UnauthorizedClientException=Vx;var zx=class Hx extends Ye{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Hx.prototype),this.error=e.error,this.error_description=e.error_description}};G.UnsupportedGrantTypeException=zx;var HV=class Gx extends Ye{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Gx.prototype),this.error=e.error,this.error_description=e.error_description}},GV=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/token`,d;return d=JSON.stringify((0,v.take)(t,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:l=>(0,v._json)(l)})),new of.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})},KV=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/client/register`,d;return d=JSON.stringify((0,v.take)(t,{clientName:[],clientType:[],scopes:l=>(0,v._json)(l)})),new of.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})},QV=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/device_authorization`,d;return d=JSON.stringify((0,v.take)(t,{clientId:[],clientSecret:[],startUrl:[]})),new of.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})},JV=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return YV(t,e);let r=(0,v.map)({$metadata:Le(t)}),n=(0,v.expectNonNull)((0,v.expectObject)(await Zd(t.body,e)),"body"),i=(0,v.take)(n,{accessToken:v.expectString,expiresIn:v.expectInt32,idToken:v.expectString,refreshToken:v.expectString,tokenType:v.expectString});return Object.assign(r,i),r},YV=async(t,e)=>{let r={...t,body:await df(t.body,e)},n=lf(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await rB(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await nB(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await iB(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await af(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Kx(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await sB(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cf(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Qx(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Jx(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Yx(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await aB(r,e);default:let i=r.body;return sf({output:t,parsedBody:i,errorCode:n})}},XV=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ZV(t,e);let r=(0,v.map)({$metadata:Le(t)}),n=(0,v.expectNonNull)((0,v.expectObject)(await Zd(t.body,e)),"body"),i=(0,v.take)(n,{authorizationEndpoint:v.expectString,clientId:v.expectString,clientIdIssuedAt:v.expectLong,clientSecret:v.expectString,clientSecretExpiresAt:v.expectLong,tokenEndpoint:v.expectString});return Object.assign(r,i),r},ZV=async(t,e)=>{let r={...t,body:await df(t.body,e)},n=lf(t,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await af(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await oB(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cf(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Qx(r,e);default:let i=r.body;return sf({output:t,parsedBody:i,errorCode:n})}},eB=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return tB(t,e);let r=(0,v.map)({$metadata:Le(t)}),n=(0,v.expectNonNull)((0,v.expectObject)(await Zd(t.body,e)),"body"),i=(0,v.take)(n,{deviceCode:v.expectString,expiresIn:v.expectInt32,interval:v.expectInt32,userCode:v.expectString,verificationUri:v.expectString,verificationUriComplete:v.expectString});return Object.assign(r,i),r},tB=async(t,e)=>{let r={...t,body:await df(t.body,e)},n=lf(t,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await af(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Kx(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await cf(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Jx(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Yx(r,e);default:let i=r.body;return sf({output:t,parsedBody:i,errorCode:n})}},sf=(0,v.withBaseException)(Ye),rB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Cx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},nB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Px({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},iB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Ax({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},af=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Ix({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},Kx=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new qx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},oB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new HV({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},sB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new zV({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},cf=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Fx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},Qx=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Wx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},Jx=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new jx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},Yx=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new Vx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},aB=async(t,e)=>{let r=(0,v.map)({}),n=t.body,i=(0,v.take)(n,{error:v.expectString,error_description:v.expectString});Object.assign(r,i);let o=new zx({$metadata:Le(t),...r});return(0,v.decorateServiceException)(o,t.body)},Le=t=>{var e,r;return{httpStatusCode:t.statusCode,requestId:(r=(e=t.headers["x-amzn-requestid"])!==null&&e!==void 0?e:t.headers["x-amzn-request-id"])!==null&&r!==void 0?r:t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},cB=(t,e)=>(0,v.collectBody)(t,e).then(r=>e.utf8Encoder(r)),Zd=(t,e)=>cB(t,e).then(r=>r.length?JSON.parse(r):{}),df=async(t,e)=>{var r;let n=await Zd(t,e);return n.message=(r=n.message)!==null&&r!==void 0?r:n.Message,n},lf=(t,e)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(t.headers,"x-amzn-errortype");if(i!==void 0)return n(t.headers[i]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)},Xx=class Zx extends $V.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,n){this.middlewareStack.use((0,jV.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,UV.getEndpointPlugin)(r,Zx.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[VV.SMITHY_CONTEXT_KEY]:{service:"AWSSSOOIDCService",operation:"CreateToken"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return GV(e,r)}deserialize(e,r){return JV(e,r)}};G.CreateTokenCommand=Xx;var dB=H(),lB=re(),uB=S(),pB=z(),mB=class eC extends uB.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,n){this.middlewareStack.use((0,lB.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,dB.getEndpointPlugin)(r,eC.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[pB.SMITHY_CONTEXT_KEY]:{service:"AWSSSOOIDCService",operation:"RegisterClient"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return KV(e,r)}deserialize(e,r){return XV(e,r)}},fB=H(),hB=re(),yB=S(),gB=z(),_B=class tC extends yB.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,n){this.middlewareStack.use((0,hB.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,fB.getEndpointPlugin)(r,tC.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[gB.SMITHY_CONTEXT_KEY]:{service:"AWSSSOOIDCService",operation:"StartDeviceAuthorization"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return QV(e,r)}deserialize(e,r){return eB(e,r)}},vB={CreateTokenCommand:Xx,RegisterClientCommand:mB,StartDeviceAuthorizationCommand:_B},wB=class extends bx{};(0,WV.createAggregatedClient)(vB,wB)});var tl=p(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.REFRESH_MESSAGE=Ni.EXPIRE_WINDOW_MS=void 0;Ni.EXPIRE_WINDOW_MS=5*60*1e3;Ni.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var rC=p(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.getSsoOidcClient=void 0;var EB=el(),uf={},NB=t=>{if(uf[t])return uf[t];let e=new EB.SSOOIDCClient({region:t});return uf[t]=e,e};rl.getSsoOidcClient=NB});var nC=p(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.getNewSsoOidcToken=void 0;var SB=el(),bB=rC(),xB=(t,e)=>(0,bB.getSsoOidcClient)(e).send(new SB.CreateTokenCommand({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}));nl.getNewSsoOidcToken=xB});var iC=p(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.validateTokenExpiry=void 0;var CB=ae(),OB=tl(),PB=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new CB.TokenProviderError(`Token is expired. ${OB.REFRESH_MESSAGE}`,!1)};il.validateTokenExpiry=PB});var oC=p(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.validateTokenKey=void 0;var TB=ae(),AB=tl(),RB=(t,e,r=!1)=>{if(typeof e>"u")throw new TB.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${AB.REFRESH_MESSAGE}`,!1)};ol.validateTokenKey=RB});var sC=p(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.writeSSOTokenToFile=void 0;var IB=_t(),kB=$("fs"),{writeFile:qB}=kB.promises,DB=(t,e)=>{let r=(0,IB.getSSOTokenFilepath)(t),n=JSON.stringify(e,null,2);return qB(r,n)};sl.writeSSOTokenToFile=DB});var pf=p(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.fromSso=void 0;var Ps=ae(),al=_t(),aC=tl(),MB=nC(),cC=iC(),pn=oC(),FB=sC(),dC=new Date(0),LB=(t={})=>async()=>{let e=await(0,al.parseKnownFiles)(t),r=(0,al.getProfileName)(t),n=e[r];if(n){if(!n.sso_session)throw new Ps.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Ps.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let i=n.sso_session,s=(await(0,al.loadSsoSessionData)(t))[i];if(!s)throw new Ps.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let f of["sso_start_url","sso_region"])if(!s[f])throw new Ps.TokenProviderError(`Sso session '${i}' is missing required property '${f}'.`,!1);let a=s.sso_start_url,d=s.sso_region,l;try{l=await(0,al.getSSOTokenFromFile)(i)}catch{throw new Ps.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${aC.REFRESH_MESSAGE}`,!1)}(0,pn.validateTokenKey)("accessToken",l.accessToken),(0,pn.validateTokenKey)("expiresAt",l.expiresAt);let{accessToken:u,expiresAt:m}=l,h={token:u,expiration:new Date(m)};if(h.expiration.getTime()-Date.now()>aC.EXPIRE_WINDOW_MS)return h;if(Date.now()-dC.getTime()<30*1e3)return(0,cC.validateTokenExpiry)(h),h;(0,pn.validateTokenKey)("clientId",l.clientId,!0),(0,pn.validateTokenKey)("clientSecret",l.clientSecret,!0),(0,pn.validateTokenKey)("refreshToken",l.refreshToken,!0);try{dC.setTime(Date.now());let f=await(0,MB.getNewSsoOidcToken)(l,d);(0,pn.validateTokenKey)("accessToken",f.accessToken),(0,pn.validateTokenKey)("expiresIn",f.expiresIn);let y=new Date(Date.now()+f.expiresIn*1e3);try{await(0,FB.writeSSOTokenToFile)(i,{...l,accessToken:f.accessToken,expiresAt:y.toISOString(),refreshToken:f.refreshToken})}catch{}return{token:f.accessToken,expiration:y}}catch{return(0,cC.validateTokenExpiry)(h),h}};cl.fromSso=LB});var lC=p(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.fromStatic=void 0;var WB=ae(),UB=({token:t})=>async()=>{if(!t||!t.token)throw new WB.TokenProviderError("Please pass a valid token to fromStatic",!1);return t};dl.fromStatic=UB});var uC=p(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.nodeProvider=void 0;var mf=ae(),jB=pf(),$B=(t={})=>(0,mf.memoize)((0,mf.chain)((0,jB.fromSso)(t),async()=>{throw new mf.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);ll.nodeProvider=$B});var pC=p(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var ul=(W(),F(L));ul.__exportStar(el(),Si);ul.__exportStar(pf(),Si);ul.__exportStar(lC(),Si);ul.__exportStar(uC(),Si)});var fC=p(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.resolveSSOCredentials=void 0;var mC=ex(),VB=pC(),Ts=ae(),BB=_t(),As=!1,zB=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,profile:s})=>{let a,d="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let _=await(0,VB.fromSso)({profile:s})();a={accessToken:_.token,expiresAt:new Date(_.expiration).toISOString()}}catch(_){throw new Ts.CredentialsProviderError(_.message,As)}else try{a=await(0,BB.getSSOTokenFromFile)(t)}catch{throw new Ts.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${d}`,As)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new Ts.CredentialsProviderError(`The SSO session associated with this profile has expired. ${d}`,As);let{accessToken:l}=a,u=o||new mC.SSOClient({region:n}),m;try{m=await u.send(new mC.GetRoleCredentialsCommand({accountId:r,roleName:i,accessToken:l}))}catch(_){throw Ts.CredentialsProviderError.from(_,As)}let{roleCredentials:{accessKeyId:h,secretAccessKey:f,sessionToken:y,expiration:w}={}}=m;if(!h||!f||!y||!w)throw new Ts.CredentialsProviderError("SSO returns an invalid temporary credential.",As);return{accessKeyId:h,secretAccessKey:f,sessionToken:y,expiration:new Date(w)}};pl.resolveSSOCredentials=zB});var ff=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.validateSsoProfile=void 0;var HB=ae(),GB=t=>{let{sso_start_url:e,sso_account_id:r,sso_region:n,sso_role_name:i}=t;if(!e||!r||!n||!i)throw new HB.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t};ml.validateSsoProfile=GB});var yC=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.fromSSO=void 0;var Rs=ae(),hf=_t(),KB=Am(),hC=fC(),QB=ff(),JB=(t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,ssoSession:s}=t,a=(0,hf.getProfileName)(t);if(!e&&!r&&!n&&!i&&!s){let l=(await(0,hf.parseKnownFiles)(t))[a];if(!l)throw new Rs.CredentialsProviderError(`Profile ${a} was not found.`);if(!(0,KB.isSsoProfile)(l))throw new Rs.CredentialsProviderError(`Profile ${a} is not configured with SSO credentials.`);if(l?.sso_session){let _=(await(0,hf.loadSsoSessionData)(t))[l.sso_session],x=` configurations in profile ${a} and sso-session ${l.sso_session}`;if(n&&n!==_.sso_region)throw new Rs.CredentialsProviderError("Conflicting SSO region"+x,!1);if(e&&e!==_.sso_start_url)throw new Rs.CredentialsProviderError("Conflicting SSO start_url"+x,!1);l.sso_region=_.sso_region,l.sso_start_url=_.sso_start_url}let{sso_start_url:u,sso_account_id:m,sso_region:h,sso_role_name:f,sso_session:y}=(0,QB.validateSsoProfile)(l);return(0,hC.resolveSSOCredentials)({ssoStartUrl:u,ssoSession:y,ssoAccountId:m,ssoRegion:h,ssoRoleName:f,ssoClient:o,profile:a})}else{if(!e||!r||!n||!i)throw new Rs.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,hC.resolveSSOCredentials)({ssoStartUrl:e,ssoSession:s,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,profile:a})}};fl.fromSSO=JB});var _C=p(gC=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0})});var yl=p(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var hl=(W(),F(L));hl.__exportStar(yC(),bi);hl.__exportStar(Am(),bi);hl.__exportStar(_C(),bi);hl.__exportStar(ff(),bi)});var wC=p(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.resolveSsoCredentials=xi.isSsoProfile=void 0;var vC=yl(),YB=yl();Object.defineProperty(xi,"isSsoProfile",{enumerable:!0,get:function(){return YB.isSsoProfile}});var XB=t=>{let{sso_start_url:e,sso_account_id:r,sso_session:n,sso_region:i,sso_role_name:o}=(0,vC.validateSsoProfile)(t);return(0,vC.fromSSO)({ssoStartUrl:e,ssoAccountId:r,ssoSession:n,ssoRegion:i,ssoRoleName:o})()};xi.resolveSsoCredentials=XB});var EC=p(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.resolveStaticCredentials=Ci.isStaticCredsProfile=void 0;var ZB=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1;Ci.isStaticCredsProfile=ZB;var ez=t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token});Ci.resolveStaticCredentials=ez});var yf=p(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.fromWebToken=void 0;var tz=ae(),rz=t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:o,policy:s,durationSeconds:a,roleAssumerWithWebIdentity:d}=t;if(!d)throw new tz.CredentialsProviderError(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return d({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:o,Policy:s,DurationSeconds:a})};gl.fromWebToken=rz});var NC=p(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.fromTokenFile=void 0;var nz=ae(),iz=$("fs"),oz=yf(),sz="AWS_WEB_IDENTITY_TOKEN_FILE",az="AWS_ROLE_ARN",cz="AWS_ROLE_SESSION_NAME",dz=(t={})=>async()=>{var e,r,n;let i=(e=t?.webIdentityTokenFile)!==null&&e!==void 0?e:process.env[sz],o=(r=t?.roleArn)!==null&&r!==void 0?r:process.env[az],s=(n=t?.roleSessionName)!==null&&n!==void 0?n:process.env[cz];if(!i||!o)throw new nz.CredentialsProviderError("Web identity configuration not specified");return(0,oz.fromWebToken)({...t,webIdentityToken:(0,iz.readFileSync)(i,{encoding:"ascii"}),roleArn:o,roleSessionName:s})()};_l.fromTokenFile=dz});var gf=p(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var SC=(W(),F(L));SC.__exportStar(NC(),vl);SC.__exportStar(yf(),vl)});var bC=p(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.resolveWebIdentityCredentials=Oi.isWebIdentityProfile=void 0;var lz=gf(),uz=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1;Oi.isWebIdentityProfile=uz;var pz=async(t,e)=>(0,lz.fromTokenFile)({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})();Oi.resolveWebIdentityCredentials=pz});var Cm=p(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.resolveProfileData=void 0;var mz=ae(),xC=PS(),CC=kS(),OC=wC(),wl=EC(),PC=bC(),fz=async(t,e,r,n={})=>{let i=e[t];if(Object.keys(n).length>0&&(0,wl.isStaticCredsProfile)(i))return(0,wl.resolveStaticCredentials)(i);if((0,xC.isAssumeRoleProfile)(i))return(0,xC.resolveAssumeRoleCredentials)(t,e,r,n);if((0,wl.isStaticCredsProfile)(i))return(0,wl.resolveStaticCredentials)(i);if((0,PC.isWebIdentityProfile)(i))return(0,PC.resolveWebIdentityCredentials)(i,r);if((0,CC.isProcessProfile)(i))return(0,CC.resolveProcessCredentials)(r,t);if((0,OC.isSsoProfile)(i))return(0,OC.resolveSsoCredentials)(i);throw new mz.CredentialsProviderError(`Profile ${t} could not be found or parsed in shared credentials file.`)};El.resolveProfileData=fz});var AC=p(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.fromIni=void 0;var TC=_t(),hz=Cm(),yz=(t={})=>async()=>{let e=await(0,TC.parseKnownFiles)(t);return(0,hz.resolveProfileData)((0,TC.getProfileName)(t),e,t)};Nl.fromIni=yz});var RC=p(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var gz=(W(),F(L));gz.__exportStar(AC(),_f)});var IC=p(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.remoteProvider=mn.ENV_IMDS_DISABLED=void 0;var Sl=ud(),_z=ae();mn.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var vz=t=>process.env[Sl.ENV_CMDS_RELATIVE_URI]||process.env[Sl.ENV_CMDS_FULL_URI]?(0,Sl.fromContainerMetadata)(t):process.env[mn.ENV_IMDS_DISABLED]?async()=>{throw new _z.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,Sl.fromInstanceMetadata)(t);mn.remoteProvider=vz});var kC=p(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.defaultProvider=void 0;var wz=vm(),Ez=RC(),Nz=Tm(),Sz=yl(),bz=gf(),vf=ae(),xz=_t(),Cz=IC(),Oz=(t={})=>(0,vf.memoize)((0,vf.chain)(...t.profile||process.env[xz.ENV_PROFILE]?[]:[(0,wz.fromEnv)()],(0,Sz.fromSSO)(t),(0,Ez.fromIni)(t),(0,Nz.fromProcess)(t),(0,bz.fromTokenFile)(t),(0,Cz.remoteProvider)(t),async()=>{throw new vf.CredentialsProviderError("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);bl.defaultProvider=Oz});var Ef=p(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Pz=(W(),F(L));Pz.__exportStar(kC(),wf)});var tO=p(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.ruleSet=void 0;var zC="required",R="type",U="fn",j="argv",$r="ref",qC=!1,Nf=!0,jr="booleanEquals",Ce="stringEquals",HC="sigv4",GC="sts",KC="us-east-1",X="endpoint",DC="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ft="tree",Pi="error",bf="getAttr",MC={[zC]:!1,[R]:"String"},Sf={[zC]:!0,default:!1,[R]:"Boolean"},QC={[$r]:"Endpoint"},FC={[U]:"isSet",[j]:[{[$r]:"Region"}]},Oe={[$r]:"Region"},LC={[U]:"aws.partition",[j]:[Oe],assign:"PartitionResult"},JC={[$r]:"UseFIPS"},YC={[$r]:"UseDualStack"},qe={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:HC,signingName:GC,signingRegion:KC}]},headers:{}},Xe={},WC={conditions:[{[U]:Ce,[j]:[Oe,"aws-global"]}],[X]:qe,[R]:X},XC={[U]:jr,[j]:[JC,!0]},ZC={[U]:jr,[j]:[YC,!0]},UC={[U]:bf,[j]:[{[$r]:"PartitionResult"},"supportsFIPS"]},eO={[$r]:"PartitionResult"},jC={[U]:jr,[j]:[!0,{[U]:bf,[j]:[eO,"supportsDualStack"]}]},$C=[{[U]:"isSet",[j]:[QC]}],VC=[XC],BC=[ZC],Tz={version:"1.0",parameters:{Region:MC,UseDualStack:Sf,UseFIPS:Sf,Endpoint:MC,UseGlobalEndpoint:Sf},rules:[{conditions:[{[U]:jr,[j]:[{[$r]:"UseGlobalEndpoint"},Nf]},{[U]:"not",[j]:$C},FC,LC,{[U]:jr,[j]:[JC,qC]},{[U]:jr,[j]:[YC,qC]}],rules:[{conditions:[{[U]:Ce,[j]:[Oe,"ap-northeast-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"ap-south-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"ap-southeast-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"ap-southeast-2"]}],endpoint:qe,[R]:X},WC,{conditions:[{[U]:Ce,[j]:[Oe,"ca-central-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"eu-central-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"eu-north-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"eu-west-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"eu-west-2"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"eu-west-3"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"sa-east-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,KC]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"us-east-2"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"us-west-1"]}],endpoint:qe,[R]:X},{conditions:[{[U]:Ce,[j]:[Oe,"us-west-2"]}],endpoint:qe,[R]:X},{endpoint:{url:DC,properties:{authSchemes:[{name:HC,signingName:GC,signingRegion:"{Region}"}]},headers:Xe},[R]:X}],[R]:Ft},{conditions:$C,rules:[{conditions:VC,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[R]:Pi},{conditions:BC,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[R]:Pi},{endpoint:{url:QC,properties:Xe,headers:Xe},[R]:X}],[R]:Ft},{conditions:[FC],rules:[{conditions:[LC],rules:[{conditions:[XC,ZC],rules:[{conditions:[{[U]:jr,[j]:[Nf,UC]},jC],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xe,headers:Xe},[R]:X}],[R]:Ft},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[R]:Pi}],[R]:Ft},{conditions:VC,rules:[{conditions:[{[U]:jr,[j]:[UC,Nf]}],rules:[{conditions:[{[U]:Ce,[j]:[{[U]:bf,[j]:[eO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Xe,headers:Xe},[R]:X},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Xe,headers:Xe},[R]:X}],[R]:Ft},{error:"FIPS is enabled but this partition does not support FIPS",[R]:Pi}],[R]:Ft},{conditions:BC,rules:[{conditions:[jC],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xe,headers:Xe},[R]:X}],[R]:Ft},{error:"DualStack is enabled but this partition does not support DualStack",[R]:Pi}],[R]:Ft},WC,{endpoint:{url:DC,properties:Xe,headers:Xe},[R]:X}],[R]:Ft}],[R]:Ft},{error:"Invalid Configuration: Missing Region",[R]:Pi}]};xl.ruleSet=Tz});var rO=p(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.defaultEndpointResolver=void 0;var Az=Rt(),Rz=tO(),Iz=(t,e={})=>(0,Az.resolveEndpoint)(Rz.ruleSet,{endpointParams:t,logger:e.logger});Cl.defaultEndpointResolver=Iz});var oO=p(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.getRuntimeConfig=void 0;var kz=S(),qz=an(),nO=Qn(),iO=it(),Dz=rO(),Mz=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??nO.fromBase64,base64Encoder:t?.base64Encoder??nO.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Dz.defaultEndpointResolver,extensions:t?.extensions??[],logger:t?.logger??new kz.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??qz.parseUrl,utf8Decoder:t?.utf8Decoder??iO.fromUtf8,utf8Encoder:t?.utf8Encoder??iO.toUtf8});Ol.getRuntimeConfig=Mz});var cO=p(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.getRuntimeConfig=void 0;var Fz=(W(),F(L)),Lz=Fz.__importDefault(mN()),Wz=ym(),Uz=fs(),jz=Ef(),$z=hs(),Pl=kt(),Vz=ys(),sO=tr(),Is=er(),aO=Jn(),Bz=gs(),zz=Kn(),Hz=oO(),Gz=S(),Kz=ws(),Qz=S(),Jz=t=>{(0,Qz.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Kz.resolveDefaultsModeConfig)(t),r=()=>e().then(Gz.loadConfigsForDefaultMode),n=(0,Hz.getRuntimeConfig)(t);return(0,Uz.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Bz.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,Wz.decorateDefaultCredentialProvider)(jz.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,$z.defaultUserAgent)({serviceId:n.serviceId,clientVersion:Lz.default.version}),maxAttempts:t?.maxAttempts??(0,Is.loadConfig)(sO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Is.loadConfig)(Pl.NODE_REGION_CONFIG_OPTIONS,Pl.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new aO.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Is.loadConfig)({...sO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||zz.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Vz.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??aO.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Is.loadConfig)(Pl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Is.loadConfig)(Pl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Tl.getRuntimeConfig=Jz});var pO=p(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.resolveRuntimeExtensions=void 0;var dO=Ns(),lO=Ae(),uO=S(),xf=t=>t,Yz=(t,e)=>{let r={...xf((0,dO.getAwsRegionExtensionConfiguration)(t)),...xf((0,uO.getDefaultExtensionConfiguration)(t)),...xf((0,lO.getHttpHandlerExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,dO.resolveAwsRegionExtensionConfiguration)(r),...(0,uO.resolveDefaultRuntimeConfig)(r),...(0,lO.resolveHttpHandlerRuntimeConfig)(r)}};Al.resolveRuntimeExtensions=Yz});var Rl=p(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.STSClient=Ti.__Client=void 0;var mO=Lo(),Xz=Wo(),Zz=Uo(),eH=uN(),fO=Ho(),tH=kt(),rH=Go(),nH=H(),hO=tr(),yO=S();Object.defineProperty(Ti,"__Client",{enumerable:!0,get:function(){return yO.Client}});var iH=pN(),oH=cO(),sH=pO(),Cf=class t extends yO.Client{constructor(...[e]){let r=(0,oH.getRuntimeConfig)(e||{}),n=(0,iH.resolveClientEndpointParameters)(r),i=(0,tH.resolveRegionConfig)(n),o=(0,nH.resolveEndpointConfig)(i),s=(0,hO.resolveRetryConfig)(o),a=(0,mO.resolveHostHeaderConfig)(s),d=(0,eH.resolveStsAuthConfig)(a,{stsClientCtor:t}),l=(0,fO.resolveUserAgentConfig)(d),u=(0,sH.resolveRuntimeExtensions)(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,hO.getRetryPlugin)(this.config)),this.middlewareStack.use((0,rH.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,mO.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Xz.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Zz.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,fO.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};Ti.STSClient=Cf});var Pf=p(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.AssumeRoleWithSAMLCommand=Ai.$Command=void 0;var aH=H(),cH=re(),vO=S();Object.defineProperty(Ai,"$Command",{enumerable:!0,get:function(){return vO.Command}});var dH=z(),gO=Ar(),_O=ir(),Of=class t extends vO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,cH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,aH.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:gO.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:gO.AssumeRoleWithSAMLResponseFilterSensitiveLog,[dH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRoleWithSAML"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,_O.se_AssumeRoleWithSAMLCommand)(e,r)}deserialize(e,r){return(0,_O.de_AssumeRoleWithSAMLCommand)(e,r)}};Ai.AssumeRoleWithSAMLCommand=Of});var Af=p(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.DecodeAuthorizationMessageCommand=Ri.$Command=void 0;var lH=Xt(),uH=H(),pH=re(),EO=S();Object.defineProperty(Ri,"$Command",{enumerable:!0,get:function(){return EO.Command}});var mH=z(),wO=ir(),Tf=class t extends EO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,pH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,uH.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,lH.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[mH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"DecodeAuthorizationMessage"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,wO.se_DecodeAuthorizationMessageCommand)(e,r)}deserialize(e,r){return(0,wO.de_DecodeAuthorizationMessageCommand)(e,r)}};Ri.DecodeAuthorizationMessageCommand=Tf});var If=p(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.GetAccessKeyInfoCommand=Ii.$Command=void 0;var fH=Xt(),hH=H(),yH=re(),SO=S();Object.defineProperty(Ii,"$Command",{enumerable:!0,get:function(){return SO.Command}});var gH=z(),NO=ir(),Rf=class t extends SO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,yH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,hH.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,fH.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[gH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"GetAccessKeyInfo"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,NO.se_GetAccessKeyInfoCommand)(e,r)}deserialize(e,r){return(0,NO.de_GetAccessKeyInfoCommand)(e,r)}};Ii.GetAccessKeyInfoCommand=Rf});var qf=p(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.GetCallerIdentityCommand=ki.$Command=void 0;var _H=Xt(),vH=H(),wH=re(),xO=S();Object.defineProperty(ki,"$Command",{enumerable:!0,get:function(){return xO.Command}});var EH=z(),bO=ir(),kf=class t extends xO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,wH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,vH.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,_H.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[EH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"GetCallerIdentity"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,bO.se_GetCallerIdentityCommand)(e,r)}deserialize(e,r){return(0,bO.de_GetCallerIdentityCommand)(e,r)}};ki.GetCallerIdentityCommand=kf});var Mf=p(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.GetFederationTokenCommand=qi.$Command=void 0;var NH=Xt(),SH=H(),bH=re(),OO=S();Object.defineProperty(qi,"$Command",{enumerable:!0,get:function(){return OO.Command}});var xH=z(),CH=Ar(),CO=ir(),Df=class t extends OO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,bH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,SH.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,NH.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:CH.GetFederationTokenResponseFilterSensitiveLog,[xH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"GetFederationToken"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,CO.se_GetFederationTokenCommand)(e,r)}deserialize(e,r){return(0,CO.de_GetFederationTokenCommand)(e,r)}};qi.GetFederationTokenCommand=Df});var Lf=p(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.GetSessionTokenCommand=Di.$Command=void 0;var OH=Xt(),PH=H(),TH=re(),TO=S();Object.defineProperty(Di,"$Command",{enumerable:!0,get:function(){return TO.Command}});var AH=z(),RH=Ar(),PO=ir(),Ff=class t extends TO.Command{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,TH.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,PH.getEndpointPlugin)(r,t.getEndpointParameterInstructions())),this.middlewareStack.use((0,OH.getAwsAuthPlugin)(r));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:RH.GetSessionTokenResponseFilterSensitiveLog,[AH.SMITHY_CONTEXT_KEY]:{service:"AWSSecurityTokenServiceV20110615",operation:"GetSessionToken"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,PO.se_GetSessionTokenCommand)(e,r)}deserialize(e,r){return(0,PO.de_GetSessionTokenCommand)(e,r)}};Di.GetSessionTokenCommand=Ff});var AO=p(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.STS=void 0;var IH=S(),kH=rd(),qH=Pf(),DH=nd(),MH=Af(),FH=If(),LH=qf(),WH=Mf(),UH=Lf(),jH=Rl(),$H={AssumeRoleCommand:kH.AssumeRoleCommand,AssumeRoleWithSAMLCommand:qH.AssumeRoleWithSAMLCommand,AssumeRoleWithWebIdentityCommand:DH.AssumeRoleWithWebIdentityCommand,DecodeAuthorizationMessageCommand:MH.DecodeAuthorizationMessageCommand,GetAccessKeyInfoCommand:FH.GetAccessKeyInfoCommand,GetCallerIdentityCommand:LH.GetCallerIdentityCommand,GetFederationTokenCommand:WH.GetFederationTokenCommand,GetSessionTokenCommand:UH.GetSessionTokenCommand},Il=class extends jH.STSClient{};kl.STS=Il;(0,IH.createAggregatedClient)($H,Il)});var RO=p(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});var Vr=(W(),F(L));Vr.__exportStar(rd(),Lt);Vr.__exportStar(Pf(),Lt);Vr.__exportStar(nd(),Lt);Vr.__exportStar(Af(),Lt);Vr.__exportStar(If(),Lt);Vr.__exportStar(qf(),Lt);Vr.__exportStar(Mf(),Lt);Vr.__exportStar(Lf(),Lt)});var IO=p(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var VH=(W(),F(L));VH.__exportStar(Ar(),Wf)});var MO=p(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.decorateDefaultCredentialProvider=Wt.getDefaultRoleAssumerWithWebIdentity=Wt.getDefaultRoleAssumer=void 0;var kO=ym(),qO=Rl(),DO=(t,e)=>e?class extends t{constructor(n){super(n);for(let i of e)this.middlewareStack.use(i)}}:t,BH=(t={},e)=>(0,kO.getDefaultRoleAssumer)(t,DO(qO.STSClient,e));Wt.getDefaultRoleAssumer=BH;var zH=(t={},e)=>(0,kO.getDefaultRoleAssumerWithWebIdentity)(t,DO(qO.STSClient,e));Wt.getDefaultRoleAssumerWithWebIdentity=zH;var HH=t=>e=>t({roleAssumer:(0,Wt.getDefaultRoleAssumer)(e),roleAssumerWithWebIdentity:(0,Wt.getDefaultRoleAssumerWithWebIdentity)(e),...e});Wt.decorateDefaultCredentialProvider=HH});var FO=p(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.STSServiceException=void 0;var ks=(W(),F(L));ks.__exportStar(Rl(),cr);ks.__exportStar(AO(),cr);ks.__exportStar(RO(),cr);ks.__exportStar(IO(),cr);ks.__exportStar(MO(),cr);zo();var GH=Yc();Object.defineProperty(cr,"STSServiceException",{enumerable:!0,get:function(){return GH.STSServiceException}})});var YO=p(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.ruleSet=void 0;var KO="required",jt="fn",$t="argv",Fi="ref",LO=!0,WO="isSet",Ds="booleanEquals",Mi="error",qs="endpoint",dr="tree",Uf="PartitionResult",UO={[KO]:!1,type:"String"},jO={[KO]:!0,default:!1,type:"Boolean"},$O={[Fi]:"Endpoint"},QO={[jt]:Ds,[$t]:[{[Fi]:"UseFIPS"},!0]},JO={[jt]:Ds,[$t]:[{[Fi]:"UseDualStack"},!0]},Ut={},VO={[jt]:"getAttr",[$t]:[{[Fi]:Uf},"supportsFIPS"]},BO={[jt]:Ds,[$t]:[!0,{[jt]:"getAttr",[$t]:[{[Fi]:Uf},"supportsDualStack"]}]},zO=[QO],HO=[JO],GO=[{[Fi]:"Region"}],KH={version:"1.0",parameters:{Region:UO,UseDualStack:jO,UseFIPS:jO,Endpoint:UO},rules:[{conditions:[{[jt]:WO,[$t]:[$O]}],rules:[{conditions:zO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Mi},{conditions:HO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Mi},{endpoint:{url:$O,properties:Ut,headers:Ut},type:qs}],type:dr},{conditions:[{[jt]:WO,[$t]:GO}],rules:[{conditions:[{[jt]:"aws.partition",[$t]:GO,assign:Uf}],rules:[{conditions:[QO,JO],rules:[{conditions:[{[jt]:Ds,[$t]:[LO,VO]},BO],rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ut,headers:Ut},type:qs}],type:dr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Mi}],type:dr},{conditions:zO,rules:[{conditions:[{[jt]:Ds,[$t]:[VO,LO]}],rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ut,headers:Ut},type:qs}],type:dr},{error:"FIPS is enabled but this partition does not support FIPS",type:Mi}],type:dr},{conditions:HO,rules:[{conditions:[BO],rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ut,headers:Ut},type:qs}],type:dr},{error:"DualStack is enabled but this partition does not support DualStack",type:Mi}],type:dr},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:Ut,headers:Ut},type:qs}],type:dr}],type:dr},{error:"Invalid Configuration: Missing Region",type:Mi}]};ql.ruleSet=KH});var XO=p(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.defaultEndpointResolver=void 0;var QH=Rt(),JH=YO(),YH=(t,e={})=>(0,QH.resolveEndpoint)(JH.ruleSet,{endpointParams:t,logger:e.logger});Dl.defaultEndpointResolver=YH});var t0=p(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.getRuntimeConfig=void 0;var XH=S(),ZH=an(),ZO=Qn(),e0=it(),e2=XO(),t2=t=>({apiVersion:"2018-08-01",base64Decoder:t?.base64Decoder??ZO.fromBase64,base64Encoder:t?.base64Encoder??ZO.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??e2.defaultEndpointResolver,extensions:t?.extensions??[],logger:t?.logger??new XH.NoOpLogger,serviceId:t?.serviceId??"RDS Data",urlParser:t?.urlParser??ZH.parseUrl,utf8Decoder:t?.utf8Decoder??e0.fromUtf8,utf8Encoder:t?.utf8Encoder??e0.toUtf8});Ml.getRuntimeConfig=t2});var i0=p(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.getRuntimeConfig=void 0;var r2=(W(),F(L)),n2=r2.__importDefault(lN()),i2=FO(),o2=fs(),s2=Ef(),a2=hs(),Fl=kt(),c2=ys(),r0=tr(),Ms=er(),n0=Jn(),d2=gs(),l2=Kn(),u2=t0(),p2=S(),m2=ws(),f2=S(),h2=t=>{(0,f2.emitWarningIfUnsupportedVersion)(process.version);let e=(0,m2.resolveDefaultsModeConfig)(t),r=()=>e().then(p2.loadConfigsForDefaultMode),n=(0,u2.getRuntimeConfig)(t);return(0,o2.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??d2.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,i2.decorateDefaultCredentialProvider)(s2.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,a2.defaultUserAgent)({serviceId:n.serviceId,clientVersion:n2.default.version}),maxAttempts:t?.maxAttempts??(0,Ms.loadConfig)(r0.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Ms.loadConfig)(Fl.NODE_REGION_CONFIG_OPTIONS,Fl.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new n0.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Ms.loadConfig)({...r0.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||l2.DEFAULT_RETRY_MODE}),sha256:t?.sha256??c2.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??n0.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ms.loadConfig)(Fl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Ms.loadConfig)(Fl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Ll.getRuntimeConfig=h2});var c0=p(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.resolveRuntimeExtensions=void 0;var o0=Ns(),s0=Ae(),a0=S(),jf=t=>t,y2=(t,e)=>{let r={...jf((0,o0.getAwsRegionExtensionConfiguration)(t)),...jf((0,a0.getDefaultExtensionConfiguration)(t)),...jf((0,s0.getHttpHandlerExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,o0.resolveAwsRegionExtensionConfiguration)(r),...(0,a0.resolveDefaultRuntimeConfig)(r),...(0,s0.resolveHttpHandlerRuntimeConfig)(r)}};Wl.resolveRuntimeExtensions=y2});var Vf=p(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.RDSDataClient=Li.__Client=void 0;var d0=Lo(),g2=Wo(),_2=Uo(),l0=Xt(),u0=Ho(),v2=kt(),w2=Go(),E2=H(),p0=tr(),m0=S();Object.defineProperty(Li,"__Client",{enumerable:!0,get:function(){return m0.Client}});var N2=dN(),S2=i0(),b2=c0(),$f=class extends m0.Client{constructor(...[e]){let r=(0,S2.getRuntimeConfig)(e||{}),n=(0,N2.resolveClientEndpointParameters)(r),i=(0,v2.resolveRegionConfig)(n),o=(0,E2.resolveEndpointConfig)(i),s=(0,p0.resolveRetryConfig)(o),a=(0,d0.resolveHostHeaderConfig)(s),d=(0,l0.resolveAwsAuthConfig)(a),l=(0,u0.resolveUserAgentConfig)(d),u=(0,b2.resolveRuntimeExtensions)(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,p0.getRetryPlugin)(this.config)),this.middlewareStack.use((0,w2.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,d0.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,g2.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,_2.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,l0.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,u0.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};Li.RDSDataClient=$f});var Ul=p(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.RDSDataServiceException=Wi.__ServiceException=void 0;var f0=S();Object.defineProperty(Wi,"__ServiceException",{enumerable:!0,get:function(){return f0.ServiceException}});var Bf=class t extends f0.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};Wi.RDSDataServiceException=Bf});var Xf=p(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Value=M.Field=M.ArrayValue=M.LongReturnType=M.RecordsFormatType=M.DecimalReturnType=M.NotFoundException=M.StatementTimeoutException=M.ServiceUnavailableError=M.InternalServerErrorException=M.ForbiddenException=M.TypeHint=M.BadRequestException=M.AccessDeniedException=void 0;var fn=Ul(),zf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};M.AccessDeniedException=zf;var Hf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};M.BadRequestException=Hf;M.TypeHint={DATE:"DATE",DECIMAL:"DECIMAL",JSON:"JSON",TIME:"TIME",TIMESTAMP:"TIMESTAMP",UUID:"UUID"};var Gf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};M.ForbiddenException=Gf;var Kf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,t.prototype)}};M.InternalServerErrorException=Kf;var Qf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"ServiceUnavailableError",$fault:"server",...e}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,t.prototype)}};M.ServiceUnavailableError=Qf;var Jf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"StatementTimeoutException",$fault:"client",...e}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,t.prototype),this.dbConnectionId=e.dbConnectionId}};M.StatementTimeoutException=Jf;var Yf=class t extends fn.RDSDataServiceException{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,t.prototype)}};M.NotFoundException=Yf;M.DecimalReturnType={DOUBLE_OR_LONG:"DOUBLE_OR_LONG",STRING:"STRING"};M.RecordsFormatType={JSON:"JSON",NONE:"NONE"};M.LongReturnType={LONG:"LONG",STRING:"STRING"};var x2;(function(t){t.visit=(e,r)=>e.booleanValues!==void 0?r.booleanValues(e.booleanValues):e.longValues!==void 0?r.longValues(e.longValues):e.doubleValues!==void 0?r.doubleValues(e.doubleValues):e.stringValues!==void 0?r.stringValues(e.stringValues):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):r._(e.$unknown[0],e.$unknown[1])})(x2=M.ArrayValue||(M.ArrayValue={}));var C2;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.booleanValue!==void 0?r.booleanValue(e.booleanValue):e.longValue!==void 0?r.longValue(e.longValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValue!==void 0?r.arrayValue(e.arrayValue):r._(e.$unknown[0],e.$unknown[1])})(C2=M.Field||(M.Field={}));var O2;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.bitValue!==void 0?r.bitValue(e.bitValue):e.bigIntValue!==void 0?r.bigIntValue(e.bigIntValue):e.intValue!==void 0?r.intValue(e.intValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.realValue!==void 0?r.realValue(e.realValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):e.structValue!==void 0?r.structValue(e.structValue):r._(e.$unknown[0],e.$unknown[1])})(O2=M.Value||(M.Value={}))});var yn=p(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.de_RollbackTransactionCommand=K.de_ExecuteStatementCommand=K.de_ExecuteSqlCommand=K.de_CommitTransactionCommand=K.de_BeginTransactionCommand=K.de_BatchExecuteStatementCommand=K.se_RollbackTransactionCommand=K.se_ExecuteStatementCommand=K.se_ExecuteSqlCommand=K.se_CommitTransactionCommand=K.se_BeginTransactionCommand=K.se_BatchExecuteStatementCommand=void 0;var Fs=fs(),Ui=Ae(),g=S(),lr=Xf(),P2=Ul(),T2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BatchExecute`,d;return d=JSON.stringify((0,g.take)(t,{database:[],parameterSets:l=>Y2(l,e),resourceArn:[],schema:[],secretArn:[],sql:[],transactionId:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_BatchExecuteStatementCommand=T2;var A2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BeginTransaction`,d;return d=JSON.stringify((0,g.take)(t,{database:[],resourceArn:[],schema:[],secretArn:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_BeginTransactionCommand=A2;var R2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/CommitTransaction`,d;return d=JSON.stringify((0,g.take)(t,{resourceArn:[],secretArn:[],transactionId:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_CommitTransactionCommand=R2;var I2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/ExecuteSql`,d;return d=JSON.stringify((0,g.take)(t,{awsSecretStoreArn:[],database:[],dbClusterOrInstanceArn:[],schema:[],sqlStatements:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_ExecuteSqlCommand=I2;var k2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/Execute`,d;return d=JSON.stringify((0,g.take)(t,{continueAfterTimeout:[],database:[],formatRecordsAs:[],includeResultMetadata:[],parameters:l=>g0(l,e),resourceArn:[],resultSetOptions:l=>(0,g._json)(l),schema:[],secretArn:[],sql:[],transactionId:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_ExecuteStatementCommand=k2;var q2=async(t,e)=>{let{hostname:r,protocol:n="https",port:i,path:o}=await e.endpoint(),s={"content-type":"application/json"},a=`${o?.endsWith("/")?o.slice(0,-1):o||""}/RollbackTransaction`,d;return d=JSON.stringify((0,g.take)(t,{resourceArn:[],secretArn:[],transactionId:[]})),new Ui.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:s,path:a,body:d})};K.se_RollbackTransactionCommand=q2;var D2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return M2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{updateResults:o=>lG(o,e)});return Object.assign(r,i),r};K.de_BatchExecuteStatementCommand=D2;var M2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Ls(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},F2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return L2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{transactionId:g.expectString});return Object.assign(r,i),r};K.de_BeginTransactionCommand=F2;var L2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Ls(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},W2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return U2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{transactionStatus:g.expectString});return Object.assign(r,i),r};K.de_CommitTransactionCommand=W2;var U2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await h0(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Ls(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},j2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return $2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{sqlStatementResults:o=>aG(o,e)});return Object.assign(r,i),r};K.de_ExecuteSqlCommand=j2;var $2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},V2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return B2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{columnMetadata:g._json,formattedRecords:g.expectString,generatedFields:o=>Zf(o,e),numberOfRecordsUpdated:g.expectLong,records:o=>oG(o,e)});return Object.assign(r,i),r};K.de_ExecuteStatementCommand=V2;var B2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Ls(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},z2=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return H2(t,e);let r=(0,g.map)({$metadata:Ze(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await hn(t.body,e)),"body"),i=(0,g.take)(n,{transactionStatus:g.expectString});return Object.assign(r,i),r};K.de_RollbackTransactionCommand=z2;var H2=async(t,e)=>{let r={...t,body:await Gi(t.body,e)},n=Ki(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await $i(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await Vi(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Bi(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await zi(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await h0(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await Hi(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Ls(r,e);default:let i=r.body;return ji({output:t,parsedBody:i,errorCode:n})}},ji=(0,g.withBaseException)(P2.RDSDataServiceException),$i=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{message:g.expectString});Object.assign(r,i);let o=new lr.AccessDeniedException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},Vi=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{message:g.expectString});Object.assign(r,i);let o=new lr.BadRequestException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},Bi=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{message:g.expectString});Object.assign(r,i);let o=new lr.ForbiddenException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},zi=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{});Object.assign(r,i);let o=new lr.InternalServerErrorException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},h0=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{message:g.expectString});Object.assign(r,i);let o=new lr.NotFoundException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},Hi=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{});Object.assign(r,i);let o=new lr.ServiceUnavailableError({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},Ls=async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{dbConnectionId:g.expectLong,message:g.expectString});Object.assign(r,i);let o=new lr.StatementTimeoutException({$metadata:Ze(t),...r});return(0,g.decorateServiceException)(o,t.body)},G2=(t,e)=>t.filter(r=>r!=null).map(r=>y0(r,e)),y0=(t,e)=>lr.ArrayValue.visit(t,{arrayValues:r=>({arrayValues:G2(r,e)}),booleanValues:r=>({booleanValues:(0,g._json)(r)}),doubleValues:r=>({doubleValues:K2(r,e)}),longValues:r=>({longValues:(0,g._json)(r)}),stringValues:r=>({stringValues:(0,g._json)(r)}),_:(r,n)=>({name:n})}),K2=(t,e)=>t.filter(r=>r!=null).map(r=>(0,g.serializeFloat)(r)),Q2=(t,e)=>lr.Field.visit(t,{arrayValue:r=>({arrayValue:y0(r,e)}),blobValue:r=>({blobValue:e.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,g.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,n)=>({name:n})}),J2=(t,e)=>(0,g.take)(t,{name:[],typeHint:[],value:r=>Q2(r,e)}),Y2=(t,e)=>t.filter(r=>r!=null).map(r=>g0(r,e)),g0=(t,e)=>t.filter(r=>r!=null).map(r=>J2(r,e)),X2=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>_0((0,Fs.awsExpectUnion)(n),e)),_0=(t,e)=>t.arrayValues!=null?{arrayValues:X2(t.arrayValues,e)}:t.booleanValues!=null?{booleanValues:(0,g._json)(t.booleanValues)}:t.doubleValues!=null?{doubleValues:Z2(t.doubleValues,e)}:t.longValues!=null?{longValues:(0,g._json)(t.longValues)}:t.stringValues!=null?{stringValues:(0,g._json)(t.stringValues)}:{$unknown:Object.entries(t)[0]},v0=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>w0((0,Fs.awsExpectUnion)(n),e)),Z2=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>(0,g.limitedParseDouble)(n)),eG=(t,e)=>t.arrayValue!=null?{arrayValue:_0((0,Fs.awsExpectUnion)(t.arrayValue),e)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,g.expectBoolean)(t.booleanValue)!==void 0?{booleanValue:(0,g.expectBoolean)(t.booleanValue)}:(0,g.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,g.limitedParseDouble)(t.doubleValue)}:(0,g.expectBoolean)(t.isNull)!==void 0?{isNull:(0,g.expectBoolean)(t.isNull)}:(0,g.expectLong)(t.longValue)!==void 0?{longValue:(0,g.expectLong)(t.longValue)}:(0,g.expectString)(t.stringValue)!==void 0?{stringValue:(0,g.expectString)(t.stringValue)}:{$unknown:Object.entries(t)[0]},Zf=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>eG((0,Fs.awsExpectUnion)(n),e)),tG=(t,e)=>(0,g.take)(t,{values:r=>iG(r,e)}),rG=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>tG(n,e)),nG=(t,e)=>(0,g.take)(t,{records:r=>rG(r,e),resultSetMetadata:g._json}),iG=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>w0((0,Fs.awsExpectUnion)(n),e)),oG=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>Zf(n,e)),sG=(t,e)=>(0,g.take)(t,{numberOfRecordsUpdated:g.expectLong,resultFrame:r=>nG(r,e)}),aG=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>sG(n,e)),cG=(t,e)=>(0,g.take)(t,{attributes:r=>v0(r,e)}),dG=(t,e)=>(0,g.take)(t,{generatedFields:r=>Zf(r,e)}),lG=(t,e)=>(t||[]).filter(n=>n!=null).map(n=>dG(n,e)),w0=(t,e)=>t.arrayValues!=null?{arrayValues:v0(t.arrayValues,e)}:(0,g.expectLong)(t.bigIntValue)!==void 0?{bigIntValue:(0,g.expectLong)(t.bigIntValue)}:(0,g.expectBoolean)(t.bitValue)!==void 0?{bitValue:(0,g.expectBoolean)(t.bitValue)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,g.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,g.limitedParseDouble)(t.doubleValue)}:(0,g.expectInt32)(t.intValue)!==void 0?{intValue:(0,g.expectInt32)(t.intValue)}:(0,g.expectBoolean)(t.isNull)!==void 0?{isNull:(0,g.expectBoolean)(t.isNull)}:(0,g.limitedParseFloat32)(t.realValue)!==void 0?{realValue:(0,g.limitedParseFloat32)(t.realValue)}:(0,g.expectString)(t.stringValue)!==void 0?{stringValue:(0,g.expectString)(t.stringValue)}:t.structValue!=null?{structValue:cG(t.structValue,e)}:{$unknown:Object.entries(t)[0]},Ze=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),uG=(t,e)=>(0,g.collectBody)(t,e).then(r=>e.utf8Encoder(r)),hn=(t,e)=>uG(t,e).then(r=>r.length?JSON.parse(r):{}),Gi=async(t,e)=>{let r=await hn(t,e);return r.message=r.message??r.Message,r},Ki=(t,e)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(t.headers,"x-amzn-errortype");if(i!==void 0)return n(t.headers[i]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)}});var th=p(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.BatchExecuteStatementCommand=Qi.$Command=void 0;var pG=H(),mG=re(),N0=S();Object.defineProperty(Qi,"$Command",{enumerable:!0,get:function(){return N0.Command}});var fG=z(),E0=yn(),eh=class t extends N0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,mG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,pG.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[fG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"BatchExecuteStatement"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,E0.se_BatchExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,E0.de_BatchExecuteStatementCommand)(e,r)}};Qi.BatchExecuteStatementCommand=eh});var nh=p(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.BeginTransactionCommand=Ji.$Command=void 0;var hG=H(),yG=re(),b0=S();Object.defineProperty(Ji,"$Command",{enumerable:!0,get:function(){return b0.Command}});var gG=z(),S0=yn(),rh=class t extends b0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,yG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,hG.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[gG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"BeginTransaction"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,S0.se_BeginTransactionCommand)(e,r)}deserialize(e,r){return(0,S0.de_BeginTransactionCommand)(e,r)}};Ji.BeginTransactionCommand=rh});var oh=p(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.CommitTransactionCommand=Yi.$Command=void 0;var _G=H(),vG=re(),C0=S();Object.defineProperty(Yi,"$Command",{enumerable:!0,get:function(){return C0.Command}});var wG=z(),x0=yn(),ih=class t extends C0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,vG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,_G.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[wG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"CommitTransaction"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,x0.se_CommitTransactionCommand)(e,r)}deserialize(e,r){return(0,x0.de_CommitTransactionCommand)(e,r)}};Yi.CommitTransactionCommand=ih});var ah=p(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ExecuteSqlCommand=Xi.$Command=void 0;var EG=H(),NG=re(),P0=S();Object.defineProperty(Xi,"$Command",{enumerable:!0,get:function(){return P0.Command}});var SG=z(),O0=yn(),sh=class t extends P0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,NG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,EG.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[SG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"ExecuteSql"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,O0.se_ExecuteSqlCommand)(e,r)}deserialize(e,r){return(0,O0.de_ExecuteSqlCommand)(e,r)}};Xi.ExecuteSqlCommand=sh});var dh=p(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ExecuteStatementCommand=Zi.$Command=void 0;var bG=H(),xG=re(),A0=S();Object.defineProperty(Zi,"$Command",{enumerable:!0,get:function(){return A0.Command}});var CG=z(),T0=yn(),ch=class t extends A0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,xG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,bG.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[CG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"ExecuteStatement"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,T0.se_ExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,T0.de_ExecuteStatementCommand)(e,r)}};Zi.ExecuteStatementCommand=ch});var uh=p(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.RollbackTransactionCommand=eo.$Command=void 0;var OG=H(),PG=re(),I0=S();Object.defineProperty(eo,"$Command",{enumerable:!0,get:function(){return I0.Command}});var TG=z(),R0=yn(),lh=class t extends I0.Command{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use((0,PG.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,OG.getEndpointPlugin)(r,t.getEndpointParameterInstructions()));let i=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:u=>u,outputFilterSensitiveLog:u=>u,[TG.SMITHY_CONTEXT_KEY]:{service:"RdsDataService",operation:"RollbackTransaction"}},{requestHandler:l}=r;return i.resolve(u=>l.handle(u.request,n||{}),d)}serialize(e,r){return(0,R0.se_RollbackTransactionCommand)(e,r)}deserialize(e,r){return(0,R0.de_RollbackTransactionCommand)(e,r)}};eo.RollbackTransactionCommand=lh});var k0=p($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.RDSData=void 0;var AG=S(),RG=th(),IG=nh(),kG=oh(),qG=ah(),DG=dh(),MG=uh(),FG=Vf(),LG={BatchExecuteStatementCommand:RG.BatchExecuteStatementCommand,BeginTransactionCommand:IG.BeginTransactionCommand,CommitTransactionCommand:kG.CommitTransactionCommand,ExecuteSqlCommand:qG.ExecuteSqlCommand,ExecuteStatementCommand:DG.ExecuteStatementCommand,RollbackTransactionCommand:MG.RollbackTransactionCommand},jl=class extends FG.RDSDataClient{};$l.RDSData=jl;(0,AG.createAggregatedClient)(LG,jl)});var q0=p(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var to=(W(),F(L));to.__exportStar(th(),Br);to.__exportStar(nh(),Br);to.__exportStar(oh(),Br);to.__exportStar(ah(),Br);to.__exportStar(dh(),Br);to.__exportStar(uh(),Br)});var D0=p(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var WG=(W(),F(L));WG.__exportStar(Xf(),ph)});var M0=p(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.RDSDataServiceException=void 0;var Vl=(W(),F(L));Vl.__exportStar(Vf(),zr);Vl.__exportStar(k0(),zr);Vl.__exportStar(q0(),zr);Vl.__exportStar(D0(),zr);zo();var UG=Ul();Object.defineProperty(zr,"RDSDataServiceException",{enumerable:!0,get:function(){return UG.RDSDataServiceException}})});import jG from"path";function pr(t){return typeof t>"u"||t===void 0}function ye(t){return typeof t=="string"}function yh(t){return typeof t=="number"}function Us(t){return typeof t=="boolean"}function js(t){return t===null}function gh(t){return t instanceof Date}function _h(t){return typeof t=="bigint"}function Z(t){return typeof t=="function"}function Pe(t){return typeof t=="object"&&t!==null}function vh(t){return t[t.length-1]}function c(t){return Object.freeze(t)}function St(t){return Array.isArray(t)}function mr(t){return t}var Q=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});var A=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}});var bt=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:A.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var $s=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:A.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var wh=["preserve rows","delete rows","drop"],He=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}});var We=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:A.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:A.create(t),identifier:A.create(e)})}});var gn=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:We.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var no=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:A.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var io=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}});var Ue=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}});var tt=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:We.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:We.createWithSchema(t,e)})}});function ee(t){return Pe(t)&&Z(t.toOperationNode)}function Eh(t){return Pe(t)&&"expressionType"in t&&ee(t)}function Nh(t){return Pe(t)&&"expression"in t&&ye(t.alias)&&ee(t)}var xt=c({is(t){return t.kind==="SelectModifierNode"},create(t){return c({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}});var Vt=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}});var Bt=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}});var _n=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?Vt.create(t.on,r):Bt.create(t.on,r)})}});var Te=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:_n.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?_n.cloneWithOperation(t.on,"And",e):_n.create(e)})},cloneWithOrOn(t,e){return c({...t,on:t.on?_n.cloneWithOperation(t.on,"Or",e):_n.create(e)})}});var oo=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});var ue=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return ue.create([t],[])},createWithChild(t){return ue.create(["",""],[t])},createWithChildren(t){return ue.create(new Array(t.length+1).fill(""),t)}});var Sh=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->"],z0=["+","-","*","/","%","^","&","|","#","<<",">>"],bh=[...Sh,...z0,"&&","||"],H0=["exists","not exists"],G0=["not","-",...H0],xh=[...bh,...G0],vn=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function Bl(t){return ye(t)&&bh.includes(t)}function zl(t){return ye(t)&&Sh.includes(t)}var fr=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});var k=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:A.create(t)})}});var wn=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}});var Gr=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:t,column:e})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:wn.create()})}});var Ch=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}});function Oh(t){return t==="asc"||t==="desc"}function hr(t,e){return Ch.create(K0(t),Q0(e))}function K0(t){return Ge(t)}function Q0(t){if(t)return t==="asc"||t==="desc"?ue.createWithSql(t):t.toOperationNode()}function Hl(t){return ye(t)?zt(t):t.toOperationNode()}function Ht(t){return St(t)?t.map(e=>Ge(e)):[Ge(t)]}function Ge(t){return Kr(t)?yr(t):Hl(t)}function zt(t){let e=".";if(t.includes(e)){let r=t.split(e).map(Ql);if(r.length===3)return J0(r);if(r.length===2)return Y0(r);throw new Error(`invalid column reference ${t}`)}else return k.create(t)}function Ph(t){let e=" as ";if(t.includes(e)){let[r,n]=t.split(e).map(Ql);return Ue.create(zt(r),A.create(n))}else return zt(t)}function Gl(t){return k.create(t)}function Kl(t){let e=" ";if(t.includes(e)){let[r,n]=t.split(e).map(Ql);if(!Oh(n))throw new Error(`invalid order direction "${n}" next to "${r}"`);return hr(r,n)}else return Gl(t)}function J0(t){let[e,r,n]=t;return Gr.create(tt.createWithSchema(e,r),k.create(n))}function Y0(t){let[e,r]=t;return Gr.create(tt.create(e),k.create(r))}function Ql(t){return t.trim()}var Vs=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}});var En=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}});var ve=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Bs(t){return St(t)?X0(t):Ke(t)}function Ke(t){return Kr(t)?yr(t):ve.create(t)}function X0(t){return t.some(Kr)?En.create(t.map(e=>Ke(e))):Vs.create(t)}var Gt=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([t])})},cloneWithItem(t,e){return c({...t,items:c([...t.items,e])})}});var Jl=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});var so=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?Gt.cloneWithItem(t.orderBy,e):Gt.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?Jl.cloneWithItems(t.partitionBy,e):Jl.create(e)})}});var Qr=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}});var Yl=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});var ao=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?Vt.create(t.having,r):Bt.create(t.having,r)})}});var O=c({is(t){return t.kind==="SelectQueryNode"},create(t,e){return c({kind:"SelectQueryNode",from:Qr.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?Gt.cloneWithItem(t.orderBy,e):Gt.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?Yl.cloneWithItems(t.groupBy,e):Yl.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithHaving(t,e){return c({...t,having:t.having?ao.cloneWithOperation(t.having,"And",e):ao.create(e)})},cloneWithOrHaving(t,e){return c({...t,having:t.having?ao.cloneWithOperation(t.having,"Or",e):ao.create(e)})},cloneWithSetOperation(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,e]):c([e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});var zs=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function oe(t){return Hs("exists",t)}function te(t){return Hs("not exists",t)}function Hs(t,e){return zs.create(vn.create(t),Ge(e))}function b(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var co=class t{#e;constructor(e){this.#e=c(e)}on(...e){return new t({...this.#e,joinNode:Te.cloneWithOn(this.#e.joinNode,Xl(e))})}orOn(...e){return new t({...this.#e,joinNode:Te.cloneWithOrOn(this.#e.joinNode,Xl(e))})}onRef(e,r,n){return new t({...this.#e,joinNode:Te.cloneWithOn(this.#e.joinNode,J(e,r,n))})}orOnRef(e,r,n){return new t({...this.#e,joinNode:Te.cloneWithOrOn(this.#e.joinNode,J(e,r,n))})}onExists(e){return new t({...this.#e,joinNode:Te.cloneWithOn(this.#e.joinNode,oe(e))})}onNotExists(e){return new t({...this.#e,joinNode:Te.cloneWithOn(this.#e.joinNode,te(e))})}orOnExists(e){return new t({...this.#e,joinNode:Te.cloneWithOrOn(this.#e.joinNode,oe(e))})}orOnNotExists(e){return new t({...this.#e,joinNode:Te.cloneWithOrOn(this.#e.joinNode,te(e))})}onTrue(){return new t({...this.#e,joinNode:Te.cloneWithOn(this.#e.joinNode,ue.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}};b(co,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var Th=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function Ah(t){return Ht(t).map(Th.create)}var lo=class t{#e;constructor(e){this.#e=c(e)}orderBy(e,r){return new t({overNode:so.cloneWithOrderByItem(this.#e.overNode,hr(e,r))})}partitionBy(e){return new t({overNode:so.cloneWithPartitionByItems(this.#e.overNode,Ah(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}};b(lo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var Nn=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:wn.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:Gr.createSelectAll(t)})}});var Gs=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return Hl(this.#e)}};function Rh(t){return Pe(t)&&ee(t)&&ye(t.dynamicReference)}function Kt(t){return Z(t)?Kt(t(De())):St(t)?t.map(e=>Ih(e)):[Ih(t)]}function Ih(t){return ye(t)?Nn.create(Ph(t)):Rh(t)?Nn.create(t.toOperationNode()):Nn.create(Ks(t))}function Ct(t){return t?Array.isArray(t)?t.map(kh):[kh(t)]:[Nn.createSelectAll()]}function kh(t){if(ye(t))return Nn.createSelectAllFromTable(se(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}var qh=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}});var Dh=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function Mh(t){let e=Z(t)?t(De()):t,r=St(e)?e:c([e]);return Z0(r)}function Z0(t){let e=eP(t);return[c([...e.keys()].map(k.create)),qh.create(t.map(r=>tP(r,e)))]}function eP(t){let e=new Map;for(let r of t){let n=Object.keys(r);for(let i of n)!e.has(i)&&r[i]!==void 0&&e.set(i,e.size)}return e}function tP(t,e){let r=Object.keys(t),n=Array.from({length:e.size}),i=!1;for(let s of r){let a=e.get(s);if(pr(a))continue;let d=t[s];(pr(d)||Kr(d))&&(i=!0),n[a]=d}if(r.length<e.size||i){let s=Dh.create();return En.create(n.map(a=>pr(a)?s:Ke(a)))}return Vs.create(n)}var je=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return c({...t,...e})}});var Jr=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return c({...t,from:t.from?Qr.cloneWithFroms(t.from,e):Qr.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})}});var Zl=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}});var gr=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:Qr.create(t),...e&&{with:e}})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?Gt.cloneWithItem(t.orderBy,e):Gt.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?Zl.cloneWithTables(t.using,e):Zl.create(e)})}});var ge=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?Vt.create(t.where,r):Bt.create(t.where,r)})}});var eu=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}});var Fh=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}});var N=c({is(t){return O.is(t)||je.is(t)||Jr.is(t)||gr.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?ge.cloneWithOperation(t.where,"And",e):ge.create(e)})},cloneWithOrWhere(t,e){return c({...t,where:t.where?ge.cloneWithOperation(t.where,"Or",e):ge.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?eu.cloneWithSelections(t.returning,e):eu.create(e)})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Fh.create(e,r?.toOperationNode())})}});var Lh=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function Sn(t){let e=Z(t)?t(De()):t;return Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>Lh.create(k.create(r),Ke(n)))}var Wh=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});var uo=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};for(let t of["insertId","numInsertedOrUpdatedRows"])Object.defineProperty(uo.prototype,t,{enumerable:!0});var Ot=class extends Error{node;constructor(e){super("no result"),this.node=e}};function _r(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}var B=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?ge.cloneWithOperation(t.indexWhere,"And",e):ge.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?ge.cloneWithOperation(t.indexWhere,"Or",e):ge.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?ge.cloneWithOperation(t.updateWhere,"And",e):ge.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?ge.cloneWithOperation(t.updateWhere,"Or",e):ge.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var po=class t{#e;constructor(e){this.#e=c(e)}column(e){let r=k.create(e);return new t({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,r]):c([r])})})}columns(e){let r=e.map(k.create);return new t({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,...r]):c(r)})})}constraint(e){return new t({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{constraint:A.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:B.cloneWithIndexWhere(this.#e.onConflictNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,onConflictNode:B.cloneWithIndexWhere(this.#e.onConflictNode,J(e,r,n))})}orWhere(...e){return new t({...this.#e,onConflictNode:B.cloneWithIndexOrWhere(this.#e.onConflictNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,onConflictNode:B.cloneWithIndexOrWhere(this.#e.onConflictNode,J(e,r,n))})}whereExists(e){return new t({...this.#e,onConflictNode:B.cloneWithIndexWhere(this.#e.onConflictNode,oe(e))})}whereNotExists(e){return new t({...this.#e,onConflictNode:B.cloneWithIndexWhere(this.#e.onConflictNode,te(e))})}orWhereExists(e){return new t({...this.#e,onConflictNode:B.cloneWithIndexOrWhere(this.#e.onConflictNode,oe(e))})}orWhereNotExists(e){return new t({...this.#e,onConflictNode:B.cloneWithIndexOrWhere(this.#e.onConflictNode,te(e))})}clearWhere(){return new t({...this.#e,onConflictNode:B.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Qs({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Js({...this.#e,onConflictNode:B.cloneWith(this.#e.onConflictNode,{updates:Sn(e)})})}$call(e){return e(this)}};b(po,"don't await OnConflictBuilder instances.");var Qs=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.onConflictNode}};b(Qs,"don't await OnConflictDoNothingBuilder instances.");var Js=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateWhere(this.#e.onConflictNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,onConflictNode:B.cloneWithUpdateWhere(this.#e.onConflictNode,J(e,r,n))})}orWhere(...e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateOrWhere(this.#e.onConflictNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,onConflictNode:B.cloneWithUpdateOrWhere(this.#e.onConflictNode,J(e,r,n))})}whereExists(e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateWhere(this.#e.onConflictNode,oe(e))})}whereNotExists(e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateWhere(this.#e.onConflictNode,te(e))})}orWhereExists(e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateOrWhere(this.#e.onConflictNode,oe(e))})}orWhereNotExists(e){return new t({...this.#e,onConflictNode:B.cloneWithUpdateOrWhere(this.#e.onConflictNode,te(e))})}clearWhere(){return new t({...this.#e,onConflictNode:B.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}};b(Js,"don't await OnConflictUpdateBuilder instances.");var bn=class t{#e;constructor(e){this.#e=c(e)}values(e){let[r,n]=Mh(e);return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{columns:r,values:n})})}columns(e){return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{columns:c(e.map(k.create))})})}expression(e){return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{values:yr(e)})})}ignore(){return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{onConflict:e(new po({onConflictNode:B.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:je.cloneWith(this.#e.queryNode,{onDuplicateKey:Wh.create(Sn(e))})})}returning(e){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Kt(e))})}returningAll(){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Ct())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new uo(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ot){let r=await this.executeTakeFirst();if(r===void 0)throw _r(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:N.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};b(bn,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var mo=class{#e;constructor(e){this.#e=e}get numDeletedRows(){return this.#e}};Object.defineProperty(mo.prototype,"numDeletedRows",{enumerable:!0});var Ys=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:ve.create(t)})}});var fo=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,J(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,J(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,oe(e))})}whereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,te(e))})}orWhereExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,oe(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,te(e))})}clearWhere(){return new t({...this.#e,queryNode:N.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new t({...this.#e,queryNode:gr.cloneWithUsing(this.#e.queryNode,ft(e))})}innerJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("FullJoin",e))})}returning(e){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Kt(e))})}returningAll(e){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Ct(e))})}orderBy(e,r){return new t({...this.#e,queryNode:gr.cloneWithOrderByItem(this.#e.queryNode,hr(e,r))})}limit(e){return new t({...this.#e,queryNode:gr.cloneWithLimit(this.#e.queryNode,Ys.create(e))})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new mo(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ot){let r=await this.executeTakeFirst();if(r===void 0)throw _r(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:N.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};b(fo,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var ho=class{#e;constructor(e){this.#e=e}get numUpdatedRows(){return this.#e}};Object.defineProperty(ho.prototype,"numUpdatedRows",{enumerable:!0});var yo=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,J(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,J(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,oe(e))})}whereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,te(e))})}orWhereExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,oe(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,te(e))})}clearWhere(){return new t({...this.#e,queryNode:N.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new t({...this.#e,queryNode:Jr.cloneWithFromItems(this.#e.queryNode,ft(e))})}innerJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("FullJoin",e))})}set(e){return new t({...this.#e,queryNode:Jr.cloneWithUpdates(this.#e.queryNode,Sn(e))})}returning(e){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Kt(e))})}returningAll(){return new t({...this.#e,queryNode:N.cloneWithReturning(this.#e.queryNode,Ct())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new ho(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ot){let r=await this.executeTakeFirst();if(r===void 0)throw _r(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:N.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};b(yo,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var Uh=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})}});var tu=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:tt.create(t),columns:e?c(e.map(k.create)):void 0})}});function ru(t,e){let r=e(jh());return Uh.create(rP(t),r.toOperationNode())}function rP(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],n=e[1].split(",").map(i=>i.trim());return tu.create(r,n)}else return tu.create(t)}var go=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}});var $h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function Vh(t){let e="";for(let r=0;r<t;++r)e+=nP();return e}function nP(){return $h[~~(Math.random()*$h.length)]}function D(){return new nu}var nu=class{#e;get queryId(){return this.#e===void 0&&(this.#e=Vh(8)),this.#e}};var xn=class{nodeStack=[];#e=c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",table:this.transformNode(e.table),column:this.transformNode(e.column)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};var iP=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Xs=class extends xn{#e;#t=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);let r=this.#n(e);for(let i of r)this.#t.add(i);let n=super.transformNodeImpl(e);for(let i of r)this.#t.delete(i);return n}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:A.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:tt.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(e){return e.kind in iP}#n(e){let r=new Set;if("name"in e&&e.name&&We.is(e.name)&&this.#o(e.name,r),"from"in e&&e.from)for(let n of e.from.froms)this.#i(n,r);if("into"in e&&e.into&&this.#i(e.into,r),"table"in e&&e.table&&this.#i(e.table,r),"joins"in e&&e.joins)for(let n of e.joins)this.#i(n.table,r);return"with"in e&&e.with&&this.#s(e.with,r),r}#i(e,r){let n=tt.is(e)?e:Ue.is(e)&&tt.is(e.node)?e.node:null;n&&this.#o(n.table,r)}#o(e,r){this.#t.has(e.identifier.name)||r.add(e.identifier.name)}#s(e,r){for(let n of e.expressions)r.delete(n.name.table.table.identifier.name)}};var Qe=class{#e;constructor(e){this.#e=new Xs(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};var Cn=class t{#e;constructor(e){this.#e=c(e)}selectFrom(e){return new Qt({queryId:D(),executor:this.#e.executor,queryNode:O.create(ft(e),this.#e.withNode)})}insertInto(e){return new bn({queryId:D(),executor:this.#e.executor,queryNode:je.create(se(e),this.#e.withNode)})}replaceInto(e){return new bn({queryId:D(),executor:this.#e.executor,queryNode:je.create(se(e),this.#e.withNode,!0)})}deleteFrom(e){return new fo({queryId:D(),executor:this.#e.executor,queryNode:gr.create(ft(e),this.#e.withNode)})}updateTable(e){return new yo({queryId:D(),executor:this.#e.executor,queryNode:Jr.create(vr(e),this.#e.withNode)})}with(e,r){let n=ru(e,r);return new t({...this.#e,withNode:this.#e.withNode?go.cloneWithExpression(this.#e.withNode,n):go.create(n)})}withRecursive(e,r){let n=ru(e,r);return new t({...this.#e,withNode:this.#e.withNode?go.cloneWithExpression(this.#e.withNode,n):go.create(n,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Qe(e))})}};var _o=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};var Bh=new Set;function zh(t){Bh.has(t)||(Bh.add(t),console.log(t))}var oP=c([]),On=class{#e;constructor(e=oP){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let n of this.#e){let i=n.transformQuery({node:e,queryId:r});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async n=>{let i=await n.executeQuery(e),o=await this.#t(i,r);return sP(i,o),o})}async*stream(e,r,n){let i=new _o,o=new _o;this.provideConnection(async a=>(i.resolve(a),await o.promise)).catch(a=>i.reject(a));let s=await i.promise;try{for await(let a of s.streamQuery(e,r))yield await this.#t(a,n)}finally{o.resolve()}}async#t(e,r){for(let n of this.#e)e=await n.transformResult({result:e,queryId:r});return e}};function sP(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||zh("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}var iu=class t extends On{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}},Yr=new iu;function ou(){return new Qt({queryId:D(),executor:Yr,queryNode:O.create(ft([]))})}function jh(){return new Cn({executor:Yr})}function Zs(t,e){return new co({joinNode:Te.create(t,vr(e))})}function Hh(){return new lo({overNode:so.create()})}var vo=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}});var Me=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),vo.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});function ea(t,e,r){if(!Bl(e)&&!ee(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return dP(e,r)?lP(t,e,r):oo.create(Ge(t),cu(e),Bs(r))}function aP(t,e,r){if(!Bl(e)&&!ee(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return oo.create(Ge(t),cu(e),Ge(r))}function cP(t,e,r){if(!zl(e)&&!ee(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return ea(t,e,r)}function J(t,e,r){if(!zl(e)&&!ee(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return aP(t,e,r)}function _e(t){return ta("where",t)}function su(t){return ta("having",t)}function Xl(t){return ta("on",t)}function au(t){return ta("when",t)}function ta(t,e){if(e.length===3)return cP(e[0],e[1],e[2]);if(e.length===1)return uP(t,e[0]);throw Gh(t,e)}function dP(t,e){return(t==="is"||t==="is not")&&(js(e)||Us(e))}function lP(t,e,r){return oo.create(Ge(t),cu(e),ve.createImmediate(r))}function cu(t){if(ye(t)&&xh.includes(t))return vn.create(t);if(ee(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function uP(t,e){if(Z(e)){if(t==="when")throw new Error("when method doesn't accept a callback as an argument");return pP[t](e)}else if(ee(e)){let r=e.toOperationNode();if(ue.is(r)||oo.is(r)||zs.is(r)||fr.is(r)||Me.is(r))return r}else if(t==="when")return ve.create(e);throw Gh(t,e)}function Gh(t,e){return new Error(`invalid arguments passed to a '${t}' method: ${JSON.stringify(e)}`)}var pP=c({where(t){let e=ou(),r=De(),i=t(Object.assign(e,r)).toOperationNode();if(O.is(i)){if(!i.where)throw new Error("no `where` methods called inside a group callback");return fr.create(i.where.where)}else return i},having(t){let e=ou(),r=De(),i=t(Object.assign(e,r)).toOperationNode();if(O.is(i)){if(!i.having)throw new Error("no `having` methods called inside a group callback");return fr.create(i.having.having)}else return i},on(t){let e=Zs("InnerJoin","table"),r=De(),i=t(Object.assign(e,r)).toOperationNode();if(Te.is(i)){if(!i.on)throw new Error("no `on` methods called inside a group callback");return fr.create(i.on.on)}else return i}});function be(t,e){if(e.length===3)return fP(t,e[0],e[1],e[2]);if(e.length===2)return mP(t,e[0],e[1]);throw new Error("not implemented")}function mP(t,e,r){return r(Zs(t,e)).toOperationNode()}function fP(t,e,r,n){return Te.createWithOn(t,vr(e),J(r,"=",n))}var Kh=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:ve.create(t)})}});var Qh=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function Jh(t){return t=Z(t)?t(De()):t,Ht(t).map(Qh.create)}var ra=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Xr(t,e,r){return ra.create(t,e.toOperationNode(),r)}var Qt=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}where(...e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,J(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,J(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,oe(e))})}whereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithWhere(this.#e.queryNode,te(e))})}orWhereExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,oe(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:N.cloneWithOrWhere(this.#e.queryNode,te(e))})}having(...e){return new t({...this.#e,queryNode:O.cloneWithHaving(this.#e.queryNode,su(e))})}havingRef(e,r,n){return new t({...this.#e,queryNode:O.cloneWithHaving(this.#e.queryNode,J(e,r,n))})}orHaving(...e){return new t({...this.#e,queryNode:O.cloneWithOrHaving(this.#e.queryNode,su(e))})}orHavingRef(e,r,n){return new t({...this.#e,queryNode:O.cloneWithOrHaving(this.#e.queryNode,J(e,r,n))})}havingExists(e){return new t({...this.#e,queryNode:O.cloneWithHaving(this.#e.queryNode,oe(e))})}havingNotExist(e){return new t({...this.#e,queryNode:O.cloneWithHaving(this.#e.queryNode,te(e))})}havingNotExists(e){return new t({...this.#e,queryNode:O.cloneWithHaving(this.#e.queryNode,te(e))})}orHavingExists(e){return new t({...this.#e,queryNode:O.cloneWithOrHaving(this.#e.queryNode,oe(e))})}orHavingNotExists(e){return new t({...this.#e,queryNode:O.cloneWithOrHaving(this.#e.queryNode,te(e))})}select(e){return new t({...this.#e,queryNode:O.cloneWithSelections(this.#e.queryNode,Kt(e))})}distinctOn(e){return new t({...this.#e,queryNode:O.cloneWithDistinctOn(this.#e.queryNode,Ht(e))})}modifyFront(e){return new t({...this.#e,queryNode:O.cloneWithFrontModifier(this.#e.queryNode,xt.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:O.cloneWithFrontModifier(this.#e.queryNode,xt.create("Distinct"))})}forUpdate(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("ForUpdate"))})}forShare(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("ForShare"))})}forKeyShare(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("ForKeyShare"))})}forNoKeyUpdate(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("ForNoKeyUpdate"))})}skipLocked(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:O.cloneWithEndModifier(this.#e.queryNode,xt.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:O.cloneWithSelections(this.#e.queryNode,Ct(e))})}innerJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("FullJoin",e))})}innerJoinLateral(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("LateralInnerJoin",e))})}leftJoinLateral(...e){return new t({...this.#e,queryNode:N.cloneWithJoin(this.#e.queryNode,be("LateralLeftJoin",e))})}orderBy(e,r){return new t({...this.#e,queryNode:O.cloneWithOrderByItem(this.#e.queryNode,hr(e,r))})}groupBy(e){return new t({...this.#e,queryNode:O.cloneWithGroupByItems(this.#e.queryNode,Jh(e))})}limit(e){return new t({...this.#e,queryNode:O.cloneWithLimit(this.#e.queryNode,Ys.create(e))})}offset(e){return new t({...this.#e,queryNode:O.cloneWithOffset(this.#e.queryNode,Kh.create(e))})}union(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:O.cloneWithSetOperation(this.#e.queryNode,Xr("except",e,!0))})}as(e){return new du(this,e)}clearSelect(){return new t({...this.#e,queryNode:O.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:N.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:O.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:O.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:O.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Ot){let r=await this.executeTakeFirst();if(r===void 0)throw _r(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:N.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};b(Qt,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var du=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ue.create(this.#e.toOperationNode(),A.create(this.#t))}};var le=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new lu(this,e)}$castTo(){return new t(this.#e)}toOperationNode(){return this.#e}},lu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ue.create(this.#e.toOperationNode(),ee(this.#t)?this.#t.toOperationNode():A.create(this.#t))}};var $e=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?ge.cloneWithOperation(t.filter,"And",e):ge.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?ge.cloneWithOperation(t.filter,"Or",e):ge.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}});var Yh=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var Pn=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}as(e){return new uu(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithFilter(this.#e.aggregateFunctionNode,_e(e))})}filterWhereExists(e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithFilter(this.#e.aggregateFunctionNode,oe(e))})}filterWhereNotExists(e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithFilter(this.#e.aggregateFunctionNode,te(e))})}filterWhereRef(e,r,n){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithFilter(this.#e.aggregateFunctionNode,J(e,r,n))})}orFilterWhere(...e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithOrFilter(this.#e.aggregateFunctionNode,_e(e))})}orFilterWhereExists(e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithOrFilter(this.#e.aggregateFunctionNode,oe(e))})}orFilterWhereNotExists(e){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithOrFilter(this.#e.aggregateFunctionNode,te(e))})}orFilterWhereRef(e,r,n){return new t({...this.#e,aggregateFunctionNode:$e.cloneWithOrFilter(this.#e.aggregateFunctionNode,J(e,r,n))})}over(e){let r=Hh();return new t({...this.#e,aggregateFunctionNode:$e.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.aggregateFunctionNode}};b(Pn,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var uu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ue.create(this.#e.toOperationNode(),A.create(this.#t))}};function na(){let t=(r,n)=>new le(Yh.create(r,Ht(n))),e=(r,n)=>new Pn({aggregateFunctionNode:$e.create(r,n?Ht(n):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...n){return t("coalesce",[r,...n])},count(r){return e("count",[r])},countAll(r){return new Pn({aggregateFunctionNode:$e.create("count",Ct(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])}})}var Tn=class{#e;constructor(e){this.#e=c(e)}when(...e){return new ia({...this.#e,node:Me.cloneWithWhen(this.#e.node,vo.create(au(e)))})}},ia=class{#e;constructor(e){this.#e=c(e)}then(e){return new pu({...this.#e,node:Me.cloneWithThen(this.#e.node,Ke(e))})}},pu=class{#e;constructor(e){this.#e=c(e)}when(...e){return new ia({...this.#e,node:Me.cloneWithWhen(this.#e.node,vo.create(au(e)))})}else(e){return new mu({...this.#e,node:Me.cloneWith(this.#e.node,{else:Ke(e)})})}end(){return new le(Me.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new le(Me.cloneWith(this.#e.node,{isStatement:!0}))}},mu=class{#e;constructor(e){this.#e=c(e)}end(){return new le(Me.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new le(Me.cloneWith(this.#e.node,{isStatement:!0}))}};function Xh(t=Yr){function e(r,n){return new le(Hs(r,n))}return{get fn(){return na()},selectFrom(r){return new Qt({queryId:D(),executor:t,queryNode:O.create(ft(r))})},case(r){return new Tn({node:Me.create(pr(r)?void 0:Ge(r))})},ref(r){return new le(zt(r))},val(r){return new le(Bs(r))},cmpr(r,n,i){return new le(ea(r,n,i))},bxp(r,n,i){return new le(ea(r,n,i))},unary:e,not(r){return e("not",r)},exists(r){return e("exists",r)},neg(r){return e("-",r)},and(r){if(r.length===0)return new le(ve.createImmediate(!0));if(r.length===1)return new le(r[0].toOperationNode());let n=Vt.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Vt.create(n,r[i].toOperationNode());return new le(fr.create(n))},or(r){if(r.length===0)return new le(ve.createImmediate(!1));if(r.length===1)return new le(r[0].toOperationNode());let n=Bt.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Bt.create(n,r[i].toOperationNode());return new le(fr.create(n))},withSchema(r){return Xh(t.withPluginAtFront(new Qe(r)))}}}function De(t){return Xh()}function yr(t){if(ee(t))return t.toOperationNode();if(Z(t))return t(De()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Ks(t){if(ee(t))return t.toOperationNode();if(Z(t))return t(De()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function Kr(t){return Eh(t)||Nh(t)||Z(t)}function ft(t){return St(t)?t.map(e=>vr(e)):[vr(t)]}function vr(t){return ye(t)?hP(t):Ks(t)}function hP(t){let e=" as ";if(t.includes(e)){let[r,n]=t.split(e).map(Zh);return Ue.create(se(r),A.create(n))}else return se(t)}function se(t){let e=".";if(t.includes(e)){let[r,n]=t.split(e).map(Zh);return tt.createWithSchema(r,n)}else return tt.create(t)}function Zh(t){return t.trim()}var fu=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}});var Jt=c({is(t){return t.kind==="AlterColumnNode"},create(t){return c({kind:"AlterColumnNode",column:k.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Y=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:k.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}});var hu=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:k.create(t)})}});var yu=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:k.create(t),renameTo:k.create(e)})}});var An=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?A.create(e):void 0})}});var ey=["no action","restrict","cascade","set null","set default"],Rn=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function oa(t){return ee(t)?t.toOperationNode():ve.createImmediate(t)}var wo=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}});var ty=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function In(t){if(ey.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Pt=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(Y.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new t(Y.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=zt(e);if(!Gr.is(r)||wn.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(Y.cloneWith(this.#e,{references:Rn.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(Y.cloneWith(this.#e,{references:Rn.cloneWithOnDelete(this.#e.references,In(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(Y.cloneWith(this.#e,{references:Rn.cloneWithOnUpdate(this.#e.references,In(e))}))}unique(){return new t(Y.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(Y.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(Y.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(Y.cloneWith(this.#e,{defaultTo:ty.create(oa(e))}))}check(e){return new t(Y.cloneWith(this.#e,{check:An.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(Y.cloneWith(this.#e,{generated:wo.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(Y.cloneWith(this.#e,{generated:wo.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(Y.cloneWith(this.#e,{generated:wo.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(Y.cloneWith(this.#e,{generated:wo.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(Y.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new t(Y.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}};b(Pt,"don't await ColumnDefinitionBuilder instances directly.");var gu=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}});var ry=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function Yt(t){return ee(t)?t.toOperationNode():ry.create(t)}var Zr=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,n){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Rn.create(e,r),name:n?A.create(n):void 0})},cloneWith(t,e){return c({...t,...e})}});var en=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(Zr.cloneWith(this.#e,{onDelete:In(e)}))}onUpdate(e){return new t(Zr.cloneWith(this.#e,{onUpdate:In(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}};b(en,"don't await ForeignKeyConstraintBuilder instances directly.");var Eo=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}});var sa=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return c({kind:"UniqueConstraintNode",columns:c(t.map(k.create)),name:e?A.create(e):void 0})}});var kn=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:A.create(t)})},cloneWith(t,e){return c({...t,...e})}});var rn=class{alterColumnNode;constructor(e){this.alterColumnNode=e}setDataType(e){return new tn(Jt.cloneWith(this.alterColumnNode,{dataType:Yt(e)}))}setDefault(e){return new tn(Jt.cloneWith(this.alterColumnNode,{setDefault:oa(e)}))}dropDefault(){return new tn(Jt.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new tn(Jt.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new tn(Jt.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}$call(e){return e(this)}},tn=class extends rn{toOperationNode(){return this.alterColumnNode}};var wr=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(wr,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var No=class t{#e;constructor(e){this.#e=c(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Q.cloneWithTableProps(this.#e.node,{addConstraint:Eo.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(No,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var So=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{dropConstraint:kn.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{dropConstraint:kn.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{dropConstraint:kn.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(So,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var bo=class{#e;constructor(e){this.#e=c(e)}renameTo(e){return new wr({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{renameTo:se(e)})})}setSchema(e){return new wr({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{setSchema:A.create(e)})})}alterColumn(e,r){let n=r(new rn(Jt.create(e)));return new Er({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(e){return new Er({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,hu.create(e))})}renameColumn(e,r){return new Er({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,yu.create(e,r))})}addColumn(e,r,n=mr){let i=n(new Pt(Y.create(e,Yt(r))));return new Er({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,fu.create(i.toOperationNode()))})}modifyColumn(e,r,n=mr){let i=n(new Pt(Y.create(e,Yt(r))));return new Er({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,gu.create(i.toOperationNode()))})}addUniqueConstraint(e,r){return new wr({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{addConstraint:Eo.create(sa.create(r,e))})})}addCheckConstraint(e,r){return new wr({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{addConstraint:Eo.create(An.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,n,i){return new No({...this.#e,constraintBuilder:new en(Zr.create(r.map(k.create),se(n),i.map(k.create),e))})}dropConstraint(e){return new So({...this.#e,node:Q.cloneWithTableProps(this.#e.node,{dropConstraint:kn.create(e)})})}$call(e){return e(this)}call(e){return this.$call(e)}},Er=class t{#e;constructor(e){this.#e=c(e)}alterColumn(e,r){let n=r(new rn(Jt.create(e)));return new t({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,hu.create(e))})}renameColumn(e,r){return new t({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,yu.create(e,r))})}addColumn(e,r,n=mr){let i=n(new Pt(Y.create(e,Yt(r))));return new t({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,fu.create(i.toOperationNode()))})}modifyColumn(e,r,n=mr){let i=n(new Pt(Y.create(e,Yt(r))));return new t({...this.#e,node:Q.cloneWithColumnAlteration(this.#e.node,gu.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(bo,"don't await AlterTableBuilder instances");b(rn,"don't await AlterColumnBuilder instances");b(Er,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var qn=class extends xn{transformValue(e){return{...super.transformValue(e),immediate:!0}}};var xo=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:bt.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:bt.cloneWith(this.#e.node,{unique:!0})})}on(e){return new t({...this.#e,node:bt.cloneWith(this.#e.node,{table:se(e)})})}column(e){return new t({...this.#e,node:bt.cloneWithColumns(this.#e.node,[Kl(e)])})}columns(e){return new t({...this.#e,node:bt.cloneWithColumns(this.#e.node,e.map(Kl))})}expression(e){return new t({...this.#e,node:bt.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:bt.cloneWith(this.#e.node,{using:ue.createWithSql(e)})})}where(...e){let r=new qn;return new t({...this.#e,node:N.cloneWithWhere(this.#e.node,r.transformNode(_e(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(xo,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Co=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:$s.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Co,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var ny=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(k.create)),name:e?A.create(e):void 0})}});function iy(t){if(wh.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Oo=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:He.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:He.cloneWith(this.#e.node,{onCommit:iy(e)})})}ifNotExists(){return new t({...this.#e,node:He.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,n=mr){let i=n(new Pt(Y.create(e,Yt(r))));return new t({...this.#e,node:He.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new t({...this.#e,node:He.cloneWithConstraint(this.#e.node,ny.create(r,e))})}addUniqueConstraint(e,r){return new t({...this.#e,node:He.cloneWithConstraint(this.#e.node,sa.create(r,e))})}addCheckConstraint(e,r){return new t({...this.#e,node:He.cloneWithConstraint(this.#e.node,An.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,n,i,o=mr){let s=o(new en(Zr.create(r.map(k.create),se(n),i.map(k.create),e)));return new t({...this.#e,node:He.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:He.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:He.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}call(e){return this.$call(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Oo,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Po=class t{#e;constructor(e){this.#e=c(e)}on(e){return new t({...this.#e,node:gn.cloneWith(this.#e.node,{table:se(e)})})}ifExists(){return new t({...this.#e,node:gn.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:gn.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Po,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var To=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:no.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:no.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(To,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Ao=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:io.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:io.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Ao,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var ht=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:We.create(t)})},cloneWith(t,e){return c({...t,...e})}});var aa=class{#e=new qn;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};var Ro=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:ht.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:ht.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:ht.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:ht.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:ht.cloneWith(this.#e.node,{columns:e.map(Gl)})})}as(e){let r=e.withPlugin(new aa).toOperationNode();return new t({...this.#e,node:ht.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Ro,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var Dn=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:We.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Io=class t{#e;constructor(e){this.#e=c(e)}materialized(){return new t({...this.#e,node:Dn.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:Dn.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Dn.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(Io,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var ca=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:En.create(e.map(r=>ve.createImmediate(r)))})}});var ko=class t{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:ca.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(ko,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var da=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var qo=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:da.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};b(qo,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function _u(t){let e=".";if(t.includes(e)){let r=t.split(e).map(yP);if(r.length===2)return We.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return We.create(t)}function yP(t){return t.trim()}var la=class t{#e;constructor(e){this.#e=e}createTable(e){return new Oo({queryId:D(),executor:this.#e,node:He.create(se(e))})}dropTable(e){return new Ao({queryId:D(),executor:this.#e,node:io.create(se(e))})}createIndex(e){return new xo({queryId:D(),executor:this.#e,node:bt.create(e)})}dropIndex(e){return new Po({queryId:D(),executor:this.#e,node:gn.create(e)})}createSchema(e){return new Co({queryId:D(),executor:this.#e,node:$s.create(e)})}dropSchema(e){return new To({queryId:D(),executor:this.#e,node:no.create(e)})}alterTable(e){return new bo({queryId:D(),executor:this.#e,node:Q.create(se(e))})}createView(e){return new Ro({queryId:D(),executor:this.#e,node:ht.create(e)})}dropView(e){return new Io({queryId:D(),executor:this.#e,node:Dn.create(e)})}createType(e){return new ko({queryId:D(),executor:this.#e,node:ca.create(_u(e))})}dropType(e){return new qo({queryId:D(),executor:this.#e,node:da.create(_u(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new Qe(e)))}};var ua=class{ref(e){return new Gs(e)}};var pa=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};var ma=class t extends On{#e;#t;#r;constructor(e,r,n,i=[]){super(i),this.#e=e,this.#t=r,this.#r=n}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}};function vu(){return typeof performance<"u"&&Z(performance.now)?performance.now():Date.now()}var fa=class{#e;#t;#r;#n;#i=new WeakSet;constructor(e,r){this.#e=e,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){await this.init();let e=await this.#e.acquireConnection();return this.#i.has(e)||(this.#o()&&this.#s(e),this.#i.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(e){let r=e.executeQuery;e.executeQuery=async n=>{let i=vu();try{return await r.call(e,n)}catch(o){throw await this.#d(o,n,i),o}finally{await this.#l(n,i)}}}async#d(e,r,n){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#c(n)}))}async#l(e,r){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(r)}))}#c(e){return vu()-e}};var Do=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;let r=this.#r(e);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(e){return await e(this.#e)}};var oy=["read uncommitted","read committed","repeatable read","serializable"];var wZ=c(["query","error"]),ha=class{#e;#t;constructor(e){Z(e)?(this.#t=e,this.#e=c({query:!0,error:!0})):(this.#t=gP,this.#e=c({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}};function gP(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function sy(t){return Pe(t)&&Z(t.compile)}var Mn=class t extends Cn{#e;constructor(e){let r,n;if(_P(e))r={executor:e.executor},n={...e};else{let i=e.dialect,o=i.createDriver(),s=i.createQueryCompiler(),a=i.createAdapter(),d=new ha(e.log??[]),l=new fa(o,d),u=new pa(l),m=new ma(s,a,u,e.plugins??[]);r={executor:m},n={config:e,executor:m,dialect:i,driver:l}}super(r),this.#e=c(n)}get schema(){return new la(this.#e.executor)}get dynamic(){return new ua}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new Tn({node:Me.create(pr(e)?void 0:yr(e))})}get fn(){return na()}transaction(){return new ga({...this.#e})}connection(){return new ya({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Qe(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r=D()){let n=sy(e)?e.compile():e;return this.getExecutor().executeQuery(n,r)}},wu=class t extends Mn{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Qe(e))})}withTables(){return new t({...this.#e})}};function _P(t){return Pe(t)&&Pe(t.config)&&Pe(t.driver)&&Pe(t.executor)&&Pe(t.dialect)}var ya=class{#e;constructor(e){this.#e=c(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let n=this.#e.executor.withConnectionProvider(new Do(r)),i=new Mn({...this.#e,executor:n});return await e(i)})}};b(ya,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var ga=class t{#e;constructor(e){this.#e=c(e)}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...n}=this.#e,i={isolationLevel:r};return vP(i),this.#e.executor.provideConnection(async o=>{let s=this.#e.executor.withConnectionProvider(new Do(o)),a=new wu({...n,executor:s});try{await this.#e.driver.beginTransaction(o,i);let d=await e(a);return await this.#e.driver.commitTransaction(o),d}catch(d){throw await this.#e.driver.rollbackTransaction(o),d}})}};b(ga,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function vP(t){if(t.isolationLevel&&!oy.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var rt=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}as(e){return new Eu(this,e)}$castTo(){return new t({...this.#e})}castTo(){return this.$castTo()}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?c([...this.#e.plugins,e]):c([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#n(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#n(r),this.#e.queryId)}#t(e){let r=e!==void 0?e.getExecutor():Yr;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};b(rt,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Eu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Ue.create(this.#e.toOperationNode(),ee(this.#t)?this.#t.toOperationNode():A.create(this.#t))}};var Fe=Object.assign((t,...e)=>new rt({queryId:D(),rawNode:ue.create(t,e?.map(Ke)??[])}),{ref(t){return new rt({queryId:D(),rawNode:ue.createWithChild(zt(t))})},val(t){return new rt({queryId:D(),rawNode:ue.createWithChild(Ke(t))})},value(t){return this.val(t)},table(t){return new rt({queryId:D(),rawNode:ue.createWithChild(se(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",new rt({queryId:D(),rawNode:ue.create(e,t.map(A.create))})},lit(t){return new rt({queryId:D(),rawNode:ue.createWithChild(ve.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return new rt({queryId:D(),rawNode:ue.createWithSql(t)})},join(t,e=Fe`, `){let r=new Array(2*t.length-1),n=e.toOperationNode();for(let i=0;i<t.length;++i)r[2*i]=Ke(t[i]),i!==t.length-1&&(r[2*i+1]=n);return new rt({queryId:D(),rawNode:ue.createWithChildren(r)})}});var _a=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};var Fn=class extends _a{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),c({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!je.is(this.parentNode)&&!ht.is(this.parentNode)&&!ra.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select "),e.distinctOn&&(this.compileDistinctOn(e.distinctOn),this.append(" ")),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.selections&&(this.compileList(e.selections),this.append(" ")),this.visitNode(e.from),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let n=e.length-1;for(let i=0;i<=n;i++)this.visitNode(e[i]),i<n&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(N.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(N.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){this.visitNode(e.table),this.append("."),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!ye(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let n=0;n<r.length;++n)this.appendValue(r[n]),n!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(EP[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:n}=e;for(let i=0;i<r.length;++i)this.append(r[i]),n.length>i&&this.visitNode(n[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(N.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(wP[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return vn.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),n=this.getRightIdentifierWrapper(),i="";for(let o of e)i+=o,o===r?i+=r:o===n&&(i+=n);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(ye(e))this.append(`'${e}'`);else if(yh(e)||Us(e))this.append(e.toString());else if(js(e))this.append("null");else if(gh(e))this.appendImmediateValue(e.toISOString());else if(_h(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}},wP=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),EP=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var Ln=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};var va=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};var Fo="kysely_migration",Wn="kysely_migration_lock",Nu="migration_lock",Su=c({__noMigrations__:!0}),wa=class{#e;constructor(e){this.#e=c(e)}async getMigrations(){let e=await this.#a(this.#n)?await this.#e.db.withPlugin(this.#o).selectFrom(this.#n).select(["name","timestamp"]).execute():[];return(await this.#m()).map(({name:n,...i})=>{let o=e.find(s=>s.name===n);return{name:n,migration:i,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:e})=>e.length-1)}async migrateTo(e){return this.#t(({migrations:r})=>{if(e===Su)return-1;let n=r.findIndex(i=>i.name===e);if(n===-1)throw new Error(`migration "${e}" doesn't exist`);return n})}async migrateUp(){return this.#t(({currentIndex:e,migrations:r})=>Math.min(e+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:e})=>Math.max(e-1,-1))}async#t(e){try{return await this.#s(),await this.#h(e)}catch(r){return r instanceof Mo?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#n(){return this.#e.migrationTableName??Fo}get#i(){return this.#e.migrationLockTableName??Wn}get#o(){return this.#r?new Qe(this.#r):new va}async#s(){await this.#d(),await this.#l(),await this.#c(),await this.#f()}async#d(){if(this.#r&&!await this.#u())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(e){if(!await this.#u())throw e}}async#l(){if(!await this.#a(this.#n))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#o).createTable(this.#n).ifNotExists().addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()).execute()}catch(e){if(!await this.#a(this.#n))throw e}}async#c(){if(!await this.#a(this.#i))try{await this.#e.db.schema.withPlugin(this.#o).createTable(this.#i).ifNotExists().addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)).execute()}catch(e){if(!await this.#a(this.#i))throw e}}async#f(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#o).insertInto(this.#i).values({id:Nu,is_locked:0}).execute()}catch(e){if(!await this.#p())throw e}}async#u(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(i=>i.name===e&&(!r||i.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#o).selectFrom(this.#i).where("id","=",Nu).select("id").executeTakeFirst()}async#h(e){let r=this.#e.db.getExecutor().adapter,n=c({lockTable:this.#e.migrationLockTableName??Wn,lockRowId:Nu,lockTableSchema:this.#e.migrationTableSchema}),i=async o=>{try{await r.acquireMigrationLock(o,n);let s=await this.#y(o);if(s.migrations.length===0)return{results:[]};let a=e(s);return a===void 0?{results:[]}:a<s.currentIndex?await this.#v(o,s,a):a>s.currentIndex?await this.#w(o,s,a):{results:[]}}finally{await r.releaseMigrationLock(o,n)}};return r.supportsTransactionalDdl?this.#e.db.transaction().execute(i):this.#e.db.connection().execute(i)}async#y(e){let r=await this.#m(),n=await this.#g(e);return this.#_(r,n),c({migrations:r,currentIndex:r.findIndex(i=>i.name===vh(n))})}async#m(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#g(e){return(await e.withPlugin(this.#o).selectFrom(this.#n).select("name").orderBy("name").execute()).map(n=>n.name)}#_(e,r){for(let n of r)if(!e.some(i=>i.name===n))throw new Error(`corrupted migrations: previously executed migration ${n} is missing`);for(let n=0;n<r.length;++n)if(e[n].name!==r[n])throw new Error(`corrupted migrations: expected previously executed migration ${r[n]} to be at index ${n} but ${e[n].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#v(e,r,n){let i=[];for(let o=r.currentIndex;o>n;--o)i.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{s.down&&(await s.down(e),await e.withPlugin(this.#o).deleteFrom(this.#n).where("name","=",s.name).execute(),i[o]={migrationName:s.name,direction:"Down",status:"Success"})}catch(a){throw i[o]={migrationName:s.name,direction:"Down",status:"Error"},new Mo({error:a,results:i})}}return{results:i}}async#w(e,r,n){let i=[];for(let o=r.currentIndex+1;o<=n;++o)i.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{await s.up(e),await e.withPlugin(this.#o).insertInto(this.#n).values({name:s.name,timestamp:new Date().toISOString()}).execute(),i[o]={migrationName:s.name,direction:"Up",status:"Success"}}catch(a){throw i[o]={migrationName:s.name,direction:"Up",status:"Error"},new Mo({error:a,results:i})}}return{results:i}}},Mo=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}};var NP=/"/g,Ea=class extends Fn{sanitizeIdentifier(e){return e.replace(NP,'""')}};var SP=BigInt("3853314791062309107"),Na=class extends Ln{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e){await Fe`select pg_advisory_xact_lock(${Fe.lit(SP)})`.execute(e)}async releaseMigrationLock(){}};var bP=/`/g,Sa=class extends Fn{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(bP,"``")}};var ba=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",i=>i.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",Fe`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Fo).where("columns.TABLE_NAME","!=",Wn));let n=await r.execute();return this.#t(n)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,n)=>{let i=r.find(o=>o.name===n.TABLE_NAME);return i||(i=c({name:n.TABLE_NAME,isView:n.TABLE_TYPE==="VIEW",schema:n.TABLE_SCHEMA,columns:[]}),r.push(i)),i.columns.push(c({name:n.COLUMN_NAME,dataType:n.DATA_TYPE,isNullable:n.IS_NULLABLE==="YES",isAutoIncrementing:n.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:n.COLUMN_DEFAULT!==null})),r},[])}};var ay="ea586330-2c93-47c8-908d-981d9d270f9d",xP=60*60,xa=class extends Ln{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e){await Fe`select get_lock(${Fe.lit(ay)}, ${Fe.lit(xP)})`.execute(e)}async releaseMigrationLock(e){await Fe`select release_lock(${Fe.lit(ay)})`.execute(e)}};var Ca=class{#e;constructor(e){this.#e=e}async init(){}async acquireConnection(){return new bu(this.#e)}async beginTransaction(e){await e.beginTransaction()}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){}async destroy(){}},bu=class{#e;#t;constructor(e){this.#e=e}async beginTransaction(){let e=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=e.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(e){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:e.sql,parameters:e.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((s,a)=>[r.columnMetadata[a].label||r.columnMetadata[a].name,s.isNull?null:s.stringValue??s.doubleValue??s.longValue??s.booleanValue??this.#r(s.arrayValue)??s.blobValue??null])))||[]}}async*streamQuery(e,r){throw new Error("Data API does not support streaming")}#r(e){if(e)return e.stringValues??e.doubleValues??e.longValues??e.booleanValues??e.arrayValues?.map(this.#r)}};var Oa=class extends Ea{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...cy(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}},Pa=class extends Sa{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...cy(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};function cy(t){switch(typeof t){case"bigint":return{value:{doubleValue:Number(t)}};case"boolean":return{value:{booleanValue:t}};case"number":return Number.isInteger(t)?{value:{longValue:t}}:{value:{doubleValue:t}};case"object":if(t==null)return{value:{isNull:!0}};if(Buffer.isBuffer(t))return{value:{blobValue:t}};if(t instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:dy(t.toISOString())}};if(t?.value&&PP(t.value))return t.typeHint&&t.value.stringValue&&typeof t.value.stringValue=="string"&&(t.value.stringValue=CP(t.typeHint,t.value.stringValue)),t;break;case"string":return{value:{stringValue:t}}}throw new Cu("Could not serialize value")}function CP(t,e){switch(t){case"DATE":return xu(e).slice(0,10);case"TIME":return e.match(/^\d{4}-\d{2}-\d{2}/)?xu(e).slice(11,23):OP(e);case"TIMESTAMP":return dy(xu(e))}return e}function OP(t){let e=(t||"00:00:00").split(":");for(;e.length<3;)e.push("00");return e.join(":").slice(0,12)}function dy(t){return t.replace("T"," ").slice(0,23)}function xu(t){return new Date(Date.parse(t)).toISOString()}function PP(t){for(let e of AP)if(t[e])return!0;if(t.arrayValue){for(let e of TP)if(t.arrayValue?.[e])return!0}return!1}var Cu=class t extends Error{constructor(e){super(e),this.name=t.name}},TP=["booleanValues","doubleValues","longValues","stringValues"],AP=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var Ta=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(Fe`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",Fe`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(i=>i.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",Fo).where("c.relname","!=",Wn));let n=await r.execute();return this.#t(n)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,n)=>{let i=r.find(o=>o.name===n.table&&o.schema===n.schema);return i||(i=Object.freeze({name:n.table,isView:n.table_type==="v",schema:n.schema,columns:[]}),r.push(i)),i.columns.push(Object.freeze({name:n.column,dataType:n.type,dataTypeSchema:n.type_schema,isNullable:!n.not_null,isAutoIncrementing:!!n.auto_incrementing,hasDefaultValue:n.has_default})),r},[])}};var Aa=class{#e;constructor(e){this.#e=e}createAdapter(){if(this.#e.mode==="postgres")return new Na;if(this.#e.mode==="mysql")return new xa;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new Ca(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new Oa;if(this.#e.mode==="mysql")return new Pa;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(e){if(this.#e.mode==="postgres")return new Ta(e);if(this.#e.mode==="mysql")return new ba(e);throw new Error("Unknown mode "+this.#e.mode)}};var F0=B0(M0(),1);import $G from"url";async function ose(t){console.log("initializing db");let e=new Mn({dialect:new Aa({mode:process.env.RDS_ENGINE_MODE,driver:{client:new F0.RDSData({}),database:t?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new wa({db:e,provider:new mh(jG.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",t),!t.type||t.type==="latest"){console.log("migrating to latest");let n=await r.migrateToLatest(),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(t.type==="to"){if(console.log("migrating to",t.data.name),!t.data.name)return await r.migrateTo(Su);let n=await r.migrateTo(t.data.name),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(t.type==="list")return console.log("listing migrations"),await r.getMigrations()}var mh=class{#e;constructor(e){this.#e=e}async getMigrations(){let e=await import("fs/promises"),r=await import("path"),n={},i=await e.readdir(this.#e);for(let o of i)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[s]=r.basename(o).split("."),a=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let l=await import(a);n[s]=l;continue}let d=a.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await e.copyFile(a,d);let l=await import($G.pathToFileURL(d).href);n[s]=l}catch(l){console.error(l)}await e.rm(d)}return n}};export{ose as handler};
